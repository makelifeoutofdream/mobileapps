<ion-header>
  <ion-toolbar>
    <ion-title>New Invoice</ion-title>
    <ion-buttons slot="start">
        <ion-menu-button menu="mainmenu"> 

        </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="row"></div>
   
<ion-select style="margin-top: 2%;height: 30px;margin-right: 4%;" (ionChange)="populateCustomerProducts()" [(ngModel)]="invoice.customer" placeholder="Select Customer">
  <ion-select-option *ngFor="let cus of customerList" [value]="cus">{{cus.name}}</ion-select-option>
</ion-select>
<ion-item>
  <ion-label>Product</ion-label>
  <ionic-selectable style="height: 30px;"
    
    [(ngModel)]="product"
    [items]="products"
    itemValueField="name"
    itemTextField="name"
    [canSearch]="true"
    (onChange)="productSelected($event)"
    [isMultiple]="true">
  </ionic-selectable>
</ion-item> 
<table border="5" style="width: 94%;margin-left: 2%;margin-right: 5%;margin-top: 2%;">
  <tr>
    <td>
      Item
    </td>
    <td>
      Price
    </td>
    <td>
      Purchase Price
    </td>
    <td>
      Quantity
    </td>
  </tr>
  <tr *ngFor= "let item of invoice.invoiceItems" >
    <td><ion-input  disabled [(ngModel)]="item.name" ></ion-input></td>
    <td><ion-input (ionChange)="calculateInvoiceTotal()" type="number" [(ngModel)]="item.unitPrice" ></ion-input></td>
    <td><ion-input (ionChange)="calculateInvoiceTotal()" type="number" [(ngModel)]="item.purchasePrice" ></ion-input></td>
    <td><ion-input (ionChange)="calculateInvoiceTotal()" type="number" [(ngModel)]="item.quantity"  (keypress)="numericOnly($event)"></ion-input></td>
  </tr>
</table>

<ion-grid>
    <ion-row>
      <ion-col size="6">
        <ion-label color="primary">Amount To Be Paid</ion-label>
      </ion-col>
      <ion-col size="6">
        <ion-label >{{invoice.total}}</ion-label>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="3">
        <ion-label color="primary">Apply VAT</ion-label>
      </ion-col>
      <ion-col size="6">
        <ion-checkbox color="primary" [(ngModel)]="applyVat" (ionChange)="calculateInvoiceTotal()" ></ion-checkbox>
      </ion-col>
      
    </ion-row>  
    <!-- <ion-row>
      <ion-col size="6">
        <ion-label color="primary">Invoice Number</ion-label>
      </ion-col>
      <ion-col size="6">
        <ion-label >{{invoice.invoiceNumber}}</ion-label>
      </ion-col>
    </ion-row>   -->
  
  </ion-grid>
    <ion-grid>
      <ion-row> 
        <ion-col size="3">
          <ion-button color="primary" (click)="submitBill()">Submit</ion-button>
        </ion-col>
        
        <ion-col size="3">
          <ion-button color="primary" (click)="printBill()">Print</ion-button>
        </ion-col>

      </ion-row>
    </ion-grid>
</ion-content>
