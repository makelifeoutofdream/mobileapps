{"version":3,"sources":["./src/app/settings/settings-routing.module.ts","./src/app/settings/settings.module.ts","./src/app/settings/settings.page.ts","./src/app/settings/settings.page.scss","./src/app/settings/settings.page.html"],"names":[],"mappings":"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","file":"src_app_settings_settings_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SettingsPage } from './settings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SettingsPageRoutingModule } from './settings-routing.module';\n\nimport { SettingsPage } from './settings.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SettingsPageRoutingModule\n  ],\n  declarations: [SettingsPage]\n})\nexport class SettingsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, Platform } from '@ionic/angular';\nimport { profile } from 'console';\nimport { DbService } from '../services/db.service';\nimport { PrintService } from '../services/print.service';\nimport { Profile } from '../services/profile';\nimport { ToastserviceService } from '../services/toastservice.service';\nimport {ApplicationRef} from '@angular/core'\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n})\nexport class SettingsPage implements OnInit {\n  user : any={};\n  type : string;\n  bluetoothList:any=[];\n  selectedPrinter:any;\n  showProfileSegment : boolean=true;\n  showTaxSegment : Boolean=false;\n  showPrinterSegment : Boolean=false;\n  private userProfile : Profile={id:null,toEmail:\"\",ccEmail:\"\",vat:null};\n  constructor(public navCtrl:NavController,private print:PrintService,private toastService:ToastserviceService,\n    private dbService:DbService,private ref: ApplicationRef,private plt:Platform) { \n    this.type=\"profile\";\n    this.userProfile={id:null,toEmail:\"\",ccEmail:\"\",vat:null};\n    this.user.userProfile=this.userProfile;\n  }\n\n  ngOnInit() {\n    this.type=\"profile\";\n    this.showHideSegment();\n    this.listPrinter();\n    \n      this.userProfile={id:null,toEmail:\"\",ccEmail:\"\",vat:null};\n      this.user.userProfile=this.userProfile;\n  }\n\n  \n\n  showHideSegment(){\n    if(this.type=='profile'){\n      this.showPrinterSegment=false;\n      this.showProfileSegment=true;\n      this.showTaxSegment=false;\n    }else if(this.type=='tax'){\n      this.showPrinterSegment=false;\n      this.showProfileSegment=false;\n      this.showTaxSegment=true;\n    }else if(this.type=='printer'){\n      this.showPrinterSegment=true;\n      this.showProfileSegment=false;\n      this.showTaxSegment=false;\n    }\n    //this.ref.tick();\n  }\n  ionViewWillEnter(){\n    \n    this.listPrinter();\n    this.type=\"profile\";\n    this.showHideSegment();\n    this.dbService.getProfile().then(data=>this.userProfile=data);\n    if(this.userProfile==null || this.userProfile==undefined){\n      this.userProfile={id:null,toEmail:\"\",ccEmail:\"\",vat:null};\n      this.user.userProfile=this.userProfile;\n    }\n    console.log(\"profile\"+this.user.userProfile);\n  }\n\n  listPrinter(){\n    if(this.plt.is('cordova')){\n    this.print.searchBluetoothPrinter().then(resp=>{\n      this.bluetoothList=resp;\n      \n    });\n  }\n  }\n  \n  selectPrinter(macAddress:string){\n    this.print.selectedPrinter=macAddress;\n    this.selectedPrinter=this.print.selectedPrinter;\n  }\n\n  updateProfile(){\n    console.log(\"profile\"+this.user.userProfile);\n    this.dbService.createOrUpdateProfile(this.user.userProfile).then(data=>{\n      if(data==null || data==undefined){\n        this.toastService.presentToast(\"Failed to update settings\");  \n      }else{\n        this.toastService.presentToast(\"Settings updated successfully\");\n      }\n      \n    }).catch(reason=>{\n      this.toastService.presentToast(\"Failed to update settings\");\n    })\n  }\n  \n\n  segmentChanged(evt:any){\n    if(evt.detail.value=='profile'){\n      this.type=\"profile\";\n    }else if(evt.detail.value=='tax'){\n      this.type=\"tax\";\n    }else if(evt.detail.value=='printer'){\n      this.type=\"printer\";\n    }\n\n    this.dbService.getProfile().then(data=>this.userProfile=data);\n    if(this.userProfile==null || this.userProfile==undefined){\n      this.userProfile={id:null,toEmail:\"\",ccEmail:\"\",vat:null};\n      this.user.userProfile=this.userProfile;\n    }\n    this.showHideSegment();\n  }\n  updatePrinter(){\n   this.toastService.presentToast(\"Printer configured successfully\");\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzZXR0aW5ncy5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Settings</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-segment color=\\\"secondary\\\" (ionChange)=\\\"segmentChanged($event)\\\" [(ngModel)]=\\\"type\\\"> \\n    <ion-segment-button checked value=\\\"profile\\\">\\n      <ion-label>Profile</ion-label>\\n      <ion-icon name=\\\"person-circle\\\"></ion-icon>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"tax\\\">\\n      <ion-label>Tax</ion-label>\\n       <ion-icon name=\\\"clipboard\\\"></ion-icon>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"printer\\\">\\n      <ion-label>Printer</ion-label>\\n      <ion-icon name=\\\"print\\\"></ion-icon>\\n    </ion-segment-button>\\n  </ion-segment>\\n\\n\\n  <div [ngSwitch]=\\\"type\\\">\\n    <div *ngSwitchCase=\\\"'profile'\\\"> \\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-item style=\\\"width: 100%\\\"> \\n              <ion-textarea  placeholder=\\\"Email to send\\\" [(ngModel)]=\\\"user.toEmail\\\"></ion-textarea>\\n          </ion-item>\\n        \\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-item style=\\\"width: 100%\\\"> \\n              <ion-textarea  placeholder=\\\"CC Emails\\\" [(ngModel)]=\\\"user.ccEmail\\\"></ion-textarea>\\n          </ion-item>\\n        \\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n      <ion-row style=\\\"float:right\\\">\\n        <ion-col >\\n        <ion-button  color=\\\"primary\\\" (click)=\\\"updateProfile()\\\">\\n          <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n      </ion-row>\\n      \\n    </div>\\n    <div *ngSwitchCase=\\\"'tax'\\\"> \\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-item style=\\\"width: 100%\\\"> \\n              <ion-input type=\\\"number\\\" placeholder=\\\"Vat(%)\\\" [(ngModel)]=\\\"user.vat\\\"></ion-input>\\n          </ion-item>\\n        \\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n      <ion-row style=\\\"float:right\\\">\\n        <ion-col >\\n        <ion-button  color=\\\"primary\\\" (click)=\\\"updateProfile()\\\">\\n          <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n      </ion-row>\\n      \\n    </div>\\n    <div *ngSwitchCase=\\\"'printer'\\\">\\n      <ion-list>\\n        <ion-item *ngFor=\\\"let item of bluetoothList\\\" (click)=\\\"selectPrinter(item.id)\\\">\\n          {{item.name}} {{item.id}}\\n        </ion-item>\\n      </ion-list>\\n      <ion-item *ngIf=\\\"bluetoothList!=null && bluetoothList!=undefined\\\">\\n        Selected Printer: {{selectedPrinter}}\\n      </ion-item>\\n      <ion-item *ngIf=\\\"bluetoothList==null || bluetoothList==undefined\\\">\\n        No Printer Connected..\\n      </ion-item>\\n      <ion-row style=\\\"float:right\\\">\\n        <ion-col >\\n        <ion-button  color=\\\"primary\\\" (click)=\\\"updatePrinter()\\\">\\n          <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n      </ion-row>\\n    </div>\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}