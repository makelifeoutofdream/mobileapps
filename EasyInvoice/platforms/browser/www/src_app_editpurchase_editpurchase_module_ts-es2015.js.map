{"version":3,"sources":["./src/app/editpurchase/editpurchase-routing.module.ts","./src/app/editpurchase/editpurchase.module.ts","./src/app/editpurchase/editpurchase.page.ts","./src/app/editpurchase/editpurchase.page.scss","./src/app/editpurchase/editpurchase.page.html"],"names":[],"mappings":"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","file":"src_app_editpurchase_editpurchase_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditpurchasePage } from './editpurchase.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditpurchasePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditpurchasePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditpurchasePageRoutingModule } from './editpurchase-routing.module';\n\nimport { EditpurchasePage } from './editpurchase.page';\nimport { IonicSelectableModule } from 'ionic-selectable';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditpurchasePageRoutingModule,\n    IonicSelectableModule\n  ],\n  declarations: [EditpurchasePage]\n})\nexport class EditpurchasePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { DbService } from '../services/db.service';\nimport { Inventory } from '../services/inventory';\nimport { Purchase } from '../services/purchase';\nimport { PurchaseItem } from '../services/PurchaseItem';\nimport { Supplier } from '../services/supplier';\nimport { ToastserviceService } from '../services/toastservice.service';\nimport { ValidationService } from '../validation.service';\n\n@Component({\n  selector: 'app-editpurchase',\n  templateUrl: './editpurchase.page.html',\n  styleUrls: ['./editpurchase.page.scss'],\n})\nexport class EditpurchasePage implements OnInit {\n\n  constructor(private dbService : DbService,private toastService : ToastserviceService,public navCtrl:NavController,\n    private route : ActivatedRoute,private validationService  :ValidationService) { }\n  private supplierList : any;\n  private deafultProducts : Inventory[];\n  private products : Inventory[];\n  private selectedProducts : Inventory[];\n  private purchase : Purchase;\n  private showTable=false;\n  \n  ngOnInit() {\n    this.resetPurchase();\n  }\n\n  resetPurchase(){\n    this.purchase={id: null,poNumber:null,purchaseDate:new Date(),deliveryDate:new Date(),purchaseItems:[],supplier:null}\n  }\n  \n  ionViewWillEnter(){\n    this.showTable=false;\n    \n    this.dbService.getAllInventories().then(data=>{\n      this.products=data;\n    }).then(data=>{\n      this.dbService.getAllSuppliers().then(data=>{\n        this.supplierList=data;\n      }).then(data=>{\n\n    this.route.queryParams.subscribe(params=>{\n      this.purchase=params['purchase'];\n      console.log(\"purchase selected\"+this.purchase.supplier.id);\n      this.deafultProducts=[];\n      for(let pitem of this.purchase.purchaseItems){\n        let inv : Inventory={id:null,code:\"\",name:\"\",nameInArabic:\"\",description:\"\",quantity:null,unitPrice:null,purchasePrice:null}\n        inv=pitem.item;\n        this.deafultProducts.push(inv);\n      }\n      this.showTable=true;\n    })\n      })\n    })\n    \n\n  }\n\n  compareSupplier(e1: Supplier, e2: Supplier): boolean {\n    return e1 && e2 ? e1.id == e2.id : e1 == e2;\n  }\n\n  productSelected(evt){\n    this.selectedProducts=evt.value;\n    let  tempList : PurchaseItem [];\n    tempList=[];\n    for(let inv of this.selectedProducts){\n      var index = this.purchase.purchaseItems.findIndex(i => i.item.id == inv.id);\n      let p : PurchaseItem=this.purchase.purchaseItems[index];\n      let pItem : PurchaseItem={item:{id:null,code:\"\",name:\"\",nameInArabic:\"\",description:\"\",quantity:null,purchasePrice:null,unitPrice:null},orderQuantity:null,deliverQuantity:null,price:null}; \n      pItem.item=inv;\n      if(p!=null && p!=undefined){\n        pItem.deliverQuantity=p.deliverQuantity\n        pItem.orderQuantity=p.orderQuantity;\n        pItem.price=p.price;\n        \n      }\n      tempList.push(pItem);\n      }\n    \n      this.purchase.purchaseItems=tempList;\n      this.showTable=true;\n    \n  }\n\n  numericOnly(evt){\n    return this.validationService.numericOnly(evt);\n  }\n  editPurchase(){\n    this.dbService.updatePurchase(this.purchase).then(data=>{\n      this.toastService.presentToast(\"Purchase updated successfully\");\n      return this.showPurchase();\n    } ).catch(reason=>{\n      this.toastService.presentToast(\"Failed to save update \"+reason);\n    })\n  }\n  showPurchase(){\n    this.navCtrl.navigateRoot('purchase');\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlZGl0cHVyY2hhc2UucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu=\\\"mainmenu\\\"> \\n\\n      </ion-menu-button>\\n    </ion-buttons> \\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-back-button defaultHref=\\\"home\\\" (click)=\\\"showPurchase()\\\"> </ion-back-button>\\n      \\n    </ion-buttons>\\n    <ion-title>Edit Purchase</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n          <ion-item style=\\\"margin-top: 2%;\\\">\\n            <ion-label position=\\\"floating\\\">PO No</ion-label>\\n            <ion-input name=\\\"poNumber\\\" disabled type=\\\"text\\\" [(ngModel)]=\\\"purchase.poNumber\\\" required></ion-input>\\n          </ion-item>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Date</ion-label>\\n          <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" [(ngModel)]=\\\"purchase.purchaseDate\\\" required ></ion-datetime>\\n        </ion-item>\\n    </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n        <ion-item style=\\\"margin-top: 7%;\\\">\\n        <ion-select style=\\\"margin-top: 2%;height: 30px;margin-right: 4%;\\\"  [(ngModel)]=\\\"purchase.supplier\\\" [compareWith]=\\\"compareSupplier\\\" placeholder=\\\"Select Supplier\\\">\\n          <ion-select-option *ngFor=\\\"let sup of supplierList\\\" [value]=\\\"sup\\\">{{sup.name}}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\">\\n        <ion-item >\\n          <ion-label position=\\\"floating\\\">Delivery Date</ion-label>\\n          <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" [(ngModel)]=\\\"purchase.deliveryDate\\\" required ></ion-datetime>\\n        </ion-item> \\n       </ion-col>\\n    </ion-row>\\n    \\n    <ion-item>\\n      <ion-label>Product</ion-label>\\n      <ionic-selectable style=\\\"height: 30px;\\\"\\n        \\n        [(ngModel)]=\\\"deafultProducts\\\"\\n        [items]=\\\"products\\\"\\n        itemValueField=\\\"name\\\"\\n        itemTextField=\\\"name\\\"\\n        [canSearch]=\\\"true\\\"\\n        (onChange)=\\\"productSelected($event)\\\"\\n        [isMultiple]=\\\"true\\\"\\n        >\\n      </ionic-selectable>\\n    </ion-item> \\n    \\n<table *ngIf=\\\"showTable\\\" border=\\\"none\\\" style=\\\"width: 94%;margin-left: 2%;margin-right: 5%;margin-top: 2%; color: black;background-color: aliceblue; text-align: center;\\\">\\n  <tr style=\\\"border: none; color: white; background-color: lightslategray;\\\">\\n    <td>\\n      Item Code\\n    </td>\\n    <td>\\n      Item Name\\n    </td>\\n    <td>\\n      Order Quantity\\n    </td>\\n    <td>\\n      Received Quantity\\n    </td>\\n    <td>\\n      Price\\n    </td>\\n  </tr>\\n  <tr *ngFor= \\\"let pItem of purchase.purchaseItems\\\" style=\\\"border: none;\\\">\\n    <td><ion-input  disabled [(ngModel)]=\\\"pItem.item.code\\\" ></ion-input></td>\\n    <td><ion-input  disabled [(ngModel)]=\\\"pItem.item.name\\\" ></ion-input></td>\\n    <td><ion-input  type=\\\"number\\\" [(ngModel)]=\\\"pItem.orderQuantity\\\"  (keypress)=\\\"numericOnly($event)\\\"></ion-input></td>\\n    <td><ion-input  type=\\\"number\\\" [(ngModel)]=\\\"pItem.deliverQuantity\\\"  (keypress)=\\\"numericOnly($event)\\\"></ion-input></td>\\n    <td><ion-input  type=\\\"number\\\" [(ngModel)]=\\\"pItem.price\\\"  ></ion-input></td>\\n  </tr>\\n</table>\\n    </ion-grid>\\n    <ion-row style=\\\"float:right\\\">\\n      <ion-col >\\n      <ion-button  color=\\\"primary\\\" (click)=\\\"editPurchase()\\\">\\n        <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n       \\n        \\n      </ion-button>\\n    </ion-col>\\n    </ion-row>\\n    \\n    \\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}