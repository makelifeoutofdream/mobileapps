{"version":3,"sources":["./src/app/newpurchase/newpurchase-routing.module.ts","./src/app/newpurchase/newpurchase.module.ts","./src/app/newpurchase/newpurchase.page.ts","./src/app/newpurchase/newpurchase.page.scss","./src/app/newpurchase/newpurchase.page.html"],"names":[],"mappings":"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","file":"src_app_newpurchase_newpurchase_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewpurchasePage } from './newpurchase.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewpurchasePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NewpurchasePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewpurchasePageRoutingModule } from './newpurchase-routing.module';\n\nimport { NewpurchasePage } from './newpurchase.page';\nimport { IonicSelectableModule } from 'ionic-selectable';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NewpurchasePageRoutingModule,\n    IonicSelectableModule\n  ],\n  declarations: [NewpurchasePage]\n})\nexport class NewpurchasePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { DbService } from '../services/db.service';\nimport { Inventory } from '../services/inventory';\nimport { Purchase } from '../services/purchase';\nimport { PurchaseItem } from '../services/PurchaseItem';\nimport { ToastserviceService } from '../services/toastservice.service';\nimport { ValidationService } from '../validation.service';\n\n@Component({\n  selector: 'app-newpurchase',\n  templateUrl: './newpurchase.page.html',\n  styleUrls: ['./newpurchase.page.scss'],\n})\nexport class NewpurchasePage implements OnInit {\n  private supplierList : any;\n  private product : Inventory;\n  private products : Inventory[];\n  private selectedProducts : Inventory[];\n  private purchase : Purchase;\n  private showTable=false;\n  constructor(private dbService:DbService,public navCtrl:NavController, public tostService:ToastserviceService,private validationService :ValidationService )  { }\n\n  ngOnInit() {\n    this.resetPurchase();\n   \n  }\nresetPurchase(){\n  this.purchase={id: null,poNumber:null,purchaseDate:new Date(),deliveryDate:new Date(),purchaseItems:[],supplier:null}\n}\n  ionViewWillEnter(){\n    this.showTable=false;\n    this.resetPurchase();\n    this.dbService.incrementPurchaseCode().then(data=>{\n      this.dbService.getPurchaseCode().then(data=>{\n        console.log(\"purchase no\"+data);\n        if(data==null || data==undefined){\n          data=1;\n        }\n        this.purchase.poNumber=this.dbService.codeConstant+this.dbService.purchaseCodeConstant+ data;\n      })\n    })\n    \n    this.dbService.getAllInventories().then(data=>{\n      this.products=data;\n    })\n    this.dbService.getAllSuppliers().then(data=>{\n      this.supplierList=data;\n    })\n\n    \n  }\n\n\n  populateSupplier(){\n    this.dbService.getAllSuppliers().then(data=>{\n      this.supplierList=data;\n    })\n  }\n\n  productSelected(evt){\n    this.selectedProducts=evt.value;\n    let  tempList : PurchaseItem [];\n    tempList=[];\n    for(let inv of this.selectedProducts){\n      var index = this.purchase.purchaseItems.findIndex(i => i.item.id == inv.id);\n      let p : PurchaseItem=this.purchase.purchaseItems[index];\n      let pItem : PurchaseItem={item:{id:null,code:\"\",name:\"\",nameInArabic:\"\",description:\"\",quantity:null,purchasePrice:null,unitPrice:null},orderQuantity:null,deliverQuantity:null,price:null}; \n      pItem.item=inv;\n      if(p!=null && p!=undefined){\n        pItem.deliverQuantity=p.deliverQuantity\n        pItem.orderQuantity=p.orderQuantity;\n        pItem.price=p.price;\n        \n      }\n      tempList.push(pItem);\n      }\n    \n      this.purchase.purchaseItems=tempList;\n      this.showTable=true;\n  }\n\n  async addNewPurchase() :Promise<any>{\n    \n    this.dbService.createPurchase(this.purchase).then(data=>{\n      \n      this.dbService.updateStock(this.purchase.purchaseItems).then(data=>{\n        this.tostService.presentToast(\"Purchase added successfully\");      \n      })\n      \n    }).catch(reason=>{\n      console.log(reason);\n    }).finally(()=>{\n      this.resetPurchase();\n      this.navCtrl.navigateRoot('purchase');\n    });\n  } \n\n  numericOnly(evt){\n    return this.validationService.numericOnly(evt);\n  }\n\n  showPurchase(){\n    this.navCtrl.navigateRoot('purchase');\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJuZXdwdXJjaGFzZS5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu=\\\"mainmenu\\\"> \\n\\n      </ion-menu-button>\\n    </ion-buttons> \\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-back-button defaultHref=\\\"home\\\" (click)=\\\"showPurchase()\\\"> </ion-back-button>\\n      \\n    </ion-buttons>\\n    <ion-title>New Purchase</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n          <ion-item style=\\\"margin-top: 2%;\\\">\\n            <ion-label position=\\\"floating\\\">PO No</ion-label>\\n            <ion-input name=\\\"poNumber\\\" type=\\\"text\\\" [(ngModel)]=\\\"purchase.poNumber\\\" required></ion-input>\\n          </ion-item>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Date</ion-label>\\n          <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" [(ngModel)]=\\\"purchase.purchaseDate\\\" required ></ion-datetime>\\n        </ion-item>\\n    </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n        <ion-item style=\\\"margin-top: 7%;\\\">\\n        <ion-select style=\\\"margin-top: 2%;height: 30px;margin-right: 4%;\\\"  [(ngModel)]=\\\"purchase.supplier\\\" placeholder=\\\"Select Supplier\\\">\\n          <ion-select-option *ngFor=\\\"let sup of supplierList\\\" [value]=\\\"sup\\\">{{sup.name}}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\">\\n        <ion-item >\\n          <ion-label position=\\\"floating\\\">Delivery Date</ion-label>\\n          <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" [(ngModel)]=\\\"purchase.deliveryDate\\\" required ></ion-datetime>\\n        </ion-item> \\n       </ion-col>\\n    </ion-row>\\n    \\n    <ion-item>\\n      <ion-label>Product</ion-label>\\n      <ionic-selectable style=\\\"height: 30px;\\\"\\n        \\n        [(ngModel)]=\\\"product\\\"\\n        [items]=\\\"products\\\"\\n        itemValueField=\\\"name\\\"\\n        itemTextField=\\\"name\\\"\\n        [canSearch]=\\\"true\\\"\\n        (onChange)=\\\"productSelected($event)\\\"\\n        [isMultiple]=\\\"true\\\">\\n      </ionic-selectable>\\n    </ion-item> \\n    \\n<table *ngIf=\\\"showTable\\\" border=\\\"none\\\" style=\\\"width: 94%;margin-left: 2%;margin-right: 5%;margin-top: 2%; color: black;background-color: aliceblue; text-align: center;\\\">\\n  <tr style=\\\"border: none; color: white; background-color: lightslategray;\\\">\\n    <td>\\n      Item Code\\n    </td>\\n    <td>\\n      Item Name\\n    </td>\\n    <td>\\n      Order Quantity\\n    </td>\\n    <td>\\n      Received Quantity\\n    </td>\\n    <td>\\n      Price\\n    </td>\\n  </tr>\\n  <tr *ngFor= \\\"let pItem of purchase.purchaseItems\\\" style=\\\"border: none;\\\">\\n    <td><ion-input  disabled [(ngModel)]=\\\"pItem.item.code\\\" ></ion-input></td>\\n    <td><ion-input  disabled [(ngModel)]=\\\"pItem.item.name\\\" ></ion-input></td>\\n    <td><ion-input  type=\\\"number\\\" [(ngModel)]=\\\"pItem.orderQuantity\\\"  (keypress)=\\\"numericOnly($event)\\\"></ion-input></td>\\n    <td><ion-input  type=\\\"number\\\" [(ngModel)]=\\\"pItem.deliverQuantity\\\"  (keypress)=\\\"numericOnly($event)\\\"></ion-input></td>\\n    <td><ion-input  type=\\\"number\\\" [(ngModel)]=\\\"pItem.price\\\"  ></ion-input></td>\\n  </tr>\\n</table>\\n    </ion-grid>\\n    <ion-row style=\\\"float:right\\\">\\n      <ion-col >\\n      <ion-button  color=\\\"primary\\\" (click)=\\\"addNewPurchase()\\\">\\n        <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n       \\n        \\n      </ion-button>\\n    </ion-col>\\n    </ion-row>\\n    \\n    \\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}