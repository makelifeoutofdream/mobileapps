{"version":3,"sources":["./src/app/newinvoice/newinvoice-routing.module.ts","./src/app/newinvoice/newinvoice.module.ts","./src/app/newinvoice/newinvoice.page.ts","./src/app/services/invoice.ts","./src/app/newinvoice/newinvoice.page.scss","./src/app/newinvoice/newinvoice.page.html"],"names":[],"mappings":"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","file":"src_app_newinvoice_newinvoice_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewinvoicePage } from './newinvoice.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewinvoicePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NewinvoicePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewinvoicePageRoutingModule } from './newinvoice-routing.module';\n\nimport { NewinvoicePage } from './newinvoice.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NewinvoicePageRoutingModule\n  ],\n  declarations: [NewinvoicePage]\n})\nexport class NewinvoicePageModule {}\n","import { isNgTemplate } from '@angular/compiler';\nimport { Component, IterableDiffers, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { threadId } from 'worker_threads';\nimport { Customer } from '../services/customer';\nimport { DbService } from '../services/db.service';\nimport { Inventory } from '../services/inventory';\nimport { Invoice } from '../services/invoice';\nimport { InvoiceItem } from '../services/invoiceitem';\nimport { PrintService } from '../services/print.service';\nimport { ToastserviceService } from '../services/toastservice.service';\n\n@Component({\n  selector: 'app-newinvoice',\n  templateUrl: './newinvoice.page.html',\n  styleUrls: ['./newinvoice.page.scss'],\n})\nexport class NewinvoicePage implements OnInit {\n  private invoice : Invoice;\n  private customerList:Customer[];\n  constructor(public dbService:DbService,public tostService:ToastserviceService,public navCtrl:NavController,\n    public printService : PrintService) { }\n\n  ngOnInit() {\n    this.invoice={invoiceNumber : \"\",invoiceDate: new Date() ,\n    customer : {contactPersonName : \"\",location  : \"\",name : \"\",vat:null,itemList : null},invoiceItems : [],\n  total:null,tax:null} \n}\n\n\nionViewWillEnter(){\n  this.resetInvoiceForm();\n}\n\nresetInvoiceForm(){\n\n  let inventory ;\n  this.invoice=new Invoice();\n  this.invoice.invoiceDate=new Date();\n  this.invoice.invoiceItems=new Array();\n  this.dbService.getInvoiceNumber().then(data=>{\n    this.invoice.invoiceNumber=data;\n  });\n  this.dbService.getAllInventories().then(data=>{\n    for(let inv of data){\n      inventory={name : inv.name,unitPrice : inv.unitPrice,billingUnitPrice:null,quantity:null,InvoiceItem:[]};\n      this.invoice.invoiceItems.push(inventory);\n    }\n    this.dbService.getAllCustomers().then(data=>this.customerList=data);\n  }).catch(reason=>{\n    console.log(reason);\n    this.tostService.presentToast(\"Failed to fetch the inventory items\"); \n  })\n}\n  \ncalculateInvoiceTotal(){\n  this.invoice.total=0;\n  let selectedItems : InvoiceItem[]=this.invoice.invoiceItems.filter(l=>l.selected);\n  if(undefined==this.invoice.total || null==this.invoice.total){\n    this.invoice.total=0;\n  }\n  for(let itm of selectedItems){\n    this.invoice.total=this.invoice.total+ (itm.unitPrice*itm.quantity);\n  }\n  //apply vat\n  this.invoice.tax=(this.invoice.customer.vat*this.invoice.total)/100;\n  this.invoice.total=this.invoice.total+this.invoice.tax;\n  \n}\n\nsubmitBill(){\n  this.dbService.createOrUpdateInvoice(this.invoice).then(data=>{\n    this.tostService.presentToast(\"Bill submitted successfully\");\n    this.dbService.incrementInvoiceNumber().then(data=>{\n      this.invoice.invoiceNumber=data;\n    });\n\n  }).catch(reason=>{\n    this.tostService.presentToast(\"Failed to submit bill\");\n    console.log(reason);\n  })\n}\n\nprintBill(){\n  let data='---------------------RECEIPT-----------------------\\n\\n\\nDate :'+this.invoice.invoiceDate+'\\nInvoice Number :'+this.invoice.invoiceNumber+'\\nCustomer:'+this.invoice.customer+'/n/n';\n  for(let itm of this.invoice.invoiceItems){\n    data=data+'Item Name :'+itm.name+'  Price :'+itm.unitPrice+'  Quantity :'+itm.quantity;\n  }\n  data=data+'-----------------------------------------------------------------------';\n  data=data+'\\n Vat Applied :'+this.invoice.customer.vat;\n  data=data+'\\n Total :'+this.invoice.total;\n  this.printService.sendToBluetoothPrinter(this.printService.selectedPrinter,data);\n}\n}\n","import { InvoiceItem } from \"./invoiceitem\";\nimport {Customer} from './customer';\nexport class Invoice{\n    invoiceNumber : string;\n    invoiceItems : InvoiceItem [];\n    invoiceDate : Date ;\n    customer : Customer;\n    total : number;\n    tax : number;\n}","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJuZXdpbnZvaWNlLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>New Invoice</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"row\\\"></div>\\n    <ion-grid class=\\\"ion-margin-top\\\">\\n\\n      <ion-row>\\n        <ion-col size=\\\"6\\\" >  \\n              <ion-row >\\n                <ion-label style=\\\"margin-left: 18px;\\\" color=\\\"primary\\\" >Invoice Number</ion-label>\\n              </ion-row>\\n              <ion-row >\\n                <ion-label position=\\\"floating\\\" style=\\\"margin-left: 18px;\\\" >{{invoice.invoiceNumber}}</ion-label>\\n              </ion-row>\\n\\n            \\n            </ion-col>\\n            <ion-col size=\\\"6\\\">\\n              <ion-row>\\n                <ion-label color=\\\"primary\\\"  >Date Of Issue</ion-label>\\n              </ion-row>\\n              <ion-row>\\n                <ion-label position=\\\"floating\\\">{{invoice.invoiceDate|date : 'yyyy-MM-dd'}}</ion-label>\\n              </ion-row>\\n\\n            \\n          \\n          \\n        </ion-col>\\n      </ion-row>\\n      <ion-row style=\\\"margin-top: 7px;\\\">\\n        <ion-col>\\n          \\n            <ion-select [(ngModel)]=\\\"invoice.customer\\\" placeholder=\\\"Select Customer\\\">\\n              <ion-select-option *ngFor=\\\"let cus of customerList\\\" [value]=\\\"cus\\\">{{cus.name}}</ion-select-option>\\n          </ion-select>\\n          \\n        \\n      </ion-col>\\n      </ion-row>\\n</ion-grid>\\n<ion-item-divider></ion-item-divider>\\n <ion-list >\\n  <ion-item  *ngFor= \\\"let item of invoice.invoiceItems\\\">\\n    <ion-grid>\\n      <ion-row style=\\\"color : white ; background-color: blueviolet;\\\">\\n        <ion-col size=\\\"3\\\">Select</ion-col>\\n        <ion-col size=4>Item</ion-col>\\n        <ion-col size=2>Price</ion-col>\\n        <ion-col size=\\\"2\\\">Qty</ion-col>\\n      </ion-row>\\n    <ion-row style=\\\"background-color: aliceblue;\\\">\\n        <ion-col size=\\\"3\\\">\\n          <ion-checkbox [(ngModel)]=\\\"item.selected\\\"> </ion-checkbox>\\n        </ion-col>\\n      <ion-col size=4>\\n        <ion-input [(ngModel)]=\\\"item.name\\\" disabled></ion-input>\\n      </ion-col>\\n      <ion-col size=\\\"2\\\">\\n        <ion-input [(ngModel)]=\\\"item.unitPrice\\\" ></ion-input>\\n      </ion-col>\\n      <!-- <ion-col>\\n        <ion-input placeholder=\\\"Billing Price\\\">{{item.billingUnitPrice}}</ion-input>        \\n      </ion-col> -->\\n      <ion-col size=\\\"2\\\">\\n        <ion-input [(ngModel)]=\\\"item.quantity\\\"></ion-input>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  </ion-item>  \\n </ion-list>\\n\\n<ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n        <ion-label color=\\\"primary\\\">Amount To Be Paid</ion-label>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-label >{{invoice.total}}</ion-label>\\n      </ion-col>\\n    </ion-row>  </ion-grid>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-button color=\\\"primary\\\" (click)=\\\"calculateInvoiceTotal()\\\">Calculate Total</ion-button>\\n        </ion-col>\\n        \\n        <ion-col>\\n          <ion-button color=\\\"primary\\\" (click)=\\\"submitBill()\\\">Submit</ion-button>\\n        </ion-col>\\n        \\n        <ion-col>\\n          <ion-button color=\\\"primary\\\" (click)=\\\"printBill()\\\">Print</ion-button>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}