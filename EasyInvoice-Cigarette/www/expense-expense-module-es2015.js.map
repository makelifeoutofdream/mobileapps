{"version":3,"sources":["./src/app/expense/expense-routing.module.ts","./src/app/expense/expense.page.scss","./src/app/expense/expense.module.ts","./src/app/expense/expense.page.ts","./src/app/expense/expense.page.html"],"names":[],"mappings":"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","file":"expense-expense-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ExpensePage } from './expense.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ExpensePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ExpensePageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJleHBlbnNlLnBhZ2Uuc2NzcyJ9 */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ExpensePageRoutingModule } from './expense-routing.module';\n\nimport { ExpensePage } from './expense.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ExpensePageRoutingModule\n  ],\n  declarations: [ExpensePage]\n})\nexport class ExpensePageModule {}\n","import { JsonPipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { NavigationExtras } from '@angular/router';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { DbService } from '../services/db.service';\nimport { Expense } from '../services/expense';\nimport { ToastserviceService } from '../services/toastservice.service';\n\n@Component({\n  selector: 'app-expense',\n  templateUrl: './expense.page.html',\n  styleUrls: ['./expense.page.scss'],\n})\nexport class ExpensePage implements OnInit {\n  private expenseList : Expense[];\n  private expense : Expense;\n  private startDate  : Date;\n  private endDate  : Date;\n  private filterExpenses  : Expense[];\n  private totalExpense : number;\n  constructor(private dbService : DbService,private toastService :ToastserviceService, public navCtrl:NavController,\n    public loadingController: LoadingController) { }\n\n  ngOnInit() {\n  }\n\n\n  ionViewWillEnter(){\n    this.startDate =new Date();\n    this.endDate=new Date();\n   \n  }\n\n  async getAllExpenses():Promise<any>{\n      this.dbService.getAllExpenses().then(data=>{\n        this.expenseList=data;\n      });\n  }\n\n async getTotalExpense():Promise<any>{\n  if (this.filterExpenses != null && this.filterExpenses != undefined && this.filterExpenses.length) {\n    return this.filterExpenses.map(itm => itm.amount).reduce((acc, nxt) => acc + nxt);\n  }\n }\n  addNewExpense(){\n    this.navCtrl.navigateRoot('newexpense');\n  }\n\n  async editExpense(id){\n    this.expense=this.expenseList.filter(a=>a.id==id)[0];\n    let navigationExtras : NavigationExtras ={\n          queryParams : {expense : this.expense}\n    };\n    console.log(\"selected expense\"+JSON.stringify(this.expense) );\n  this.navCtrl.navigateRoot('newexpense',navigationExtras);    \n  }\n\n  async filterExpense(): Promise<any> {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Please wait...',\n      duration: 300000,\n    });\n    \n    await loading.present();\n    this.getAllExpenses().then(data=>{\n      this.applyFilter().then(data=>{\n        this.getTotalExpense().then(data=>{\n          this.totalExpense=data;\n          loading.dismiss();\n          console.log('Loading dismissed!');\n        });\n      });\n    });\n      \n  }\n  async applyFilter(): Promise<any>{\n    var start = new Date(this.startDate);\n\n    var end = new Date(this.endDate);\n\n    if (this.startDate != null && this.startDate != undefined) {\n\n      start = new Date(start.getFullYear(), start.getMonth(), start.getDate());\n      start.setHours(0);\n      start.setMinutes(0);\n      start.setSeconds(0);\n    }\n    if (this.endDate != null && this.endDate != undefined) {\n      end = new Date(end.getFullYear(), end.getMonth(), end.getDate())\n      end.setHours(23);\n      end.setMinutes(23);\n      end.setSeconds(23);\n    }\n\n    if (this.startDate != null && this.startDate != undefined && (this.endDate == null || this.endDate == undefined)) {\n      this.filterExpenses = this.expenseList?.filter(inv =>  new Date(inv.date) >= start);\n    } else if (this.startDate != null && this.startDate != undefined && this.endDate != null && this.endDate != undefined) {\n      this.filterExpenses = this.expenseList?.filter(inv => {\n        var date = new Date(inv.date);\n        date.setHours(1);\n        date.setMinutes(1);\n        date.setSeconds(1);\n        return  date.getTime() >= start.getTime() && date.getTime() <= end.getTime();\n      });\n    } else if ((this.startDate == null || this.startDate == undefined) && this.endDate != null && this.endDate != undefined) {\n      this.filterExpenses = this.expenseList?.filter(inv => new Date(inv.date) <= end);\n    } \n    return this.filterExpenses;\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Expense</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button menu=\\\"mainmenu\\\"> \\n\\n        </ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-row>\\n    <ion-col size=\\\"4\\\" >\\n      <ion-item>\\n        <ion-datetime displayFormat=\\\"MMM DD YYYY\\\" [(ngModel)]=\\\"startDate\\\" placeholder=\\\"Start Date\\\"></ion-datetime>\\n      </ion-item>\\n    </ion-col>\\n  \\n    <ion-col size=\\\"4\\\">\\n      <ion-item>\\n        <ion-datetime displayFormat=\\\"MMM DD YYYY\\\" [(ngModel)]=\\\"endDate\\\" placeholder=\\\"End Date\\\"></ion-datetime>\\n      </ion-item>\\n    </ion-col>\\n    <ion-col  size=\\\"4\\\" style=\\\"text-align: right;\\\">\\n      <ion-button style=\\\"padding-right: 5%;float: right;\\\" (click)=\\\"filterExpense()\\\">\\n        <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>  \\n  </ion-row>\\n  \\n  <ion-list>\\n    <ion-list-header>\\n      <ion-col size=\\\"4\\\">Date</ion-col>\\n      <ion-col size=\\\"4\\\" style=\\\"text-align: center;\\\">Category</ion-col>\\n      <ion-col style=\\\"text-align: right;padding-right: 5%;\\\" size=\\\"4\\\">Amount</ion-col>\\n    </ion-list-header>\\n    <ion-item *ngFor= \\\"let exp of filterExpenses\\\" (click)=\\\"editExpense(exp.id)\\\">\\n      \\n        \\n        \\n          <ion-col size=\\\"4\\\">{{exp.date | date : short}}</ion-col>\\n          <ion-col size=\\\"4\\\" style=\\\"text-align: center;\\\">{{exp.category}}</ion-col>\\n          <ion-col style=\\\"text-align: right;\\\" size=\\\"4\\\">{{exp.amount}}</ion-col>\\n       \\n     \\n    </ion-item>\\n  </ion-list>    \\n\\n</ion-content>\\n<ion-content style=\\\"max-height: 10%;margin-top: 2%;\\\" slot=\\\"fixed\\\">\\n  <ion-badge style=\\\"float: right;margin-right: 1%;\\\" color=\\\"primary\\\">Total Expense : {{(totalExpense) | number : '1.2'}}</ion-badge>\\n</ion-content>\\n<ion-footer>\\n  \\n    \\n  <ion-row style=\\\"float:right\\\">\\n    <ion-col >\\n    <ion-button  color=\\\"primary\\\" (click)=\\\"addNewExpense()\\\">\\n      <ion-icon name=\\\"add-circle\\\"></ion-icon>\\n    </ion-button>\\n  </ion-col>\\n  </ion-row>\\n    \\n \\n\\n\\n</ion-footer>\";"],"sourceRoot":"webpack:///"}