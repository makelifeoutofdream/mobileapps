{"version":3,"sources":["webpack:///node_modules/sprintf-js/src/sprintf.js","webpack:///src/app/report/report.module.ts","webpack:///src/app/report/report-routing.module.ts","webpack:///src/app/report/report.page.scss","webpack:///src/app/report/report.page.html","webpack:///src/app/report/report.page.ts"],"names":["re","not_string","not_bool","not_type","not_primitive","number","numeric_arg","json","not_json","text","modulo","placeholder","key","key_access","index_access","sign","sprintf","sprintf_format","sprintf_parse","arguments","vsprintf","fmt","argv","apply","concat","parse_tree","cursor","tree_length","length","arg","output","i","k","ph","pad","pad_character","pad_length","is_positive","keys","undefined","Error","param_no","test","type","Function","isNaN","TypeError","parseInt","toString","String","fromCharCode","JSON","stringify","width","precision","parseFloat","toExponential","toFixed","Number","toPrecision","substring","Object","prototype","call","slice","toLowerCase","valueOf","toUpperCase","replace","pad_char","charAt","repeat","align","sprintf_cache","create","_fmt","match","arg_names","exec","push","field_list","replacement_field","field_match","SyntaxError","exports","window","ReportPageModule","imports","declarations","routes","path","component","ReportPageRoutingModule","forChild","ReportPage","dbService","toastService","printService","navCtrl","dataService","alertController","loadingController","totalProfit","cost","revenue","collection","customerList","navigateForward","getAllInvoices","then","data","invoiceList","filterInvoices","reason","presentToast","console","log","getAllCustomers","header","startDate","endDate","getProfile","profile","start","Date","end","getFullYear","getMonth","getDate","setHours","setMinutes","setSeconds","selectedCustomer","filterInvoiceList","filter","inv","customer","id","invoiceDate","date","getTime","cssClass","message","duration","loading","present","applyFilter","totalCost","totalRevenue","totalCollection","res","dismiss","invoices","map","itm","tax","reduce","acc","nxt","invoiceItemList","arr","elem","invoiceItems","quantity","purchasePrice","total","amtpaid","amountPaid","unitPrice","arrayField","Array","isArray","c","flatten","hasOwnProperty","invoiceDataList","it","invoiceData","InvoiceNumber","invoiceNumber","InvoiceDate","Customer","name","Item","UnitPrice","Quantity","Cost","purchaseUnitPrice","TotalCost","Tax","GP","TotalWithVAT","exportToExcel","invoice","navigationExtras","queryParams","navigateRoot","encoder","grossTax","totalTax","sum","val","grossTotal","today","datetime","getHours","getMinutes","getSeconds","result","initialize","bold","raw","line","companyName","newline","vatNumber","crNumber","vat","encode","sendToBluetoothPrinter","selectedPrinter","getFormatedContent","deleteInvoice","buttons","role","handler","blah","alert","selector","template"],"mappings":"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","file":"report-report-module-es5.js","sourcesContent":["/* global window, exports, define */\n\n!function() {\n    'use strict'\n\n    var re = {\n        not_string: /[^s]/,\n        not_bool: /[^t]/,\n        not_type: /[^T]/,\n        not_primitive: /[^v]/,\n        number: /[diefg]/,\n        numeric_arg: /[bcdiefguxX]/,\n        json: /[j]/,\n        not_json: /[^j]/,\n        text: /^[^\\x25]+/,\n        modulo: /^\\x25{2}/,\n        placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\n        key: /^([a-z_][a-z_\\d]*)/i,\n        key_access: /^\\.([a-z_][a-z_\\d]*)/i,\n        index_access: /^\\[(\\d+)\\]/,\n        sign: /^[+-]/\n    }\n\n    function sprintf(key) {\n        // `arguments` is not an array, but should be fine for this call\n        return sprintf_format(sprintf_parse(key), arguments)\n    }\n\n    function vsprintf(fmt, argv) {\n        return sprintf.apply(null, [fmt].concat(argv || []))\n    }\n\n    function sprintf_format(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, arg, output = '', i, k, ph, pad, pad_character, pad_length, is_positive, sign\n        for (i = 0; i < tree_length; i++) {\n            if (typeof parse_tree[i] === 'string') {\n                output += parse_tree[i]\n            }\n            else if (typeof parse_tree[i] === 'object') {\n                ph = parse_tree[i] // convenience purposes only\n                if (ph.keys) { // keyword argument\n                    arg = argv[cursor]\n                    for (k = 0; k < ph.keys.length; k++) {\n                        if (arg == undefined) {\n                            throw new Error(sprintf('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', ph.keys[k], ph.keys[k-1]))\n                        }\n                        arg = arg[ph.keys[k]]\n                    }\n                }\n                else if (ph.param_no) { // positional argument (explicit)\n                    arg = argv[ph.param_no]\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++]\n                }\n\n                if (re.not_type.test(ph.type) && re.not_primitive.test(ph.type) && arg instanceof Function) {\n                    arg = arg()\n                }\n\n                if (re.numeric_arg.test(ph.type) && (typeof arg !== 'number' && isNaN(arg))) {\n                    throw new TypeError(sprintf('[sprintf] expecting number but found %T', arg))\n                }\n\n                if (re.number.test(ph.type)) {\n                    is_positive = arg >= 0\n                }\n\n                switch (ph.type) {\n                    case 'b':\n                        arg = parseInt(arg, 10).toString(2)\n                        break\n                    case 'c':\n                        arg = String.fromCharCode(parseInt(arg, 10))\n                        break\n                    case 'd':\n                    case 'i':\n                        arg = parseInt(arg, 10)\n                        break\n                    case 'j':\n                        arg = JSON.stringify(arg, null, ph.width ? parseInt(ph.width) : 0)\n                        break\n                    case 'e':\n                        arg = ph.precision ? parseFloat(arg).toExponential(ph.precision) : parseFloat(arg).toExponential()\n                        break\n                    case 'f':\n                        arg = ph.precision ? parseFloat(arg).toFixed(ph.precision) : parseFloat(arg)\n                        break\n                    case 'g':\n                        arg = ph.precision ? String(Number(arg.toPrecision(ph.precision))) : parseFloat(arg)\n                        break\n                    case 'o':\n                        arg = (parseInt(arg, 10) >>> 0).toString(8)\n                        break\n                    case 's':\n                        arg = String(arg)\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 't':\n                        arg = String(!!arg)\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'T':\n                        arg = Object.prototype.toString.call(arg).slice(8, -1).toLowerCase()\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'u':\n                        arg = parseInt(arg, 10) >>> 0\n                        break\n                    case 'v':\n                        arg = arg.valueOf()\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'x':\n                        arg = (parseInt(arg, 10) >>> 0).toString(16)\n                        break\n                    case 'X':\n                        arg = (parseInt(arg, 10) >>> 0).toString(16).toUpperCase()\n                        break\n                }\n                if (re.json.test(ph.type)) {\n                    output += arg\n                }\n                else {\n                    if (re.number.test(ph.type) && (!is_positive || ph.sign)) {\n                        sign = is_positive ? '+' : '-'\n                        arg = arg.toString().replace(re.sign, '')\n                    }\n                    else {\n                        sign = ''\n                    }\n                    pad_character = ph.pad_char ? ph.pad_char === '0' ? '0' : ph.pad_char.charAt(1) : ' '\n                    pad_length = ph.width - (sign + arg).length\n                    pad = ph.width ? (pad_length > 0 ? pad_character.repeat(pad_length) : '') : ''\n                    output += ph.align ? sign + arg + pad : (pad_character === '0' ? sign + pad + arg : pad + sign + arg)\n                }\n            }\n        }\n        return output\n    }\n\n    var sprintf_cache = Object.create(null)\n\n    function sprintf_parse(fmt) {\n        if (sprintf_cache[fmt]) {\n            return sprintf_cache[fmt]\n        }\n\n        var _fmt = fmt, match, parse_tree = [], arg_names = 0\n        while (_fmt) {\n            if ((match = re.text.exec(_fmt)) !== null) {\n                parse_tree.push(match[0])\n            }\n            else if ((match = re.modulo.exec(_fmt)) !== null) {\n                parse_tree.push('%')\n            }\n            else if ((match = re.placeholder.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1\n                    var field_list = [], replacement_field = match[2], field_match = []\n                    if ((field_match = re.key.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1])\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1])\n                            }\n                            else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1])\n                            }\n                            else {\n                                throw new SyntaxError('[sprintf] failed to parse named argument key')\n                            }\n                        }\n                    }\n                    else {\n                        throw new SyntaxError('[sprintf] failed to parse named argument key')\n                    }\n                    match[2] = field_list\n                }\n                else {\n                    arg_names |= 2\n                }\n                if (arg_names === 3) {\n                    throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported')\n                }\n\n                parse_tree.push(\n                    {\n                        placeholder: match[0],\n                        param_no:    match[1],\n                        keys:        match[2],\n                        sign:        match[3],\n                        pad_char:    match[4],\n                        align:       match[5],\n                        width:       match[6],\n                        precision:   match[7],\n                        type:        match[8]\n                    }\n                )\n            }\n            else {\n                throw new SyntaxError('[sprintf] unexpected placeholder')\n            }\n            _fmt = _fmt.substring(match[0].length)\n        }\n        return sprintf_cache[fmt] = parse_tree\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    /* eslint-disable quote-props */\n    if (typeof exports !== 'undefined') {\n        exports['sprintf'] = sprintf\n        exports['vsprintf'] = vsprintf\n    }\n    if (typeof window !== 'undefined') {\n        window['sprintf'] = sprintf\n        window['vsprintf'] = vsprintf\n\n        if (typeof define === 'function' && define['amd']) {\n            define(function() {\n                return {\n                    'sprintf': sprintf,\n                    'vsprintf': vsprintf\n                }\n            })\n        }\n    }\n    /* eslint-enable quote-props */\n}(); // eslint-disable-line\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReportPageRoutingModule } from './report-routing.module';\n\nimport { ReportPage } from './report.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReportPageRoutingModule\n  ],\n  declarations: [ReportPage]\n})\nexport class ReportPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReportPage } from './report.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReportPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReportPageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZXBvcnQucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Report</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button menu=\\\"mainmenu\\\"> \\n\\n        </ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-row>\\n    <ion-item style=\\\"width: 95%;\\\" >\\n      <ion-col size=\\\"12\\\">\\n      <ion-select style=\\\"margin-top: 2%;height: 30px;margin-right: 4%; width: 95%;  max-width: 95% !important;\\\"  [(ngModel)]=\\\"selectedCustomer\\\" placeholder=\\\"Customer\\\">\\n      <ion-select-option [value]=null>All</ion-select-option>\\n        <ion-select-option style=\\\"width: 95%;\\\" *ngFor=\\\"let cus of customerList\\\" [value]=\\\"cus\\\">{{cus.name}}</ion-select-option>\\n      </ion-select>\\n    </ion-col>\\n    </ion-item>\\n  </ion-row>\\n  <ion-row>\\n    \\n    <ion-col size=\\\"4\\\" >\\n      <ion-item>\\n        <ion-datetime displayFormat=\\\"MMM DD YYYY\\\" [(ngModel)]=\\\"startDate\\\" placeholder=\\\"Start Date\\\"></ion-datetime>\\n      </ion-item>\\n    </ion-col>\\n\\n    <ion-col size=\\\"4\\\">\\n      <ion-item>\\n        <ion-datetime displayFormat=\\\"MMM DD YYYY\\\" [(ngModel)]=\\\"endDate\\\" placeholder=\\\"End Date\\\"></ion-datetime>\\n      </ion-item>\\n    </ion-col>\\n    <ion-col  size=\\\"4\\\" style=\\\"text-align: right;\\\">\\n      <ion-button style=\\\"padding-right: 5%;float: right;\\\" (click)=\\\"filterInvoices()\\\">\\n        <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n  <ion-row style=\\\"float:right\\\">\\n    \\n  </ion-row>\\n  <ion-item-divider></ion-item-divider>\\n  \\n  <ion-list>\\n    <ion-list-header>\\n      <ion-col size=\\\"3\\\">Date</ion-col>\\n      <ion-col size=\\\"3\\\" style=\\\"text-align: center;\\\">Customer</ion-col>\\n      <ion-col style=\\\"text-align: right;padding-right: 5%;\\\" size=\\\"4\\\">Total</ion-col>\\n      <ion-col size=\\\"2\\\">Delete</ion-col>\\n    </ion-list-header>\\n    <ion-item *ngFor= \\\"let inv of filterInvoiceList\\\" >\\n      \\n        \\n        \\n          <ion-col size=\\\"3\\\" (click)=\\\"viewInvoice(inv)\\\">{{inv.invoiceDate | date : short}}</ion-col>\\n          <ion-col size=\\\"3\\\" style=\\\"text-align: center;\\\" (click)=\\\"viewInvoice(inv)\\\">{{inv.customer.name}}</ion-col>\\n          <ion-col style=\\\"text-align: right;\\\" size=\\\"4\\\" (click)=\\\"viewInvoice(inv)\\\">{{inv.total}}</ion-col>\\n          <ion-col size=\\\"2\\\"  style=\\\"float: right;\\\" >\\n          <ion-button style=\\\"margin-left: 3%;\\\"  (click)=\\\"presentDeleteAlertConfirm(inv)\\\">\\n            <ion-icon style=\\\"text-align: right;\\\" name=\\\"trash-bin\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n    </ion-item>\\n  </ion-list>    \\n\\n</ion-content>\\n<ion-content  style=\\\"max-height: 10%;margin-top: 2%;\\\" slot=\\\"fixed\\\">\\n  <div class=\\\"display-flex  full-width\\\">\\n    <ion-badge style=\\\"margin-left: 1%;width: 50%;\\\" color=\\\"primary\\\">Total Cost : {{cost | number : '1.2'}}</ion-badge>\\n    <ion-badge style=\\\"margin-left: 1%;width:44%\\\" color=\\\"primary\\\">Total Revenue : {{revenue | number : '1.2'}}</ion-badge>\\n    \\n  </div>\\n  <div class=\\\"display-flex  full-width\\\">\\n    \\n    <ion-badge style=\\\"margin-left: 1%;width: 50%;\\\" color=\\\"primary\\\">Total Profit : {{(totalProfit) | number : '1.2'}}</ion-badge>\\n    <ion-badge style=\\\"margin-left: 1%;width: 44% ;\\\" color=\\\"primary\\\">Total Collection : {{collection }}</ion-badge>\\n  </div>\\n\\n</ion-content>\\n<ion-footer>\\n  \\n    \\n      <ion-row style=\\\"float: right;\\\">\\n        <ion-col style=\\\"float: right;\\\">\\n          <ion-button ion-button  color=\\\"primary\\\" (click)=\\\"download()\\\">\\n            <ion-icon name=\\\"mail\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n        <ion-col>\\n          <ion-button color=\\\"primary\\\" (click)=\\\"printBill()\\\">\\n            <ion-icon name=\\\"print\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n        \\n    \\n  \\n  \\n</ion-footer>\";","import { Component, OnInit } from '@angular/core';\nimport { NavigationExtras } from '@angular/router';\nimport { AlertController, LoadingController, NavController } from '@ionic/angular';\nimport { stat } from 'fs';\nimport { start } from 'repl';\nimport { filter } from 'rxjs/operators';\nimport { DataService } from '../data.service';\nimport { Customer } from '../services/customer';\nimport { DbService } from '../services/db.service';\nimport { Inventory } from '../services/inventory';\nimport { Invoice } from '../services/invoice';\nimport { ToastserviceService } from '../services/toastservice.service';\nimport EscPosEncoder from 'esc-pos-encoder-ionic';\nimport { Profile } from '../services/profile';\nimport { sprintf } from \"sprintf-js\";\nimport { PrintService } from '../services/print.service';\nimport { InvoiceItem } from '../services/invoiceitem';\nimport { promise } from 'protractor';\n@Component({\n  selector: 'app-report',\n  templateUrl: './report.page.html',\n  styleUrls: ['./report.page.scss'],\n})\nexport class ReportPage implements OnInit {\n  selectedCustomer: Customer;\n  startDate: Date;\n  endDate: Date;\n  invoiceList: Invoice[];\n  filterInvoiceList: Invoice[];\n  customerList: Customer[];\n  header: string[];\n  private profile: Profile;\n  private totalProfit: number = 0;\n  private cost: number = 0;\n  private revenue: number = 0;\n  private collection: number = 0;\n  constructor(public dbService: DbService, public toastService: ToastserviceService, private printService: PrintService,\n    public navCtrl: NavController, private dataService: DataService,public alertController: AlertController,\n    public loadingController: LoadingController) { }\n\n  ngOnInit() {\n    this.customerList = [];\n  }\n\n\n\n  addNewInvoice() {\n\n    this.navCtrl.navigateForward('newinvoice');\n  }\n\n  getAllInvoices() {\n    this.dbService.getAllInvoices().then(data => {\n      this.invoiceList = data;\n      this.filterInvoices();\n    }).catch(reason => {\n      this.toastService.presentToast(\"Failed to fetch invoices\");\n      console.log(reason);\n    })\n  }\n  getAllCustomers() {\n    this.dbService.getAllCustomers().then(data => this.customerList = data);\n  }\n  ionViewWillEnter() {\n    this.header = [];\n    this.header.push('Inv No');\n    this.header.push('Customer');\n    this.header.push('Total');\n    this.startDate = null;\n    this.endDate = null;\n    this.getAllInvoices();\n    this.getAllCustomers();\n    this.dbService.getProfile().then(data => {\n      this.profile = data;\n    });\n\n  }\n\n  async applyFilter(): Promise<any>{\n    var start = new Date(this.startDate);\n\n    var end = new Date(this.endDate);\n\n    if (this.startDate != null && this.startDate != undefined) {\n\n      start = new Date(start.getFullYear(), start.getMonth(), start.getDate());\n      start.setHours(0);\n      start.setMinutes(0);\n      start.setSeconds(0);\n    }\n    if (this.endDate != null && this.endDate != undefined) {\n      end = new Date(end.getFullYear(), end.getMonth(), end.getDate())\n      end.setHours(23);\n      end.setMinutes(23);\n      end.setSeconds(23);\n    }\n\n    if (this.selectedCustomer != null && this.selectedCustomer != undefined && (this.startDate == null || this.startDate == undefined) && (this.endDate == null || this.endDate == undefined)) {\n      this.filterInvoiceList = this.invoiceList.filter(inv => inv.customer.id == this.selectedCustomer.id);\n    } else if (this.selectedCustomer != null && this.selectedCustomer != undefined && this.startDate != null && this.startDate != undefined && (this.endDate == null || this.endDate == undefined)) {\n      this.filterInvoiceList = this.invoiceList.filter(inv => inv.customer.id == this.selectedCustomer.id && new Date(inv.invoiceDate) >= start);\n    } else if (this.selectedCustomer != null && this.selectedCustomer != undefined && this.startDate != null && this.startDate != undefined && this.endDate != null && this.endDate != undefined) {\n      this.filterInvoiceList = this.invoiceList.filter(inv => {\n        var date = new Date(inv.invoiceDate);\n        date.setHours(1);\n        date.setMinutes(1);\n        date.setSeconds(1);\n        return inv.customer.id == this.selectedCustomer.id && date.getTime() >= start.getTime() && date.getTime() <= end.getTime();\n      });\n    } else if ((this.selectedCustomer == null || this.selectedCustomer == undefined) && this.startDate != null && this.startDate != undefined && this.endDate != null && this.endDate != undefined) {\n      this.filterInvoiceList = this.invoiceList.filter(inv => {\n        var date = new Date(inv.invoiceDate);\n        date.setHours(1);\n        date.setMinutes(1);\n        date.setSeconds(1);\n        console.log('date ' + date.getTime());\n        console.log('start ' + start.getTime());\n        console.log('end ' + end.getTime());\n        return date.getTime() >= start.getTime() && date.getTime() <= end.getTime();\n      })\n    } else if ((this.selectedCustomer == null || this.selectedCustomer == undefined) && this.startDate != null && this.startDate != undefined && (this.endDate == null || this.endDate == undefined)) {\n      this.filterInvoiceList = this.invoiceList.filter(inv => new Date(inv.invoiceDate) >= start);\n    } else if ((this.selectedCustomer == null || this.selectedCustomer == undefined) && (this.startDate == null || this.startDate == undefined) && this.endDate != null && this.endDate != undefined) {\n      this.filterInvoiceList = this.invoiceList.filter(inv => new Date(inv.invoiceDate) <= end);\n    } else {\n      this.filterInvoiceList = this.invoiceList;\n    }\n\n    return this.filterInvoiceList;\n  }\n  async filterInvoices(): Promise<any> {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Please wait...',\n      duration: 300000,\n    });\n    \n    await loading.present();\n    this.applyFilter().then(data=>{\n      this.totalCost().then(data=>{\n        this.cost=data;\n        this.totalRevenue().then(data=>{\n            this.revenue=data;\n          this.totalCollection().then(res=>{\n              this.collection=res;\n              this.totalProfit=this.revenue-this.cost;\n             loading.dismiss();\n            console.log('Loading dismissed!');\n          })\n        })    \n      })\n    })\n  }\n\n  async totalTax(invoices: any[]): Promise<number> {\n    if (this.filterInvoiceList != null && this.filterInvoiceList != undefined && this.filterInvoiceList.length) {\n      return this.filterInvoiceList.map(itm => itm.tax).reduce((acc, nxt) => acc + nxt);\n    }\n  }\n\n  async totalCost(): Promise<number> {\n    if (this.filterInvoiceList != null && this.filterInvoiceList != undefined && this.filterInvoiceList.length) {\n\n      let invoiceItemList: any[] = this.filterInvoiceList.reduce((arr, elem) => arr.concat(elem.invoiceItems), [])\n      return invoiceItemList.map(itm => {\n        if (itm.quantity != null && itm.quantity != undefined && itm.purchasePrice != null && itm.purchasePrice != undefined)\n          return (itm.quantity * itm.purchasePrice)\n      }).reduce((acc, nxt) => acc + nxt);\n      return this.cost;\n    }\n  }\n  async sum(invoices: any[]): Promise<number> {\n    if (this.filterInvoiceList != null && this.filterInvoiceList != undefined && this.filterInvoiceList.length) {\n      return this.filterInvoiceList.map(itm => itm.total).reduce((acc, nxt) => acc + nxt);\n    }\n\n  }\n\n  async totalCollection(): Promise<number> {\n    if (this.filterInvoiceList != null && this.filterInvoiceList != undefined && this.filterInvoiceList.length) {\n      var amtpaid = 0;\n      for (let i of this.filterInvoiceList) {\n        if (typeof i.amountPaid === 'string') {\n          amtpaid = amtpaid + Number.parseFloat(i.amountPaid);\n        } else {\n          amtpaid = amtpaid + i.amountPaid;\n        }\n      }\n      return amtpaid;\n      /*return this.filterInvoiceList.map(itm=>{\n        if(itm.amountPaid!=null && itm.amountPaid!=undefined && !Number.isNaN(itm.amountPaid) ){\n          \n          if(typeof itm.amountPaid ==='string') {\n            console.log(Number.parseFloat(itm.amountPaid))\n            return Number.parseFloat(itm.amountPaid);\n          }else{\n            return itm.amountPaid;\n          }\n        }\n        \n      \n      }).reduce((acc, nxt) => acc + nxt);*/\n    }\n\n  }\n\n  async totalRevenue(): Promise<number> {\n    if (this.filterInvoiceList != null && this.filterInvoiceList != undefined && this.filterInvoiceList.length) {\n\n      let invoiceItemList: InvoiceItem[] = this.filterInvoiceList.reduce((arr, elem) => arr.concat(elem.invoiceItems), [])\n      return invoiceItemList.map(itm => {\n        if (itm.quantity != null && itm.quantity != undefined && itm.unitPrice != null && itm.unitPrice != undefined)\n          return (itm.quantity * itm.unitPrice)\n      }).reduce((acc, nxt) => acc + nxt);\n      return this.revenue;\n    }\n  }\n  flatten(i, arrayField) {\n    if (Array.isArray(i)) return i.map(c => this.flatten(c, arrayField));\n    if (i.hasOwnProperty(arrayField)) return [{ ...i, [arrayField]: null }, ...i[arrayField].map(c => this.flatten(c, arrayField))];\n    return { ...i, [arrayField]: null };\n  }\n  download() {\n    let invoiceDataList = new Array();\n    for (let inv of this.invoiceList) {\n      for (let it of inv.invoiceItems) {\n        let itm : any=it;\n        let invoiceData = { InvoiceNumber: inv.invoiceNumber, InvoiceDate: inv.invoiceDate, Customer: inv.customer.name, Item: itm.name, UnitPrice: itm.unitPrice, Quantity: itm.quantity, Cost: itm.purchaseUnitPrice, TotalCost: itm.purchasePrice * itm.quantity, Tax: inv.tax, GP: (itm.quantity * itm.unitPrice) - (itm.purchasePrice * itm.quantity), TotalWithVAT: inv.total };\n        invoiceDataList.push(invoiceData);\n      }\n\n    }\n    // this.dataService.downloadCcSV(this.invoiceList,'invoices.csv');\n    this.dataService.exportToExcel(invoiceDataList, 'invoices.xlsx');\n\n\n  }\n\n  viewInvoice(invoice: Invoice) {\n    let navigationExtras: NavigationExtras = {\n      queryParams: { invoice: invoice }\n    };\n    console.log(\"selected invoice\" + invoice.invoiceNumber);\n    this.navCtrl.navigateRoot('viewinvoice', navigationExtras);\n  }\n\n\n  getFormatedContent() {\n    const encoder = new EscPosEncoder();\n\n    let grossTax: number = 0;\n    let total: number = 0;\n    this.totalTax(this.filterInvoiceList).then(data => {\n      grossTax = data;\n      this.sum(this.filterInvoiceList).then(val => {\n        total = val;\n        let grossTotal = total - grossTax;\n        var today = new Date();\n        let datetime: string = today.getDate() + '-' + today.getMonth() + '-' + today.getFullYear() + ' ' + today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\n        let result = encoder.initialize().bold(true).raw([0x1B, 0x21, 0x20]).align('center').line(this.profile.companyName).bold(true).newline().\n          raw([0x1B, 0x21, 0x03]).align('left').bold(true).line('VAT # : ' + this.profile.vatNumber + ',' + 'CR # : ' + this.profile.crNumber).\n          align('left').bold(true).line('---------------------------------------------------------------').bold(true).\n          align('left').line('Print Generated At :' + datetime).\n          align('left').line('Date Range : ' + this.startDate + 'To ' + this.endDate).\n          align('left').bold(true).line('---------------------------------------------------------------').bold(true).\n          align('left').line('Gross Total(Excl.VAT) ' + sprintf('%11.2f', grossTotal)).\n          align('left').line('Total VAT(' + this.profile.vat + ') ' + sprintf('%11.2f', grossTax)).\n          align('left').line('Total ' + sprintf('%11.2f', total)).\n          align('left').bold(true).line('---------------------------------------------------------------').bold(true).encode();\n\n        return result;\n      });\n    })\n\n\n  }\n\n  printBill() {\n    try {\n      this.printService.sendToBluetoothPrinter(this.profile.selectedPrinter, this.getFormatedContent());\n\n    } catch (reason) {\n      this.toastService.presentToast(\"Print Failed\" + reason)\n    }\n\n  }\n  showReportsHome() {\n    this.navCtrl.navigateRoot('reporthome');\n  }\n\n  deleteInvoice(inv){\n    this.dbService.deleteInvoice(inv).then(data=>{\n      this.toastService.presentToast('Invoice removed successfully');\n      this.getAllInvoices();\n  });\n}\n\nasync presentDeleteAlertConfirm(inv : Invoice) {\n  const alert = await this.alertController.create({\n   // cssClass: 'my-custom-class',\n    header: 'Confirm!',\n    message: '<strong>Are you sure to delete this invoice?</strong>!!!',\n    buttons: [\n      {\n        text: 'No',\n        role: 'cancel',\n        cssClass: 'secondary',\n        handler: (blah) => {\n          console.log('Confirm Cancel');\n        }\n      }, {\n        text: 'Yes',\n        handler: () => {\n          this.deleteInvoice(inv);\n        }\n      }\n    ]\n  });\n\n  await alert.present();\n}\n}\n"]}