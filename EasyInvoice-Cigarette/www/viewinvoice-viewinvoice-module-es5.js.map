{"version":3,"sources":["webpack:///src/app/viewinvoice/viewinvoice.module.ts","webpack:///src/app/viewinvoice/viewinvoice.page.scss","webpack:///src/app/viewinvoice/viewinvoice.page.html","webpack:///src/app/viewinvoice/viewinvoice.page.ts","webpack:///src/app/viewinvoice/viewinvoice-routing.module.ts"],"names":["ViewinvoicePageModule","imports","declarations","ViewinvoicePage","route","datePipe","printService","dbService","navCtrl","modalController","invoice","id","invoiceNumber","invoiceDate","total","tax","amountPaid","balanceAmount","customer","code","name","itemList","nameInArabic","contactPersonName","contactPersonNameInArabic","buildingNumber","street","streetInArabic","city","cityInArabic","district","districtInArabic","country","countryInArabic","pobox","postalCode","phoneNumber","mobile","email","vatNumber","crNumber","creditLimit","balance","invoiceItems","invoiceDateString","getProfile","then","data","profile","queryParams","subscribe","params","transform","Date","console","log","printPreview","create","component","componentProps","products","modal","present","navigateRoot","encoder","result","datetime","toISOString","substr","replace","billDetails","initialize","bold","raw","align","line","companyName","newline","text","counter","totalQuantity","itemDetails","itm","quantity","temp","unitPrice","footer","vat","encode","selector","template","routes","path","ViewinvoicePageRoutingModule","forChild","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAoBaA,qBAAqB;AAAA;AAAA,O;;AAArBA,2BAAqB,6DAVjC,+DAAS;AACRC,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,sEAJO,EAKP,wFALO,CADD;AAQRC,oBAAY,EAAE,CAAC,iEAAD;AARN,OAAT,CAUiC,GAArBF,qBAAqB,CAArB;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCkBFG,eAAe;AAG1B,iCAAoBC,KAApB,EAAmDC,QAAnD,EAA6EC,YAA7E,EACUC,SADV,EACuCC,OADvC,EACoEC,eADpE,EACsG;AAAA;;AADlF,eAAAL,KAAA,GAAAA,KAAA;AAA+B,eAAAC,QAAA,GAAAA,QAAA;AAA0B,eAAAC,YAAA,GAAAA,YAAA;AACnE,eAAAC,SAAA,GAAAA,SAAA;AAA6B,eAAAC,OAAA,GAAAA,OAAA;AAA6B,eAAAC,eAAA,GAAAA,eAAA;AAAqC;;AAJ/E;AAAA;AAAA,iBAM1B,oBAAW;AACT,iBAAKC,OAAL,GAAa;AAACC,gBAAE,EAAC,IAAJ;AAASC,2BAAa,EAAC,IAAvB;AAA4BC,yBAAW,EAAC,IAAxC;AAA6CC,mBAAK,EAAC,IAAnD;AAAwDC,iBAAG,EAAC,IAA5D;AAAiEC,wBAAU,EAAC,IAA5E;AAAiFC,2BAAa,EAAC,IAA/F;AAAoGC,sBAAQ,EAAG;AAACP,kBAAE,EAAC,IAAJ;AAASQ,oBAAI,EAAC,IAAd;AAAmBC,oBAAI,EAAG,EAA1B;AAA8BC,wBAAQ,EAAG,IAAzC;AAA8CC,4BAAY,EAAG,EAA7D;AAAgEC,iCAAiB,EAAE,EAAnF;AAAsFC,yCAAyB,EAAC,EAAhH;AAC5HC,8BAAc,EAAC,EAD6G;AAC1GC,sBAAM,EAAC,EADmG;AAChGC,8BAAc,EAAC,EADiF;AAC9EC,oBAAI,EAAC,EADyE;AACtEC,4BAAY,EAAC,EADyD;AACtDC,wBAAQ,EAAC,EAD6C;AAC1CC,gCAAgB,EAAC,EADyB;AACtBC,uBAAO,EAAC,EADc;AACXC,+BAAe,EAAC,EADL;AAE5HC,qBAAK,EAAC,EAFsH;AAEnHC,0BAAU,EAAC,EAFwG;AAErGC,2BAAW,EAAC,EAFyF;AAEtFC,sBAAM,EAAC,EAF+E;AAE5EC,qBAAK,EAAC,EAFsE;AAEnEC,yBAAS,EAAC,EAFyD;AAEtDC,wBAAQ,EAAC,EAF6C;AAE1CC,2BAAW,EAAC,IAF8B;AAEzBC,uBAAO,EAAC;AAFiB,eAA/G;AAEoGC,0BAAY,EAAC,EAFjH;AAEoHC,+BAAiB,EAAC;AAFtI,aAAb;AAGD;AAVyB;AAAA;AAAA,iBAa1B,4BAAgB;AAAA;;AACd,iBAAKrC,SAAL,CAAesC,UAAf,GAA4BC,IAA5B,CAAiC,UAAAC,IAAI,EAAE;AACrC,mBAAI,CAACC,OAAL,GAAaD,IAAb;AACD,aAFD;AAIA,iBAAK3C,KAAL,CAAW6C,WAAX,CAAuBC,SAAvB,CAAiC,UAAAC,MAAM,EAAE;AACvC,mBAAI,CAACzC,OAAL,GAAayC,MAAM,CAAC,SAAD,CAAnB;AACD,aAFD;AAGA,iBAAKzC,OAAL,CAAakC,iBAAb,GAA+B,KAAKvC,QAAL,CAAc+C,SAAd,CAAwB,IAAIC,IAAJ,CAAU,KAAK3C,OAAL,CAAaG,WAAvB,CAAxB,EAA4D,qBAA5D,CAA/B;AACAyC,mBAAO,CAACC,GAAR,CAAY,qBAAmB,KAAK7C,OAAL,CAAaE,aAA5C;AACA0C,mBAAO,CAACC,GAAR,CAAY,8BAA4B,KAAK7C,OAAL,CAAaQ,QAArD;AACD;AAxByB;AAAA;AAAA,iBAyB1B,qBAAS;AAEP,iBAAKsC,YAAL;AAED;AA7ByB;AAAA;AAAA,iBA+BpB,wBAAe;;;;;;;;AACP,6BAAM,KAAK/C,eAAL,CAAqBgD,MAArB,CAA4B;AAC5CC,iCAAS,EAAC,wGADkC;AAE5CC,sCAAc,EAAG;AACfX,iCAAO,EAAE,KAAKA,OADC;AAEftC,iCAAO,EAAE,KAAKA,OAFC;AAGfkD,kCAAQ,EAAG,KAAKlD,OAAL,CAAaiC;AAHT;AAF2B,uBAA5B,CAAN;;;AAARkB,2B;AAQJA,2BAAK,CAACC,OAAN;;;;;;;;;AACD;AAzCyB;AAAA;AAAA,iBA4C1B,sBAAU;AACR,iBAAKtD,OAAL,CAAauD,YAAb,CAA0B,QAA1B;AACD;AA9CyB;AAAA;AAAA,iBAgD1B,8BAAkB;AAChB,gBAAMC,OAAO,GAAG,IAAI,4DAAJ,EAAhB;AACA,gBAAIC,MAAM,GAAC,EAAX;AACA,gBAAIC,QAAQ,GAAS,IAAIb,IAAJ,CAAS,KAAK3C,OAAL,CAAaG,WAAtB,EAAmCsD,WAAnC,GAAiDC,MAAjD,CAAwD,CAAxD,EAA2D,EAA3D,EAA+DC,OAA/D,CAAuE,GAAvE,EAA4E,GAA5E,CAArB;AACA,gBAAIC,WAAW,GAACN,OAAO,CAACO,UAAR,GAAqBC,IAArB,CAA0B,IAA1B,EAAgCC,GAAhC,CAAoC,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAApC,EAAwDC,KAAxD,CAA8D,QAA9D,EAAwEC,IAAxE,CAA6E,KAAK3B,OAAL,CAAa4B,WAA1F,EAAuGJ,IAAvG,CAA4G,IAA5G,EAAkHK,OAAlH,GAChBJ,GADgB,CACZ,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CADY,EACQC,KADR,CACc,MADd,EACsBF,IADtB,CAC2B,IAD3B,EACiCG,IADjC,CACsC,aAAY,KAAK3B,OAAL,CAAaT,SAAzB,GAAmC,GAAnC,GAAuC,SAAvC,GAAiD,KAAKS,OAAL,CAAaR,QADpG,EAEhBkC,KAFgB,CAEV,MAFU,EAEFF,IAFE,CAEG,IAFH,EAESG,IAFT,CAEc,iEAFd,EAEiFH,IAFjF,CAEsF,IAFtF,EAGhBC,GAHgB,CAGZ,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAHY,EAGQC,KAHR,CAGc,QAHd,EAGwBF,IAHxB,CAG6B,IAH7B,EAGmCG,IAHnC,CAGwC,aAHxC,EAGuDH,IAHvD,CAG4D,IAH5D,EAIhBC,GAJgB,CAIZ,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAJY,EAIQC,KAJR,CAIc,MAJd,EAIsBI,IAJtB,CAI2B,KAAKpE,OAAL,CAAaE,aAAb,GAA2B,cAA3B,GAA2CsD,QAJtE,EAIgFW,OAJhF,GAKhBH,KALgB,CAKV,MALU,EAKFF,IALE,CAKG,IALH,EAKSG,IALT,CAKc,iEALd,EAKiFH,IALjF,CAKsF,IALtF,EAMhBE,KANgB,CAMV,MANU,EAMFF,IANE,CAMG,IANH,EAMSG,IANT,CAMc,SANd,EAOhBD,KAPgB,CAOV,MAPU,EAOFF,IAPE,CAOG,IAPH,EAOSG,IAPT,CAOc,iEAPd,EAOiFH,IAPjF,CAOsF,IAPtF,EAQhBE,KARgB,CAQV,MARU,EAQFC,IARE,CAQG,KAAKjE,OAAL,CAAaQ,QAAb,CAAsBE,IARzB,EAShBsD,KATgB,CASV,MATU,EASFC,IATE,CASG,KAAKjE,OAAL,CAAaQ,QAAb,CAAsBQ,MAAtB,GAA6B,GAA7B,GAAiC,KAAKhB,OAAL,CAAaQ,QAAb,CAAsBU,IAAvD,GAA4D,GAA5D,GAAgE,KAAKlB,OAAL,CAAaQ,QAAb,CAAsBY,QATzF,EAUhB4C,KAVgB,CAUV,MAVU,EAUFC,IAVE,CAUG,YAAU,KAAKjE,OAAL,CAAaQ,QAAb,CAAsBqB,SAAhC,GAA0C,SAA1C,GAAoD,KAAK7B,OAAL,CAAaQ,QAAb,CAAsBsB,QAV7E,EAWhBkC,KAXgB,CAWV,MAXU,EAWFC,IAXE,CAWG,UAAQ,KAAKjE,OAAL,CAAaQ,QAAb,CAAsBmB,MAXjC,EAYhBqC,KAZgB,CAYV,MAZU,EAYFF,IAZE,CAYG,IAZH,EAYSG,IAZT,CAYc,iEAZd,EAahBD,KAbgB,CAaV,MAbU,EAaFC,IAbE,CAaG,2DAAQ,0BAAR,EAAmC,GAAnC,EAAwC,MAAxC,EAAgD,KAAhD,EAAsD,MAAtD,EAA8D,QAA9D,CAbH,EAa4EH,IAb5E,CAaiF,IAbjF,EAchBE,KAdgB,CAcV,MAdU,EAcFF,IAdE,CAcG,IAdH,EAcSG,IAdT,CAcc,iEAdd,CAAhB;AAeA,gBAAII,OAAO,GAAQ,CAAnB;AACA,gBAAIC,aAAa,GAAC,CAAlB;AACA,gBAAIC,WAAW,GAAC,EAAhB;;AArBgB,uDAsBD,KAAKvE,OAAL,CAAaiC,YAtBZ;AAAA;;AAAA;AAsBhB,kEAAyC;AAAA,oBAAjCuC,GAAiC;AACvCF,6BAAa,IAAEE,GAAG,CAACC,QAAnB;AACA,oBAAIC,IAAI,GAACpB,OAAO,CAACO,UAAR,GACTG,KADS,CACH,MADG,EACKC,IADL,CACU,2DAAQ,iCAAR,EAA0CI,OAA1C,EAAmDG,GAAG,CAAC9D,IAAvD,EAA6D8D,GAAG,CAACC,QAAjE,EAA0ED,GAAG,CAACG,SAA9E,EAAyFH,GAAG,CAACG,SAAJ,GAAcH,GAAG,CAACC,QAA3G,CADV,CAAT;AAEAF,2BAAW,IAAEG,IAAb;AACAL,uBAAO,GAACA,OAAO,GAAC,CAAhB;AACD;AA5Be;AAAA;AAAA;AAAA;AAAA;;AA8BhB,gBAAIO,MAAM,GAACtB,OAAO,CAACO,UAAR,GAAsBG,KAAtB,CAA4B,MAA5B,EAAoCF,IAApC,CAAyC,IAAzC,EAA+CG,IAA/C,CAAoD,kDAApD,EAAwGH,IAAxG,CAA6G,IAA7G,EACXC,GADW,CACP,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CADO,EACaC,KADb,CACmB,MADnB,EAC2BC,IAD3B,CACgC,WAASK,aADzC,EAEXN,KAFW,CAEL,OAFK,EAEIC,IAFJ,CAES,sCAAsC,2DAAQ,QAAR,EAAkB,KAAKjE,OAAL,CAAaI,KAAb,GAAmB,KAAKJ,OAAL,CAAaK,GAAlD,CAF/C,EAGX2D,KAHW,CAGL,OAHK,EAGIC,IAHJ,CAGS,wBAAsB,KAAK3B,OAAL,CAAauC,GAAnC,GAAuC,OAAvC,GAA+C,2DAAQ,QAAR,EAAiB,KAAK7E,OAAL,CAAaK,GAA9B,CAHxD,EAIX2D,KAJW,CAIL,OAJK,EAIIC,IAJJ,CAIS,2BAAyB,2DAAQ,QAAR,EAAiB,KAAKjE,OAAL,CAAaI,KAA9B,CAJlC,EAKX4D,KALW,CAKL,MALK,EAKGF,IALH,CAKQ,IALR,EAKcG,IALd,CAKmB,kDALnB,EAKuEH,IALvE,CAK4E,IAL5E,EAMXE,KANW,CAML,OANK,EAMIC,IANJ,CAMS,wBAAuB,2DAAQ,OAAR,EAAiB,KAAKjE,OAAL,CAAaO,aAAb,GAA2B,KAAKP,OAAL,CAAaM,UAAzD,CANhC,EAOX0D,KAPW,CAOL,OAPK,EAOIC,IAPJ,CAOS,mBAAiB,2DAAQ,OAAR,EAAgB,KAAKjE,OAAL,CAAaM,UAA7B,CAP1B,EAQXyD,GARW,CAQP,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CARO,EAQaC,KARb,CAQmB,MARnB,EAQ2BC,IAR3B,CAQgC,sBAAoB,2DAAQ,OAAR,EAAgB,KAAKjE,OAAL,CAAaO,aAA7B,CARpD,EASXyD,KATW,CASL,MATK,EASGF,IATH,CASQ,IATR,EAScG,IATd,CASmB,kDATnB,EASuEH,IATvE,CAS4E,IAT5E,EAUXE,KAVW,CAUL,QAVK,EAUKD,GAVL,CAUS,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAVT,EAU6BE,IAV7B,CAUkC,cAVlC,CAAX,CA9BgB,CA0CjB;;AACCV,kBAAM,GAACD,OAAO,CAACO,UAAR,GAAqBiB,MAArB,EAAP,CA3CgB,CA4ChB;AACA;;AAEF,mBAAOvB,MAAP;AACC;AAhGyB;;AAAA;AAAA,S;;;;gBAhBnB;;gBAFA;;gBAKA;;gBAFA;;gBAQiB;;gBAAjB;;;;AAOI9D,qBAAe,6DAL3B,gEAAU;AACTsF,gBAAQ,EAAE,iBADD;AAETC,gBAAQ,EAAR,yEAFS;;AAAA,OAAV,CAK2B,GAAfvF,eAAe,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbb,UAAMwF,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEElC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWamC,4BAA4B;AAAA;AAAA,O;;AAA5BA,kCAA4B,6DAJxC,+DAAS;AACR5F,eAAO,EAAE,CAAC,6DAAa6F,QAAb,CAAsBH,MAAtB,CAAD,CADD;AAERI,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIwC,GAA5BF,4BAA4B,CAA5B","file":"viewinvoice-viewinvoice-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicSelectableModule } from 'ionic-selectable';\nimport { IonicModule } from '@ionic/angular';\n\nimport { ViewinvoicePageRoutingModule } from './viewinvoice-routing.module';\n\nimport { ViewinvoicePage } from './viewinvoice.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IonicSelectableModule,\n    ViewinvoicePageRoutingModule\n  ],\n  declarations: [ViewinvoicePage]\n})\nexport class ViewinvoicePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWV3aW52b2ljZS5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu=\\\"mainmenu\\\"> \\n\\n      </ion-menu-button>\\n    </ion-buttons> \\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-back-button defaultHref=\\\"home\\\" (click)=\\\"showReport()\\\"> </ion-back-button>\\n      \\n    </ion-buttons>\\n    <ion-title>Invoice Details</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n<ion-row >\\n  <ion-item style=\\\"width: 100%;\\\">\\n  <ion-col size=\\\"6\\\">\\n    <ion-label>Customer</ion-label>\\n  </ion-col>\\n  <ion-col size=\\\"6\\\">\\n    <ion-label style=\\\"float: right;\\\">\\n      {{invoice.customer.name}}\\n    </ion-label>\\n  </ion-col>\\n</ion-item>\\n</ion-row>\\n\\n<ion-row>\\n  <ion-item style=\\\"width: 100%;\\\">\\n  <ion-col size=\\\"6\\\">\\n    <ion-label>Invoice Number</ion-label>\\n  </ion-col>\\n  <ion-col size=\\\"6\\\">\\n    <ion-label style=\\\"float: right;\\\">\\n      {{invoice.invoiceNumber}}\\n    </ion-label>\\n  </ion-col>\\n</ion-item>\\n</ion-row>\\n\\n<ion-row>\\n  <ion-item style=\\\"width: 100%;\\\">\\n  <ion-col size=\\\"3\\\">\\n    <ion-label >Date</ion-label>\\n  </ion-col>\\n  <ion-col size=\\\"9\\\">\\n    <ion-label style=\\\"float: right;\\\">\\n      {{invoice.invoiceDateString}}\\n    </ion-label>\\n  </ion-col>\\n</ion-item>\\n</ion-row>\\n</ion-grid>\\n<table  border=\\\"none\\\" style=\\\"width: 94%;margin-left: 2%;margin-right: 5%;margin-top: 2%; color: black;background-color: aliceblue; text-align: center;\\\">\\n  <tr style=\\\"border: none; color: white; background-color: lightslategray;\\\">\\n    <td>\\n      Item\\n    </td>\\n    <td>\\n      Price\\n    </td>\\n    <td>\\n      Quantity\\n    </td>\\n    <td>\\n      Avl.Qty\\n    </td>\\n    <td>\\n      Amount\\n    </td>\\n  </tr>\\n  <tr *ngFor= \\\"let item of invoice.invoiceItems\\\" style=\\\"border: none;\\\">\\n    <td ><ion-input  disabled [(ngModel)]=\\\"item.name\\\" ></ion-input></td>\\n    <td><ion-input disabled type=\\\"number\\\" [(ngModel)]=\\\"item.unitPrice\\\" ></ion-input></td>\\n    <td><ion-input disabled type=\\\"number\\\" [(ngModel)]=\\\"item.quantity\\\"  (keypress)=\\\"numericOnly($event)\\\"></ion-input></td>\\n    <td><ion-input disabled type=\\\"number\\\" [(ngModel)]=\\\"item.displayBalanceQuantity\\\"  (keypress)=\\\"numericOnly($event)\\\"></ion-input></td>\\n    <td><ion-input disabled type=\\\"number\\\" [(ngModel)]=\\\"item.unitPrice*item.quantity\\\" ></ion-input></td>\\n  </tr>\\n</table>\\n\\n<ion-grid>\\n    <ion-row>\\n      <ion-item style=\\\"width: 100%;\\\">\\n      <ion-col size=\\\"6\\\">\\n        <ion-label >Amount</ion-label>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\" >\\n        <ion-label style=\\\"float: right;\\\">{{invoice.total}}</ion-label>\\n      </ion-col>\\n    </ion-item>\\n    </ion-row>\\n    <ion-row>\\n      <ion-item style=\\\"width: 100%;\\\">\\n      <ion-col size=\\\"6\\\">\\n        <ion-label >Balance Amount(Incl. current invoice)</ion-label>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-label style=\\\"float: right;\\\">{{invoice.balanceAmount}}</ion-label>\\n      </ion-col>\\n    </ion-item>\\n    </ion-row>\\n\\n    <ion-row>\\n      <ion-item style=\\\"width: 100%;\\\">\\n        <ion-col size=\\\"6\\\">\\n          <ion-label >Amount Paid</ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\" >\\n          <ion-label style=\\\"float: right;\\\">{{invoice.amountPaid}}</ion-label>\\n        </ion-col>\\n       </ion-item>\\n    </ion-row>\\n    \\n   \\n  </ion-grid>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-row style=\\\"float:right\\\">\\n    <ion-col >\\n    \\n    <ion-button color=\\\"primary\\\" (click)=\\\"printBill()\\\">\\n      <ion-icon name=\\\"print\\\"></ion-icon>\\n    </ion-button>\\n  </ion-col>\\n  </ion-row>\\n\\n</ion-footer>\";","import { DatePipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { DbService } from '../services/db.service';\nimport { Invoice } from '../services/invoice';\nimport { PrintService } from '../services/print.service';\nimport { Profile } from '../services/profile';\nimport EscPosEncoder from 'esc-pos-encoder-ionic';\nimport {sprintf} from \"sprintf-js\";\n\nimport {formatDate} from '@angular/common';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { PrintPreviewComponent } from '../newinvoice/print-preview/print-preview.component';\n@Component({\n  selector: 'app-viewinvoice',\n  templateUrl: './viewinvoice.page.html',\n  styleUrls: ['./viewinvoice.page.scss'],\n})\nexport class ViewinvoicePage implements OnInit {\n  private profile : Profile;\n\n  constructor(private route : ActivatedRoute,private datePipe :DatePipe,public printService : PrintService,\n    private dbService : DbService,public navCtrl:NavController,public modalController: ModalController) { }\n  invoice : Invoice;\n  ngOnInit() {\n    this.invoice={id:null,invoiceNumber:null,invoiceDate:null,total:null,tax:null,amountPaid:null,balanceAmount:null,customer:  {id:null,code:null,name : \"\" ,itemList : null,nameInArabic : \"\",contactPersonName: \"\",contactPersonNameInArabic:\"\",\n    buildingNumber:\"\",street:\"\",streetInArabic:\"\",city:\"\",cityInArabic:\"\",district:\"\",districtInArabic:\"\",country:\"\",countryInArabic:\"\",\n    pobox:\"\",postalCode:\"\",phoneNumber:\"\",mobile:\"\",email:\"\",vatNumber:\"\",crNumber:\"\",creditLimit:null,balance:null},invoiceItems:[],invoiceDateString:\"\"}\n  }\n\n\n  ionViewWillEnter(){\n    this.dbService.getProfile().then(data=>{\n      this.profile=data;\n    });\n  \n    this.route.queryParams.subscribe(params=>{\n      this.invoice=params['invoice'];\n    })\n    this.invoice.invoiceDateString=this.datePipe.transform(new Date( this.invoice.invoiceDate),'dd-MM-yyyy HH:mm:ss');\n    console.log('selected invoice'+this.invoice.invoiceNumber);\n    console.log('selected invoice customer'+this.invoice.customer);\n  }\n  printBill(){\n    \n    this.printPreview();\n    \n  }\n\n  async printPreview() {\n    let modal = await this.modalController.create({\n      component:PrintPreviewComponent,\n      componentProps:  {\n        profile: this.profile,\n        invoice: this.invoice,\n        products : this.invoice.invoiceItems\n      }\n    });\n    modal.present();\n  }\n  \n\n  showReport(){\n    this.navCtrl.navigateRoot('report');\n  }\n\n  getFormatedContent(){\n    const encoder = new EscPosEncoder();\n    let result=\"\";\n    let datetime:string =new Date(this.invoice.invoiceDate).toISOString().substr(0, 19).replace('T', ' ');\n    let billDetails=encoder.initialize().bold(true).raw([0x1B, 0x21, 0x20]).align('center').line(this.profile.companyName).bold(true).newline().\n    raw([0x1B, 0x21, 0x03]).align('left').bold(true).line('VAT # : '+ this.profile.vatNumber+','+'CR # : '+this.profile.crNumber).\n    align('left').bold(true).line('---------------------------------------------------------------').bold(true).\n    raw([0x1B, 0x21, 0x20]).align('center').bold(true).line('VAT INVOICE').bold(true).\n    raw([0x1B, 0x21, 0x03]).align('left').text(this.invoice.invoiceNumber+'            '+ datetime).newline().\n    align('left').bold(true).line('---------------------------------------------------------------').bold(true).\n    align('left').bold(true).line('Bill To').\n    align('left').bold(true).line('---------------------------------------------------------------').bold(true).\n    align('left').line(this.invoice.customer.name).\n    align('left').line(this.invoice.customer.street+','+this.invoice.customer.city+','+this.invoice.customer.district).\n    align('left').line('VAT #: '+this.invoice.customer.vatNumber+'  CR#: '+this.invoice.customer.crNumber).\n    align('left').line('Mob: '+this.invoice.customer.mobile).\n    align('left').bold(true).line('---------------------------------------------------------------').\n    align('left').line(sprintf('%s %-25.22s %6s %7s %16s','#', 'Item', 'Qty','Rate', 'Amount')).bold(true).\n    align('left').bold(true).line('---------------------------------------------------------------');\n    let counter:number=1;\n    let totalQuantity=0;\n    let itemDetails=\"\";\n    for(let itm of this.invoice.invoiceItems){\n      totalQuantity+=itm.quantity;\n      let temp=encoder.initialize().\n      align('left').line(sprintf('%d %-13.13s %9.0f %8.2f %11.2f ',counter, itm.name, itm.quantity,itm.unitPrice, itm.unitPrice*itm.quantity));\n      itemDetails+=temp;\n      counter=counter+1;\n    }\n  \n    let footer=encoder.initialize(). align('left').bold(true).line('------------------------------------------------').bold(true).\n    raw([0x1B, 0x21, 0x08]).align('left').line('Qty : '+totalQuantity).\n    align('right').line('Total Invoice Value(Excl. VAT) : '+  sprintf('%6.2f ',(this.invoice.total-this.invoice.tax))) .\n    align('right').line('VAT Payable in SAR('+this.profile.vat+'%) : '+sprintf('%6.2f ',this.invoice.tax)).\n    align('right').line('Gross Amount in SAR : '+sprintf('%6.2f ',this.invoice.total)).\n    align('left').bold(true).line('------------------------------------------------').bold(true).\n    align('right').line('Previous Balance : '+ sprintf('%6.2f',(this.invoice.balanceAmount+this.invoice.amountPaid))).\n    align('right').line('Paid Amount : '+sprintf('%6.2f',this.invoice.amountPaid)).\n    raw([0x1B, 0x21, 0x20]).align('left').line('Balance Amount : '+sprintf('%6.2f',this.invoice.balanceAmount)).\n    align('left').bold(true).line('------------------------------------------------').bold(true).\n    align('center').raw([0x1B, 0x21, 0x20]).line('Thank You!!!');\n  \n   // result+=billDetails+itemDetails;\n    result=encoder.initialize().encode();\n    //line(billDetails).line(itemDetails).encode();\n    //sprintf('%d %-20.20s %9.2f %3.0f %11.2f ',counter, itm.name, itm.unitPrice, itm.quantity, itm.unitPrice*itm.quantity);\n  \n  return result;\n  }\n  \n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ViewinvoicePage } from './viewinvoice.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ViewinvoicePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ViewinvoicePageRoutingModule {}\n"]}