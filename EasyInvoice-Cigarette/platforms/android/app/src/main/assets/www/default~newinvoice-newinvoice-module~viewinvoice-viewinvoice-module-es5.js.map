{"version":3,"sources":["webpack:///src/app/newinvoice/print-preview/print-preview.component.ts","webpack:///src/app/newinvoice/print-preview/print-preview.component.scss","webpack:///node_modules/dom-to-image/src/dom-to-image.js","webpack:///src/app/newinvoice/print-preview/print-preview.component.html"],"names":["PrintPreviewComponent","printService","dbService","modalCtrl","elementType","URL","correctionLevel","HIGH","value","generateQRCodeContent","datetime","Date","invoice","invoiceDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","filterUnselectedProducts","then","data","orderItems","getTotalQuantity","setTimeout","pairTo","products","filter","a","quantity","undefined","totalQuantity","reduce","accum","item","node","document","getElementById","dataUrl","encoder","result","initialize","img","Image","src","onload","e","ht","Math","ceil","offsetHeight","align","image","newline","raw","line","sendToBluetoothPrinter","profile","selectedPrinter","encode","console","log","dismiss","error","alert","sellerName","getTLVForValue","companyName","vatNumber","timestamp","amt","total","tax","amount","vatAmount","tagsBufArray","qrCodeBuf","concat","qrCodeBase64","toString","tagNum","tagValue","tagBuf","from","tagValueLenBuf","length","tagValueBuf","buffsArray","selector","template","global","util","newUtil","inliner","newInliner","fontFaces","newFontFaces","images","newImages","defaultOptions","imagePlaceholder","cacheBust","domtoimage","toSvg","toPng","toJpeg","toBlob","toPixelData","impl","options","module","exports","copyOptions","Promise","resolve","cloneNode","embedFonts","inlineImages","applyOptions","clone","makeSvgDataUri","width","height","bgcolor","style","backgroundColor","Object","keys","forEach","property","draw","canvas","getContext","getImageData","toDataURL","quality","canvasToBlob","domNode","makeImage","delay","newCanvas","drawImage","createElement","ctx","fillStyle","fillRect","root","makeNodeCopy","cloneChildren","processClone","HTMLCanvasElement","original","children","childNodes","cloneChildrenInOrder","asArray","parent","done","child","childClone","appendChild","Element","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","window","getComputedStyle","source","target","cssText","copyProperties","name","setProperty","getPropertyValue","getPropertyPriority","element","clonePseudoElement","content","className","uid","styleElement","formatPseudoElementStyle","formatCssText","formatCssProperties","createTextNode","map","formatProperty","join","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","SVGElement","SVGRectElement","attribute","getAttribute","resolveAll","styleNode","inlineAll","XMLSerializer","serializeToString","escapeXhtml","xhtml","foreignObject","svg","escape","parseExtension","mimeType","dataAsUrl","isDataUrl","resolveUrl","getAndEncode","mimes","WOFF","JPEG","url","match","exec","extension","toLowerCase","search","binaryString","atob","split","binaryArray","Uint8Array","i","charCodeAt","Blob","type","baseUrl","doc","implementation","createHTMLDocument","base","head","body","href","index","fourRandomChars","random","pow","slice","uri","reject","onerror","TIMEOUT","test","getTime","request","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","open","send","placeholder","readyState","status","fail","FileReader","onloadend","readAsDataURL","response","message","string","replace","ms","arg","arrayLike","array","push","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","scrollHeight","styleProperty","parseFloat","URL_REGEX","shouldProcess","readUrls","inline","get","urlAsRegex","RegExp","nothingToInline","urls","readAll","webFonts","all","webFont","cssStrings","styleSheets","getCssRules","selectWebFontRules","rules","newWebFont","cssRules","rule","CSSRule","FONT_FACE_RULE","sheet","bind","webFontRule","parentStyleSheet","newImage","inlineBackground","HTMLImageElement","background","inlined"],"mappings":"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","file":"default~newinvoice-newinvoice-module~viewinvoice-viewinvoice-module-es5.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport EscPosEncoder from 'esc-pos-encoder-ionic';\nimport html2canvas from 'html2canvas';\nimport { DbService } from 'src/app/services/db.service';\nimport { PrintService } from 'src/app/services/print.service';\nimport { Profile } from 'src/app/services/profile';\nimport { Buffer } from 'buffer';\nimport { NgxQrcodeElementTypes, NgxQrcodeErrorCorrectionLevels } from '@techiediaries/ngx-qrcode';\nimport * as domtoimage from 'dom-to-image';\n@Component({\n  selector: 'app-print-preview',\n  templateUrl: './print-preview.component.html',\n  styleUrls: ['./print-preview.component.scss'],\n})\nexport class PrintPreviewComponent implements OnInit {\n\n  @Input() profile;\n  @Input() invoice;\n  @Input() products;\n  private datetime  :string;\n  private orderItems : any;\n  private totalQuantity : number;\n  elementType = NgxQrcodeElementTypes.URL;\n  correctionLevel = NgxQrcodeErrorCorrectionLevels.HIGH;\n  value = \"\";\n  constructor(public printService : PrintService, public dbService:DbService,private modalCtrl: ModalController,) { }\n\n  ngOnInit() {\n    this.value=this.generateQRCodeContent();\n    this.datetime=new Date( this.invoice.invoiceDate).getDate()+'-'+ new Date(this.invoice.invoiceDate).getMonth()+'-'+ new Date(this.invoice.invoiceDate).getFullYear()+' '+new Date(this.invoice.invoiceDate).getHours()+':'+new Date(this.invoice.invoiceDate).getMinutes()+':'+new Date(this.invoice.invoiceDate).getSeconds();\n    this.filterUnselectedProducts().then(data=>{\n      this.orderItems=data;\n      this.getTotalQuantity().then(data=>{\n        setTimeout(() => {\n          this.pairTo();\n        },3000);\n      })\n      \n    })\n     \n  }\n\n  async filterUnselectedProducts(){\n    return this.products.filter(a=>a.quantity!=null && a.quantity!=undefined && a.quantity>0);\n  }\n\n  async getTotalQuantity(){\n    this.totalQuantity= this.orderItems.reduce((accum,item)=>accum+item.quantity,0);\n  }\n\n  pairTo() {\n    \n    var node = document.getElementById(\"imageToPrint\");\n    \n\n    //html2canvas(node, {\n    domtoimage.toPng(node).then(dataUrl => {\n        //var imgData = canvas.toDataURL(\"image/png\");\n        let encoder = new EscPosEncoder();\n        let result = encoder.initialize();\n        let img = new Image();\n        img.src = dataUrl; \n        img.onload  = (e) =>  {\n          var ht = Math.ceil(node.offsetHeight / 8) * 8;\n          ht = ht + 120;\n          result\n            .align('left')\n            .image(img,552,ht,'threshold',180).newline().\n            align('center').raw([0x1B, 0x21, 0x20]).line('Thank You!!!').newline().newline().newline().\n            newline().newline().newline().newline().newline().newline().newline().newline().newline() ;\n            this.printService.sendToBluetoothPrinter(this.profile.selectedPrinter,result.encode());\n          console.log('print called');\n          this.modalCtrl.dismiss();\n        }\n    }).catch(function (error) {\n      console.error(\"oops, something went wrong!\", error);\n      alert(error);\n      this.modalCtrl.dismiss();\n    });\n  }\n\n  generateQRCodeContent(){\n\n    var sellerName=this.getTLVForValue(\"1\",this.profile.companyName);\n    var vatNumber=this.getTLVForValue(\"2\",this.profile.vatNumber);\n    var timestamp=this.getTLVForValue(\"3\",\"\"+this.invoice.invoiceDate);\n    let amt : number =(this.invoice.total-this.invoice.tax);\n    var amount=this.getTLVForValue(\"4\",\"\"+amt);\n    var vatAmount=this.getTLVForValue(\"5\",\"\"+this.invoice.tax);\n    var tagsBufArray=[sellerName,vatNumber,timestamp,amount,vatAmount];\n    var qrCodeBuf=Buffer.concat(tagsBufArray);\n    var qrCodeBase64=qrCodeBuf.toString('base64');\n    return qrCodeBase64;\n  }\n\n  getTLVForValue(tagNum,tagValue){\n    var tagBuf=Buffer.from([tagNum]);\n    var tagValueLenBuf=Buffer.from([tagValue.length]);\n    var tagValueBuf=Buffer.from(tagValue);\n    var buffsArray=[tagBuf,tagValueLenBuf,tagValueBuf];\n    return Buffer.concat(buffsArray);\n  }\n  \n\n  \n\n}","export default \".text-center {\\n  text-align: center;\\n}\\n\\n#imageToPrint {\\n  position: relative;\\n  font-size: 16px;\\n  font-family: Verdana, Geneva, Tahoma, sans-serif !important;\\n}\\n\\nimg {\\n  width: 100px;\\n  height: 100px;\\n}\\n\\n.title {\\n  font-size: 18px !important;\\n  font-weight: bold;\\n}\\n\\n.content-center {\\n  text-align: center;\\n  margin: 0px;\\n  font-weight: 700;\\n  line-height: 1.5;\\n}\\n\\n.content-left {\\n  text-align: left;\\n  font-size: 16px;\\n  margin: 0px;\\n  font-weight: 700;\\n  line-height: 1.5;\\n}\\n\\n.content-right {\\n  text-align: right;\\n  font-size: 16px;\\n  margin: 0px;\\n  line-height: 1.5;\\n}\\n\\n.title-content-center {\\n  text-align: center;\\n  font-size: 18px;\\n  margin: 0px;\\n  font-weight: 700;\\n  line-height: 1.5;\\n}\\n\\n.title-content-left {\\n  text-align: left;\\n  font-size: 18px;\\n  margin: 0px;\\n  font-weight: 700;\\n  line-height: 1.5;\\n}\\n\\n.line-separator {\\n  margin: 10px 0px;\\n  border: 1px dashed black;\\n}\\n\\n.bill-details {\\n  display: inline-block;\\n}\\n\\n.full-width {\\n  width: 100%;\\n}\\n\\n.oneby3-width {\\n  width: 75%;\\n}\\n\\n.oneby2-width {\\n  width: 50%;\\n}\\n\\n.display-flex {\\n  display: flex;\\n  text-align: left;\\n}\\n\\n.item-label {\\n  width: 50%;\\n  padding: 3px 10px;\\n}\\n\\n.item-cus-label {\\n  width: 100%;\\n  padding: 3px 10px;\\n}\\n\\n.font-14 {\\n  font-size: 14px;\\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\\n}\\n\\n.no-wrap-text {\\n  white-space: nowrap;\\n}\\n\\n.item-value {\\n  width: 50%;\\n  padding: 3px 10px;\\n}\\n\\n.item-arabic {\\n  width: 33.33%;\\n  padding: 3px 10px;\\n}\\n\\n.overflow {\\n  overflow: auto;\\n}\\n\\n.dummy-img img {\\n  width: 55px !important;\\n  height: 50px !important;\\n}\\n\\n.m-t-1 {\\n  margin-top: 2px;\\n}\\n\\n.letter-space {\\n  letter-spacing: 0;\\n  word-spacing: normal;\\n  /* text-align: center !important; */\\n  word-wrap: normal !important;\\n}\\n\\ntable.fixed {\\n  width: 100%;\\n}\\n\\ntable th {\\n  padding: 5px 0px 15px;\\n  text-align: center;\\n}\\n\\ntable thead tr {\\n  border-bottom: 1px solid black;\\n}\\n\\ntable tr td {\\n  padding: 5px 0px 15px;\\n}\\n\\ntable td:nth-child(4) {\\n  width: 40%;\\n  text-align: center;\\n}\\n\\ntable td:nth-child(3), td:nth-child(2), td:nth-child(1) {\\n  width: 20%;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3ByaW50LXByZXZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtBQUNKOztBQUNBO0VBQ0ksa0JBQUE7RUFDQSxlQUFBO0VBQ0EsMkRBQUE7QUFFSjs7QUFDQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0FBRUo7O0FBQUE7RUFDSSwwQkFBQTtFQUNBLGlCQUFBO0FBR0o7O0FBREE7RUFDSSxrQkFBQTtFQUVBLFdBQUE7RUFDQSxnQkFBQTtFQUNBLGdCQUFBO0FBR0o7O0FBRUE7RUFDSSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtBQUNKOztBQUVBO0VBQ0ksaUJBQUE7RUFDQSxlQUFBO0VBQ0EsV0FBQTtFQUVBLGdCQUFBO0FBQUo7O0FBSUE7RUFDSSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtBQURKOztBQUlBO0VBQ0ksZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7QUFESjs7QUFLQTtFQUNJLGdCQUFBO0VBQ0Esd0JBQUE7QUFGSjs7QUFJQTtFQUNJLHFCQUFBO0FBREo7O0FBR0E7RUFDSSxXQUFBO0FBQUo7O0FBRUE7RUFDSSxVQUFBO0FBQ0o7O0FBQ0E7RUFDSSxVQUFBO0FBRUo7O0FBQUE7RUFDSSxhQUFBO0VBQ0EsZ0JBQUE7QUFHSjs7QUFEQTtFQUNJLFVBQUE7RUFDQSxpQkFBQTtBQUlKOztBQUZBO0VBQ0ksV0FBQTtFQUNBLGlCQUFBO0FBS0o7O0FBSEE7RUFDSSxlQUFBO0VBQ0EsZ0RBQUE7QUFNSjs7QUFKQTtFQUNJLG1CQUFBO0FBT0o7O0FBTEE7RUFDSSxVQUFBO0VBQ0EsaUJBQUE7QUFRSjs7QUFOQTtFQUNJLGFBQUE7RUFDQSxpQkFBQTtBQVNKOztBQVBBO0VBQ0ksY0FBQTtBQVVKOztBQVBJO0VBQ0ksc0JBQUE7RUFDQSx1QkFBQTtBQVVSOztBQVBBO0VBQ0ksZUFBQTtBQVVKOztBQVJBO0VBQ0ksaUJBQUE7RUFDQSxvQkFBQTtFQUNBLG1DQUFBO0VBQ0EsNEJBQUE7QUFXSjs7QUFQQTtFQUNJLFdBQUE7QUFVSjs7QUFSRTtFQUNJLHFCQUFBO0VBQ0Esa0JBQUE7QUFXTjs7QUFURTtFQUNJLDhCQUFBO0FBWU47O0FBVkU7RUFDRSxxQkFBQTtBQWFKOztBQVhFO0VBQ0ksVUFBQTtFQUNBLGtCQUFBO0FBY047O0FBWkU7RUFDRSxVQUFBO0VBQ0Esa0JBQUE7QUFlSiIsImZpbGUiOiJwcmludC1wcmV2aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRleHQtY2VudGVyIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4jaW1hZ2VUb1ByaW50IHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgZm9udC1zaXplOiAxNnB4IDtcbiAgICBmb250LWZhbWlseTogVmVyZGFuYSwgR2VuZXZhLCBUYWhvbWEsIHNhbnMtc2VyaWYgIWltcG9ydGFudDsgICAgXG4gICAgXG59XG5pbWcge1xuICAgIHdpZHRoOiAxMDBweDtcbiAgICBoZWlnaHQ6IDEwMHB4O1xufVxuLnRpdGxle1xuICAgIGZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuLmNvbnRlbnQtY2VudGVyIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgXG4gICAgbWFyZ2luOiAwcHg7XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIFxufVxuXG5cbi5jb250ZW50LWxlZnQge1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICAgIG1hcmdpbjogMHB4O1xuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICBcbn1cbi5jb250ZW50LXJpZ2h0IHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgbWFyZ2luOiAwcHg7XG4gICAvLyBmb250LXdlaWdodDogNzAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgXG59XG5cbi50aXRsZS1jb250ZW50LWNlbnRlciB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBtYXJnaW46IDBweDtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgXG59XG4udGl0bGUtY29udGVudC1sZWZ0IHtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBtYXJnaW46IDBweDtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgXG59XG5cbi5saW5lLXNlcGFyYXRvciB7XG4gICAgbWFyZ2luOiAxMHB4IDBweDtcbiAgICBib3JkZXIgOiAxcHggZGFzaGVkIGJsYWNrO1xufVxuLmJpbGwtZGV0YWlscyB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xufVxuLmZ1bGwtd2lkdGgge1xuICAgIHdpZHRoOiAxMDAlO1xufVxuLm9uZWJ5My13aWR0aCB7XG4gICAgd2lkdGg6IDc1JTtcbn1cbi5vbmVieTItd2lkdGgge1xuICAgIHdpZHRoOiA1MCU7XG59XG4uZGlzcGxheS1mbGV4IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG59XG4uaXRlbS1sYWJlbCB7XG4gICAgd2lkdGg6IDUwJTtcbiAgICBwYWRkaW5nOiAzcHggMTBweDtcbn1cbi5pdGVtLWN1cy1sYWJlbCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZzogM3B4IDEwcHg7XG59XG4uZm9udC0xNCB7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBHZW5ldmEsIFRhaG9tYSwgc2Fucy1zZXJpZlxufVxuLm5vLXdyYXAtdGV4dHtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuLml0ZW0tdmFsdWUge1xuICAgIHdpZHRoOiA1MCU7XG4gICAgcGFkZGluZzogM3B4IDEwcHg7XG59XG4uaXRlbS1hcmFiaWMge1xuICAgIHdpZHRoOiAzMy4zMyU7XG4gICAgcGFkZGluZzogM3B4IDEwcHg7XG59XG4ub3ZlcmZsb3cge1xuICAgIG92ZXJmbG93OiBhdXRvOyBcbn1cbi5kdW1teS1pbWcge1xuICAgIGltZyB7XG4gICAgICAgIHdpZHRoOiA1NXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTBweCAhaW1wb3J0YW50O1xuICAgIH1cbn1cbi5tLXQtMSB7XG4gICAgbWFyZ2luLXRvcDogMnB4O1xufSBcbi5sZXR0ZXItc3BhY2Uge1xuICAgIGxldHRlci1zcGFjaW5nOiAwO1xuICAgIHdvcmQtc3BhY2luZzogbm9ybWFsO1xuICAgIC8qIHRleHQtYWxpZ246IGNlbnRlciAhaW1wb3J0YW50OyAqL1xuICAgIHdvcmQtd3JhcDogbm9ybWFsICFpbXBvcnRhbnQ7XG4gICAgLy8gZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgXG59XG50YWJsZS5maXhlZCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbiAgdGFibGUgdGgge1xuICAgICAgcGFkZGluZzogNXB4IDBweCAxNXB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG4gIHRhYmxlIHRoZWFkIHRyIHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBibGFjaztcbiAgfVxuICB0YWJsZSB0ciB0ZCB7XG4gICAgcGFkZGluZzogNXB4IDBweCAxNXB4O1xuICB9XG4gIHRhYmxlIHRkOm50aC1jaGlsZCg0KSB7XG4gICAgICB3aWR0aDogNDAlO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG4gIHRhYmxlIHRkOm50aC1jaGlsZCgzKSAsIHRkOm50aC1jaGlsZCgyKSwgdGQ6bnRoLWNoaWxkKDEpe1xuICAgIHdpZHRoOiAyMCU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufSJdfQ== */\";","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","export default \"<!-- <ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button size=\\\"small\\\" shape=\\\"round\\\" (click)=\\\"closeModal()\\\" color=\\\"medium\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"close\\\"></ion-icon> Close\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header> -->\\n<div class=\\\"overflow\\\">\\n  <div id=\\\"imageToPrint\\\">  \\n    <div> \\n      <div class=\\\"text-center title\\\" >\\n          <h3 class=\\\"content-center\\\"> {{profile?.companyName}}</h3>\\n      </div>\\n      <div class=\\\"text-center title\\\" >\\n        <h3 class=\\\"content-center letter-space\\\"> {{profile?.companyNameInArabic}}</h3>\\n    </div>\\n    \\n    <div  class=\\\"text-center  letter-space content-center\\\">\\n      {{profile?.addressLine1}} {{profile?.addressLine1inArabic}}   \\n    </div>\\n    <div  class=\\\" text-center letter-space content-center\\\">\\n      {{profile?.addressLine2}} {{profile?.addressLine2InArabic}}   \\n  </div>\\n  <div class=\\\"full-width \\\">\\n      <div text-left class=\\\"item-cus-label letter-space title\\\">\\n        VAT # / ضريبة القيمة المضافة  :\\n      </div>\\n      <div  text-left class=\\\"item-cus-label title\\\">\\n        {{profile?.vatNumber}}  \\n      </div>\\n      \\n  </div>\\n  <div class=\\\"line-separator\\\"></div>\\n  \\n  <div  class=\\\"text-center title\\\">\\n   <h5 class=\\\"title\\\">VAT INVOICE / فاتوره ضريبية </h5>\\n  </div>\\n  <div class=\\\"full-width\\\">\\n    <div class=\\\"item-cus-label\\\">\\n    Invoice # / رقم الفاتورة :\\n    </div>\\n    <div text-left class=\\\"item-cus-label\\\">\\n      {{invoice?.invoiceNumber}}\\n    </div>\\n  </div>\\n  <div class=\\\"full-width\\\">\\n    <div class=\\\"item-cus-label\\\">\\n    Invoice Date / تاريخ   :</div>\\n    <div text-left class=\\\"item-cus-label\\\">{{invoice?.invoiceDate | date : 'dd-MM-yyyy hh:mm'}} </div>\\n  </div>\\n  <div class=\\\"line-separator\\\"></div>\\n  \\n  <div class=\\\"display-flex  full-width\\\">\\n    <div class=\\\"item-lebel no-wrap-text\\\" style=\\\"margin-left: 3%;\\\">\\n      <b>Bill To : </b>\\n    </div>\\n  </div>\\n  <div class=\\\"line-separator\\\"></div>\\n  <div class=\\\"full-width\\\">\\n    <div  class=\\\" full-width\\\" style=\\\"margin-left: 3%; word-wrap: break-word;\\\" >\\n      {{invoice?.customer.name}} \\n    </div>\\n    <div  class=\\\" full-width letter-space\\\" style=\\\"margin-left: 3%; word-wrap: break-word;\\\" >\\n      {{invoice?.customer.nameInArabic}} \\n    </div>\\n    \\n  </div>\\n  <div class=\\\"full-width\\\">\\n    <div  class=\\\" full-width\\\" style=\\\"margin-left: 3%; word-wrap: break-word;\\\" >\\n      {{invoice?.customer.street}},{{invoice?.customer.city}} \\n    </div>\\n    <div  class=\\\" full-width letter-space\\\" style=\\\"margin-left: 3%; word-wrap: break-word;\\\" >\\n      {{invoice?.customer.streetInArabic}},{{invoice?.customer.cityInArabic }} \\n    </div>\\n    \\n  </div>\\n  <div class=\\\"full-width\\\">\\n    <div  class=\\\"item-cus-label letter-space\\\" >\\n       VAT # / ضريبة القيمة المضافة : \\n    </div>\\n    <div  text-right class=\\\"item-value \\\">\\n      {{invoice?.customer.vatNumber}}\\n    </div>\\n    \\n  </div>\\n  <div class=\\\"line-separator\\\"></div>\\n  <table style=\\\"width:100%\\\" class=\\\"fixed\\\">\\n          <thead>\\n            <tr>\\n  \\n              <th style=\\\"text-align: left; width: 37%; margin-left: 2%;font-weight: normal;\\\">\\n                <div style=\\\"margin-left: 3%;\\\">Item</div>\\n                <div class=\\\"letter-space\\\" style=\\\"margin-left: 3%;\\\">العنصر</div>\\n              </th>\\n              <th style=\\\"width:4% ;font-weight: normal;\\\">\\n                <div>Qty</div>\\n                <div class=\\\"letter-space\\\">الكمية</div>\\n              </th>\\n              <th style=\\\"width:7% ;font-weight: normal;\\\">\\n                <div>Price</div>\\n                <div class=\\\"letter-space\\\">السعر</div>\\n              </th>\\n              <th style=\\\"width:35% ;margin-right: 2%;font-weight: normal;\\\">\\n                <div style=\\\"margin-right: 2%;\\\">Amount</div>\\n                <div class=\\\"letter-space\\\">المبلغ</div>\\n              </th>\\n               \\n              \\n            </tr>\\n          </thead>\\n          <tr *ngFor=\\\"let order of orderItems\\\">\\n            <td style=\\\"text-align: left;margin-left: 3%;\\\">\\n              <div style=\\\"margin-left: 3%; \\\" class=\\\"letter-space\\\">\\n                {{order.name}} {{order.nameInArabic}}\\n              </div>\\n            </td>\\n            <td>{{order.quantity}}</td>\\n            <td>{{order.unitPrice }}</td>\\n            <td >\\n              <div style=\\\"margin-right: 3%;\\\">\\n                {{(order.unitPrice * order.quantity) | number : '1.2-2'}}\\n              </div>\\n              \\n            </td>\\n  \\n            \\n           \\n          </tr>\\n        </table>\\n        <div class=\\\"line-separator\\\"></div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"item-label content-right\\\">\\n            Qty : {{totalQuantity}}\\n          </div>\\n        </div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"content-right item-label\\\" style=\\\"width: 100%;\\\">\\n            Total Invoice Value(Excl.VAT) : {{(invoice?.total-invoice?.tax) | number : '1.2-2'}}\\n          </div>\\n        </div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"item-label content-right\\\" style=\\\"width: 100%;\\\">\\n            VAT Payable in SAR ({{profile?.vat}}%): {{invoice?.tax | number : '1.2-2'}}\\n          </div>\\n          \\n        </div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"item-label content-right\\\" style=\\\"width: 100%;\\\">\\n            Gross Amount in SAR : {{invoice?.total | number : '1.2-2'}}\\n          </div>\\n        </div>\\n        <div class=\\\"line-separator\\\"></div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"item-label content-right\\\" style=\\\"width: 100%;\\\">\\n          Previous Balance : {{(this.invoice.balanceAmount+this.invoice.amountPaid) | number : '1.2-2' }}\\n          </div>\\n        </div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"item-label content-right\\\" style=\\\"width: 100%;\\\">\\n          Paid Amount : {{this.invoice.amountPaid | number : '1.2-2' }}\\n          </div>\\n        </div>\\n        <div class=\\\"display-flex full-width\\\">\\n          <div  class=\\\"item-label title-content-left\\\" style=\\\"width: 100%;\\\">\\n          Balance Amount : {{this.invoice.balanceAmount | number : '1.2-2' }}\\n          </div>\\n        </div>\\n        <div class=\\\"line-separator\\\"></div>\\n        <div style=\\\"width:300px;height:300px\\\" >\\n        <div style=\\\"margin-left: 10%;\\\">\\n          <ngx-qrcode  \\n  [elementType]=\\\"elementType\\\"\\n  [errorCorrectionLevel]=\\\"correctionLevel\\\"\\n  [value]=\\\"value\\\"\\n  \\n  ></ngx-qrcode>\\n  </div>\\n  </div>\\n  <div class=\\\"title-content-center full-width\\\">\\n    Thank you !!!\\n  </div>\\n  <p>&nbsp;</p> \\n  <p>&nbsp;</p> \\n  <p>&nbsp;</p> \\n  <div style=\\\"height: 40px;\\\">\\n\\n  </div>\\n    </div>\\n  </div>\\n</div>\\n\";"]}