{"version":3,"sources":["webpack:///src/app/login/login.page.ts","webpack:///src/app/login/login.page.html","webpack:///src/app/login/login.module.ts","webpack:///src/app/login/login-routing.module.ts","webpack:///src/app/login/login.page.scss"],"names":["LoginPage","app","navCtrl","dbServise","formBuilder","tostService","uniqueDeviceID","uid","androidPermissions","userName","password","error","whiteListedMACs","formLogin","compose","required","email","getPermission","showTabs","checkPermission","PERMISSION","READ_PHONE_STATE","then","res","hasPermission","requestPermission","alert","controls","valid","fetchUserByUserNameAndPassword","data","includes","IMEI","undefined","loginUser","navigateRoot","presentToast","ICCID","IMSI","MAC","UUID","err","console","log","selector","template","LoginPageModule","imports","declarations","routes","path","component","LoginPageRoutingModule","forChild","exports"],"mappings":"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","file":"login-login-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MenuController } from '@ionic/angular';\nimport { ClientPage } from '../client/client.page';\nimport { NavController } from '@ionic/angular';\nimport { AppComponent } from '../app.component';\nimport { User } from '../services/user';\nimport { DbService } from '../services/db.service';\nimport { ToastserviceService } from '../services/toastservice.service';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EmailComposer } from '@ionic-native/email-composer/ngx';\nimport { UniqueDeviceID } from '@ionic-native/unique-device-id/ngx';\nimport { Uid } from '@ionic-native/uid/ngx';\nimport { AndroidPermissions } from '@ionic-native/android-permissions/ngx';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  userName : any=\"\";\n  password : any=\"\";\n  loginUser : User;  \n  formLogin : FormGroup;\n  error : boolean =false;\n  errorMessage : string ;\n  private whiteListedMACs : string []=['866817033701756']\n  constructor(public app:AppComponent,public navCtrl:NavController,public dbServise:DbService,\n    formBuilder : FormBuilder,public tostService:ToastserviceService,\n    private uniqueDeviceID: UniqueDeviceID,\n    private uid: Uid,\n    private androidPermissions: AndroidPermissions) {\n      this.formLogin=new FormGroup({\n        password : new FormControl('',Validators.compose([Validators.required])),\n        email : new FormControl('',Validators.compose([Validators.required])) \n      })\n      this.getPermission();\n   }\n\n  ngOnInit() {\n    this.app.showTabs=false;\n  }\n\n  getPermission(){\n    this.androidPermissions.checkPermission(\n      this.androidPermissions.PERMISSION.READ_PHONE_STATE\n    ).then(res => {\n      if(res.hasPermission){\n        \n      }else{\n        this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.READ_PHONE_STATE).then(res => {\n          alert(\"Persmission Granted Please Restart App!\");\n        }).catch(error => {\n          alert(\"Error! \"+error);\n        });\n      }\n    }).catch(error => {\n      alert(\"Error! \"+error);\n    });\n  }\n\n  get errorControl() {\n    return this.formLogin.controls;\n  }\n  login(){\n    if(!this.formLogin.valid){\n      \n      return ;  \n    }\n    \n    this.dbServise.fetchUserByUserNameAndPassword(this.userName,this.password).then(data=>{\n      if(this.whiteListedMACs.includes(this.uid.IMEI)){\n\n        if(data!=null && data!=undefined){\n          this.loginUser=data;\n          this.app.showTabs=true;\n          this.navCtrl.navigateRoot('inventory');\n        }else{\n          this.tostService.presentToast(\"Incorrect username or password\");\n        }\n      }else{\n        this.tostService.presentToast(\"MAC Address not configured \"+'IMEI-'+this.uid.IMEI+'ICCID-'+this.uid.ICCID+'IMSI-'+this.uid.IMSI+'MAC-'+this.uid.MAC+'UUID-'+this.uid.UUID);\n      }\n\n    }).catch(err=>{\n        console.log(err);\n        this.tostService.presentToast(\"Incorrect username or password\");\n    });\n    \n    \n  }\n\n  fetchUserByPormise(userName : any,password : any){\n    return this.dbServise.fetchUserByUserNameAndPassword(userName,password).then\n  }\n\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Login</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <div style=\\\"margin-top: 50%;\\\">\\n    <form [formGroup]=\\\"formLogin\\\">\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Email</ion-label>\\n        <ion-input name=\\\"username\\\" type=\\\"text\\\" [(ngModel)]=\\\"userName\\\" formControlName=\\\"email\\\" required></ion-input>\\n       \\n    </ion-item>\\n    \\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\n      <ion-input name=\\\"password\\\" type=\\\"password\\\" [(ngModel)]=\\\"password\\\"   formControlName=\\\"password\\\"  required></ion-input>\\n    </ion-item>\\n  </form>\\n\\n    <ion-row>\\n      <ion-col>\\n        <ion-button type=\\\"submit\\\" color=\\\"primary\\\" (click)=\\\"login()\\\" expand=\\\"block\\\" >Login</ion-button>\\n        \\n      </ion-col>\\n      \\n    </ion-row>\\n    <ion-row>\\n      <ion-col class=\\\"ion-text-left\\\">\\n        <a [routerLink]=\\\"['/forgot-password']\\\" class=\\\"small-text\\\">Forgot Password?</a>\\n      </ion-col>\\n      <ion-col class=\\\"ion-text-right\\\">\\n        <a [routerLink]=\\\"['/register']\\\" class=\\\"small-text\\\">Create Account</a>\\n      </ion-col>\\n    </ion-row>\\n  </div>\\n  \\n  \\n  \\n\\n</ion-content>  \";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule, \n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule,FormsModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","export default \".verticalCenter {\\n  margin-top: 14%;\\n  margin-left: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNDLGVBQUE7RUFDQSxnQkFBQTtBQUNEIiwiZmlsZSI6ImxvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi52ZXJ0aWNhbENlbnRlciB7XG5cdG1hcmdpbi10b3A6IDE0JTtcblx0bWFyZ2luLWxlZnQ6IDEwJTtcblx0XG59XG4iXX0= */\";"]}