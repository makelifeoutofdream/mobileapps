{"version":3,"sources":["webpack:///node_modules/esc-pos-encoder-ionic/src/esc-pos-encoder.js","webpack:///node_modules/linewrap/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/sbcs-data-generated.js","webpack:///node_modules/canvas/browser.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/lib/index.js","webpack:///streams (ignored)","webpack:///extend-node (ignored)","webpack:///node_modules/canvas/lib/parse-font.js","webpack:///src/app/services/print.service.ts","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/dbcs-codec.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/sbcs-codec.js","webpack:///node_modules/base64-js/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/internal.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/utf7.js","webpack:///node_modules/canvas-dither/src/canvas-dither.js","webpack:///node_modules/string_decoder/node_modules/safe-buffer/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/sbcs-data.js","webpack:///node_modules/string_decoder/lib/string_decoder.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/utf16.js","webpack:///node_modules/ieee754/index.js","webpack:///node_modules/canvas-flatten/src/canvas-flatten.js","webpack:///node_modules/buffer/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/lib/bom-handling.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/dbcs-data.js","webpack:///node_modules/safer-buffer/safer.js"],"names":["iconv","linewrap","createCanvas","Dither","Flatten","EscPosEncoder","_reset","_buffer","_codepage","_state","value","encode","forEach","item","push","_queue","codepages","codepage","encodingExists","Error","encodings","hanzi","wrap","w","lineBreak","bytes","_encode","text","newline","underline","Number","italic","bold","alignments","symbology","height","symbologies","model","size","errorlevel","models","errorlevels","length","element","width","algorithm","threshold","canvas","context","getContext","drawImage","image","getImageData","flatten","bayer","floydsteinberg","atkinson","getPixel","x","y","data","Uint8Array","i","result","index","set","module","exports","presetMap","skipScheme","lineBreakScheme","whitespace","brPat","lineBreakSchemeMap","skipSchemeMap","modeMap","wsMap","rlbMap","rlbSMPat","escapePat","escapeRegExp","s","replace","start","stop","params","undefined","preset","mode","tabWidth","skip","respectLineBreaks","respectNum","preservedLineIndent","wrapLineIndent","wrapLineIndentBase","skipPat","lineBreakPat","lineBreakStr","multiLineBreakPat","preservedLinePrefix","wrapLineIndentPat","wrapLineInitPrefix","tabRepl","flags","Array","TypeError","Object","keys","join","parseInt","test","match","exec","isNaN","RegExp","global","ignoreCase","multiline","source","re","prefix","wsStrip","wsCollapse","wsLine","wsAll","tabPat","collapsePat","pPat","tPat","nonWsPat","wsPat","wrapLen","toString","lastIndex","blocks","base","mo","arr","b","res","substring","type","breaks","remaining","j","k","segments","bloc","chunks","segment","parts","split","acc","slice","concat","curLine","curLineLength","lines","bulge","cleanLine","preservedLine","wrapLinePrefix","remnant","finishOffCurLine","beforeHardBreak","str","idx","ln","rBase","search","chunk","num","chunk2","soft","hard","args","call","arguments","last","apply","shift","parseFont","assign","document","createElement","createImageData","array","ImageData","loadImage","src","options","Promise","resolve","reject","cleanup","onload","onerror","Buffer","bomHandling","defaultCharUnicode","defaultCharSingleByte","encoding","encoder","getEncoder","write","trail","end","decode","buf","skipDecodeWarning","console","error","from","decoder","getDecoder","enc","getCodec","e","toEncoding","fromEncoding","_codecDataCache","_canonicalizeEncoding","codecOptions","codec","codecDef","key","encodingName","toLowerCase","bomAware","addBOM","PrependBOM","stripBOM","StripBOM","nodeVer","process","versions","node","nodeVerArr","map","weights","styles","variants","stretches","units","string","weightRe","styleRe","variantRe","stretchRe","sizeFamilyRe","cache","defaultHeight","sizeFamily","font","weight","style","stretch","variant","parseFloat","unit","family","substr","PrintService","btSerial","tostService","window","DatecsPrinter","listBluetoothDevices","success","alert","connect","printText","macAddress","devices","address","printSomeTestText","JSON","stringify","list","disconnect","connectToBluetoothPrinter","subscribe","_","then","reason","log","err","presentToast","providedIn","_dbcs","DBCSCodec","UNASSIGNED","GB18030_CODE","SEQ_START","NODE_START","UNASSIGNED_NODE","DEF_CHAR","table","mappingTable","decodeTables","decodeTableSeq","_addDecodeChunk","encodeTable","encodeTableSeq","skipEncodeChars","encodeSkipVals","val","to","_fillEncodeTable","encodeAdd","uChar","prototype","hasOwnProperty","_setEncodeChar","charCodeAt","defCharSB","gb18030","thirdByteNodeIdx","thirdByteNode","fourthByteNodeIdx","fourthByteNode","secondByteNodeIdx","secondByteNode","DBCSEncoder","DBCSDecoder","_getDecodeTrieNode","addr","curAddr","writeTable","part","l","code","codeTrail","len","seq","m","charCode","_getEncodeBucket","uCode","high","dbcsCode","bucket","low","_setEncodeSequence","oldVal","nodeIdx","mbCode","leadSurrogate","seqObj","newBuf","alloc","nextChar","resCode","subtable","findIdx","uChars","gbChars","Math","floor","prevBuf","prevBufOffset","seqStart","curByte","curSeq","ptr","uCodeLead","ret","r","mid","_sbcs","SBCSCodec","chars","asciiString","String","fromCharCode","decodeBuf","encodeBuf","SBCSEncoder","SBCSDecoder","idx1","idx2","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","getLens","b64","validLen","indexOf","placeHoldersLen","lens","_byteLength","tmp","tripletToBase64","encodeChunk","uint8","output","extraBytes","maxChunkLength","len2","modules","utf8","cesu8","unicode11utf8","ucs2","utf16le","binary","base64","hex","_internal","InternalCodec","InternalEncoderBase64","InternalEncoderCesu8","InternalDecoderCesu8","InternalEncoder","InternalDecoder","StringDecoder","prevStr","completeQuads","bufIdx","contBytes","accBytes","utf7","Utf7Codec","unicode11utf7","Utf7Encoder","Utf7Decoder","nonDirectChars","bind","inBase64","base64Accum","base64Regex","base64Chars","plusChar","minusChar","andChar","lastI","b64str","canBeDecoded","utf7imap","Utf7IMAPCodec","Utf7IMAPEncoder","Utf7IMAPDecoder","base64AccumIdx","base64IMAPChars","CanvasDither","luminance","fill","thresholdMap","Uint8ClampedArray","buffer","copyProps","dst","allocUnsafe","allocUnsafeSlow","SafeBuffer","arg","encodingOrOffset","create","SlowBuffer","isEncoding","_normalizeEncoding","retried","normalizeEncoding","nenc","nb","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8End","utf8Text","copy","utf8CheckByte","byte","utf8CheckIncomplete","self","utf8CheckExtraBytes","p","total","c","n","utf16be","Utf16BECodec","Utf16BEEncoder","Utf16BEDecoder","overflowByte","buf2","utf16","Utf16Codec","Utf16Encoder","Utf16Decoder","initialBytes","initialBytesLen","detectEncoding","defaultEncoding","asciiCharsLE","asciiCharsBE","_len","min","read","offset","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","Infinity","pow","rt","abs","LN2","CanvasFlatten","background","alpha","invAlpha","ieee754","customInspectSymbol","Symbol","INSPECT_MAX_BYTES","K_MAX_LENGTH","kMaxLength","TYPED_ARRAY_SUPPORT","typedArraySupport","proto","foo","setPrototypeOf","defineProperty","enumerable","get","isBuffer","byteOffset","createBuffer","RangeError","poolSize","fromString","ArrayBuffer","isView","fromArrayView","isInstance","fromArrayBuffer","SharedArrayBuffer","valueOf","fromObject","toPrimitive","assertSize","checked","actual","fromArrayLike","arrayView","obj","numberIsNaN","isArray","_isBuffer","compare","a","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","toLocaleString","equals","inspect","max","trim","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","includes","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","out","hexSliceLookupTable","subarray","checkOffset","ext","readUintLE","readUIntLE","noAssert","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUintLE","writeUIntLE","maxBytes","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","littleEndian","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","base64clean","byteArray","hi","lo","constructor","name","alphabet","i16","BOMChar","PrependBOMWrapper","StripBOMWrapper","pass","safer","Safer","kStringMaxLength","binding","constants","MAX_LENGTH","MAX_STRING_LENGTH"],"mappings":"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","file":"default~inventory-inventory-module~newinvoice-newinvoice-module~report-report-module~viewinvoice-vie~eeb01026-es5.js","sourcesContent":["const iconv = require('iconv-lite');\nconst linewrap = require('linewrap');\nconst {createCanvas} = require('canvas');\nconst Dither = require('canvas-dither');\nconst Flatten = require('canvas-flatten');\n\n\n/**\n * Create a byte stream based on commands for ESC/POS printers\n */\nclass EscPosEncoder {\n    /**\n     * Create a new object\n     *\n    */\n    constructor() {\n        this._reset();\n    }\n\n    /**\n     * Reset the state of the object\n     *\n    */\n    _reset() {\n        this._buffer = [];\n        this._codepage = 'ascii';\n\n        this._state = {\n            'bold': false,\n            'italic': false,\n            'underline': false,\n            'hanzi': false,\n        };\n    }\n\n    /**\n     * Encode a string with the current code page\n     *\n     * @param  {string}   value  String to encode\n     * @return {object}          Encoded string as a ArrayBuffer\n     *\n    */\n    _encode(value) {\n        return iconv.encode(value, this._codepage);\n    }\n\n    /**\n     * Add commands to the buffer\n     *\n     * @param  {array}   value  And array of numbers, arrays, buffers or Uint8Arrays to add to the buffer\n     *\n    */\n    _queue(value) {\n        value.forEach((item) => this._buffer.push(item));\n    }\n\n    /**\n     * Initialize the printer\n     *\n     * @return {object}          Return the object, for easy chaining commands\n     *\n     */\n    initialize() {\n        this._queue([\n            0x1b, 0x40,\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Change the code page\n     *\n     * @param  {string}   value  The codepage that we set the printer to\n     * @return {object}          Return the object, for easy chaining commands\n     *\n     */\n    codepage(value) {\n        const codepages = {\n            'cp437': [0x00, false],\n            'cp737': [0x40, false],\n            'cp850': [0x02, false],\n            'cp775': [0x5f, false],\n            'cp852': [0x12, false],\n            'cp855': [0x3c, false],\n            'cp857': [0x3d, false],\n            'cp858': [0x13, false],\n            'cp860': [0x03, false],\n            'cp861': [0x38, false],\n            'cp862': [0x3e, false],\n            'cp863': [0x04, false],\n            'cp864': [0x1c, false],\n            'cp865': [0x05, false],\n            'cp866': [0x11, false],\n            'cp869': [0x42, false],\n            'cp936': [0xff, true],\n            'cp949': [0xfd, true],\n            'cp950': [0xfe, true],\n            'cp1252': [0x10, false],\n            'iso88596': [0x16, false],\n            'shiftjis': [0xfc, true],\n            'windows1250': [0x48, false],\n            'windows1251': [0x49, false],\n            'windows1252': [0x47, false],\n            'windows1253': [0x5a, false],\n            'windows1254': [0x5b, false],\n            'windows1255': [0x20, false],\n            'windows1256': [0x5c, false],\n            'windows1257': [0x19, false],\n            'windows1258': [0x5e, false],\n        };\n\n        let codepage;\n\n        if (!iconv.encodingExists(value)) {\n            throw new Error('Unknown codepage');\n        }\n\n        if (value in iconv.encodings) {\n            if (typeof iconv.encodings[value] === 'string') {\n                codepage = iconv.encodings[value];\n            } else {\n                codepage = value;\n            }\n        } else {\n            throw new Error('Unknown codepage');\n        }\n\n        if (typeof codepages[codepage] !== 'undefined') {\n            this._codepage = codepage;\n            this._state.hanzi = codepages[codepage][1];\n\n            this._queue([\n                0x1b, 0x74, codepages[codepage][0],\n            ]);\n        } else {\n            throw new Error('Codepage not supported by printer');\n        }\n\n        return this;\n    }\n\n    /**\n     * Print text\n     *\n     * @param  {string}   value  Text that needs to be printed\n     * @param  {number}   wrap   Wrap text after this many positions\n     * @return {object}          Return the object, for easy chaining commands\n     *\n     */\n    text(value, wrap) {\n        if (wrap) {\n            let w = linewrap(wrap, {lineBreak: '\\r\\n'});\n            value = w(value);\n        }\n\n        let bytes = this._encode(value);\n\n        if (this._state.hanzi) {\n            this._queue([\n                0x1c, 0x26, bytes, 0x1c, 0x2e,\n            ]);\n        } else {\n            this._queue([\n                bytes,\n            ]);\n        }\n\n        return this;\n    }\n\n    /**\n     * Print a newline\n     *\n     * @return {object}          Return the object, for easy chaining commands\n     *\n     */\n    newline() {\n        this._queue([\n            0x0a, 0x0d,\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Print text, followed by a newline\n     *\n     * @param  {string}   value  Text that needs to be printed\n     * @param  {number}   wrap   Wrap text after this many positions\n     * @return {object}          Return the object, for easy chaining commands\n     *\n     */\n    line(value, wrap) {\n        this.text(value, wrap);\n        this.newline();\n\n        return this;\n    }\n\n    /**\n     * Underline text\n     *\n     * @param  {boolean|number}   value  true to turn on underline, false to turn off, or 2 for double underline\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    underline(value) {\n        if (typeof value === 'undefined') {\n            value = ! this._state.underline;\n        }\n\n        this._state.underline = value;\n\n        this._queue([\n            0x1b, 0x2d, Number(value),\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Italic text\n     *\n     * @param  {boolean}          value  true to turn on italic, false to turn off\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    italic(value) {\n        if (typeof value === 'undefined') {\n            value = ! this._state.italic;\n        }\n\n        this._state.italic = value;\n\n        this._queue([\n            0x1b, 0x34, Number(value),\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Bold text\n     *\n     * @param  {boolean}          value  true to turn on bold, false to turn off, or 2 for double underline\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    bold(value) {\n        if (typeof value === 'undefined') {\n            value = ! this._state.bold;\n        }\n\n        this._state.bold = value;\n\n        this._queue([\n            0x1b, 0x45, Number(value),\n        ]);\n\n        return this;\n    }\n\n   /**\n     * Change text size\n     *\n     * @param  {string}          value   small or normal\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    size(value) {\n        if (value === 'small') {\n            value = 0x01;\n        } else {\n            value = 0x00;\n        }\n\n        this._queue([\n            0x1b, 0x4d, value,\n        ]);\n\n        return this;\n    }\n\n   /**\n     * Change text alignment\n     *\n     * @param  {string}          value   left, center or right\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    align(value) {\n        const alignments = {\n            'left': 0x00,\n            'center': 0x01,\n            'right': 0x02,\n        };\n\n        if (value in alignments) {\n            this._queue([\n                0x1b, 0x61, alignments[value],\n            ]);\n        } else {\n            throw new Error('Unknown alignment');\n        }\n\n        return this;\n    }\n\n    /**\n     * Barcode\n     *\n     * @param  {string}           value  the value of the barcode\n     * @param  {string}           symbology  the type of the barcode\n     * @param  {number}           height  height of the barcode\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    barcode(value, symbology, height) {\n        const symbologies = {\n            'upca': 0x00,\n            'upce': 0x01,\n            'ean13': 0x02,\n            'ean8': 0x03,\n            'coda39': 0x04,\n            'itf': 0x05,\n            'codabar': 0x06,\n        };\n\n        if (symbology in symbologies) {\n            let bytes = iconv.encode(value, 'ascii');\n\n            this._queue([\n                0x1d, 0x68, height,\n                0x1d, 0x77, symbology === 'code39' ? 0x02 : 0x03,\n                0x1d, 0x6b, symbologies[symbology],\n                bytes,\n                0x00,\n            ]);\n        } else {\n            throw new Error('Symbology not supported by printer');\n        }\n\n        return this;\n    }\n\n    /**\n     * QR code\n     *\n     * @param  {string}           value  the value of the qr code\n     * @param  {number}           model  model of the qrcode, either 1 or 2\n     * @param  {number}           size   size of the qrcode, a value between 1 and 8\n     * @param  {string}           errorlevel  the amount of error correction used, either 'l', 'm', 'q', 'h'\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    qrcode(value, model, size, errorlevel) {\n        /* Force printing the print buffer and moving to a new line */\n\n        this._queue([\n            0x0a,\n        ]);\n\n        /* Model */\n\n        const models = {\n            1: 0x31,\n            2: 0x32,\n        };\n\n        if (typeof model === 'undefined') {\n            model = 2;\n        }\n\n        if (model in models) {\n            this._queue([\n                0x1d, 0x28, 0x6b, 0x04, 0x00, 0x31, 0x41, models[model], 0x00,\n            ]);\n        } else {\n            throw new Error('Model must be 1 or 2');\n        }\n\n        /* Size */\n\n        if (typeof size === 'undefined') {\n            size = 6;\n        }\n\n        if (typeof size !== 'number') {\n            throw new Error('Size must be a number');\n        }\n\n        if (size < 1 || size > 8) {\n            throw new Error('Size must be between 1 and 8');\n        }\n\n        this._queue([\n            0x1d, 0x28, 0x6b, 0x03, 0x00, 0x31, 0x43, size,\n        ]);\n\n        /* Error level */\n\n        const errorlevels = {\n            'l': 0x30,\n            'm': 0x31,\n            'q': 0x32,\n            'h': 0x33,\n        };\n\n        if (typeof errorlevel === 'undefined') {\n            errorlevel = 'm';\n        }\n\n        if (errorlevel in errorlevels) {\n            this._queue([\n                0x1d, 0x28, 0x6b, 0x03, 0x00, 0x31, 0x45, errorlevels[errorlevel],\n            ]);\n        } else {\n            throw new Error('Error level must be l, m, q or h');\n        }\n\n        /* Data */\n\n        let bytes = iconv.encode(value, 'iso88591');\n        let length = bytes.length + 3;\n\n        this._queue([\n            0x1d, 0x28, 0x6b, length % 0xff, length / 0xff, 0x31, 0x50, 0x30, bytes,\n        ]);\n\n        /* Print QR code */\n\n        this._queue([\n            0x1d, 0x28, 0x6b, 0x03, 0x00, 0x31, 0x51, 0x30,\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Image\n     *\n     * @param  {object}         element  an element, like a canvas or image that needs to be printed\n     * @param  {number}         width  width of the image on the printer\n     * @param  {number}         height  height of the image on the printer\n     * @param  {string}         algorithm  the dithering algorithm for making the image black and white\n     * @param  {number}         threshold  threshold for the dithering algorithm\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    image(element, width, height, algorithm, threshold) {\n        if (width % 8 !== 0) {\n            throw new Error('Width must be a multiple of 8');\n        }\n\n        if (height % 8 !== 0) {\n            throw new Error('Height must be a multiple of 8');\n        }\n\n        if (typeof algorithm === 'undefined') {\n            algorithm = 'threshold';\n        }\n\n        if (typeof threshold === 'undefined') {\n            threshold = 128;\n        }\n\n        let canvas = createCanvas(width, height);\n        let context = canvas.getContext('2d');\n        context.drawImage(element, 0, 0, width, height);\n        let image = context.getImageData(0, 0, width, height);\n\n        image = Flatten.flatten(image, [0xff, 0xff, 0xff]);\n\n        switch (algorithm) {\n            case 'threshold': image = Dither.threshold(image, threshold); break;\n            case 'bayer': image = Dither.bayer(image, threshold); break;\n            case 'floydsteinberg': image = Dither.floydsteinberg(image); break;\n            case 'atkinson': image = Dither.atkinson(image); break;\n        }\n\n        let getPixel = (x, y) => image.data[((width * y) + x) * 4] > 0 ? 0 : 1;\n\n        let bytes = new Uint8Array((width * height) >> 3);\n\n        for (let y = 0; y < height; y++) {\n            for (let x = 0; x < width; x = x + 8) {\n                let i = (y * (width >> 3)) + (x >> 3);\n                bytes[i] =\n                    getPixel(x + 0, y) << 7 |\n                    getPixel(x + 1, y) << 6 |\n                    getPixel(x + 2, y) << 5 |\n                    getPixel(x + 3, y) << 4 |\n                    getPixel(x + 4, y) << 3 |\n                    getPixel(x + 5, y) << 2 |\n                    getPixel(x + 6, y) << 1 |\n                    getPixel(x + 7, y);\n            }\n        }\n\n        this._queue([\n            0x1d, 0x76, 0x30, 0x00,\n            (width >> 3) & 0xff, (((width >> 3) >> 8) & 0xff),\n            height & 0xff, ((height >> 8) & 0xff),\n            bytes,\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Cut paper\n     *\n     * @param  {string}          value   full or partial. When not specified a full cut will be assumed\n     * @return {object}                  Return the object, for easy chaining commands\n     *\n     */\n    cut(value) {\n        let data = 0x00;\n\n        if (value == 'partial') {\n            data = 0x01;\n        }\n\n        this._queue([\n            0x1d, 0x56, data,\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Beeper sound functionality\n     *\n     * @return {object}                  Return the object, for easy chaining commands\n     */\n    beeper() {\n        this._queue([\n            0x1b, 0x42, 0x05, 0x01,\n        ]);\n\n        return this;\n    }\n\n    /**\n     * Open cash drawer\n     *\n     * @return {object}                  Return the object, for easy chaining commands\n     */\n    openCashDrawer() {\n        this._queue([\n            0x1b, 0x70, 0x00,\n        ]);\n\n        return this;\n    }\n\n\n    /**\n     * Add raw printer commands\n     *\n     * @param  {array}           data   raw bytes to be included\n     * @return {object}          Return the object, for easy chaining commands\n     *\n     */\n    raw(data) {\n        this._queue(data);\n\n        return this;\n    }\n\n    /**\n     * Encode all previous commands\n     *\n     * @return {Uint8Array}         Return the encoded bytes\n     *\n     */\n    encode() {\n        let length = 0;\n\n        this._buffer.forEach((item) => {\n            if (typeof item === 'number') {\n                length++;\n            } else {\n                length += item.length;\n            }\n        });\n\n        let result = new Uint8Array(length);\n\n        let index = 0;\n\n        this._buffer.forEach((item) => {\n            if (typeof item === 'number') {\n                result[index] = item;\n                index++;\n            } else {\n                result.set(item, index);\n                index += item.length;\n            }\n        });\n\n        this._reset();\n\n        return result;\n    }\n}\n\nmodule.exports = EscPosEncoder;\n","\n// Presets\nvar presetMap = {\n    'html': {\n        skipScheme: 'html',\n        lineBreakScheme: 'html',\n        whitespace: 'collapse'\n    }\n};\n\n// lineBreak Schemes\nvar brPat = /<\\s*br(?:[\\s/]*|\\s[^>]*)>/gi;\nvar lineBreakSchemeMap = {\n    'unix': [/\\n/g, '\\n'],\n    'dos': [/\\r\\n/g, '\\r\\n'],\n    'mac': [/\\r/g, '\\r'],\n    'html': [brPat, '<br>'],\n    'xhtml': [brPat, '<br/>']\n};\n\n// skip Schemes\nvar skipSchemeMap = {\n    'ansi-color': /\\x1B\\[[^m]*m/g,\n    'html': /<[^>]*>/g,\n    'bbcode': /\\[[^]]*\\]/g\n};\n\nvar modeMap = {\n    'soft': 1,\n    'hard': 1\n};\n\nvar wsMap = {\n    'collapse': 1,\n    'default': 1,\n    'line': 1,\n    'all': 1\n};\n\nvar rlbMap = {\n    'all': 1,\n    'multi': 1,\n    'none': 1\n};\nvar rlbSMPat = /([sm])(\\d+)/;\n\nvar escapePat = /[-/\\\\^$*+?.()|[\\]{}]/g;\nfunction escapeRegExp(s) {\n    return s.replace(escapePat, '\\\\$&');\n}\n\nvar linewrap = module.exports = function (start, stop, params) {\n    if (typeof start === 'object') {\n        params = start;\n        start = params.start;\n        stop = params.stop;\n    }\n\n    if (typeof stop === 'object') {\n        params = stop;\n        start = start || params.start;\n        stop = undefined;\n    }\n\n    if (!stop) {\n        stop = start;\n        start = 0;\n    }\n\n    if (!params) { params = {}; }\n    // Supported options and default values.\n    var preset,\n        mode = 'soft',\n        whitespace = 'default',\n        tabWidth = 4,\n        skip, skipScheme, lineBreak, lineBreakScheme,\n        respectLineBreaks = 'all',\n        respectNum,\n        preservedLineIndent,\n        wrapLineIndent, wrapLineIndentBase;\n\n    var skipPat;\n    var lineBreakPat, lineBreakStr;\n    var multiLineBreakPat;\n    var preservedLinePrefix = '';\n    var wrapLineIndentPat, wrapLineInitPrefix = '';\n    var tabRepl;\n    var item, flags;\n    var i;\n\n    // First process presets, because these settings can be overwritten later.\n    preset = params.preset;\n    if (preset) {\n        if (!(preset instanceof Array)) {\n            preset = [preset];\n        }\n        for (i = 0; i < preset.length; i++) {\n            item = presetMap[preset[i]];\n            if (item) {\n                if (item.mode) {\n                    mode = item.mode;\n                }\n                if (item.whitespace) {\n                    whitespace = item.whitespace;\n                }\n                if (item.tabWidth !== undefined) {\n                    tabWidth = item.tabWidth;\n                }\n                if (item.skip) {\n                    skip = item.skip;\n                }\n                if (item.skipScheme) {\n                    skipScheme = item.skipScheme;\n                }\n                if (item.lineBreak) {\n                    lineBreak = item.lineBreak;\n                }\n                if (item.lineBreakScheme) {\n                    lineBreakScheme = item.lineBreakScheme;\n                }\n                if (item.respectLineBreaks) {\n                    respectLineBreaks = item.respectLineBreaks;\n                }\n                if (item.preservedLineIndent !== undefined) {\n                    preservedLineIndent = item.preservedLineIndent;\n                }\n                if (item.wrapLineIndent !== undefined) {\n                    wrapLineIndent = item.wrapLineIndent;\n                }\n                if (item.wrapLineIndentBase) {\n                    wrapLineIndentBase = item.wrapLineIndentBase;\n                }\n            } else {\n                throw new TypeError('preset must be one of \"' + Object.keys(presetMap).join('\", \"') + '\"');\n            }\n        }\n    }\n\n    if (params.mode) {\n        if (modeMap[params.mode]) {\n            mode = params.mode;\n        } else {\n            throw new TypeError('mode must be one of \"' + Object.keys(modeMap).join('\", \"') + '\"');\n        }\n    }\n    // Available options: 'collapse', 'default', 'line', and 'all'\n    if (params.whitespace) {\n        if (wsMap[params.whitespace]) {\n            whitespace = params.whitespace;\n        } else {\n            throw new TypeError('whitespace must be one of \"' + Object.keys(wsMap).join('\", \"') + '\"');\n        }\n    }\n\n    if (params.tabWidth !== undefined) {\n        if (parseInt(params.tabWidth, 10) >= 0) {\n            tabWidth = parseInt(params.tabWidth, 10);\n        } else {\n            throw new TypeError('tabWidth must be a non-negative integer');\n        }\n    }\n    tabRepl = new Array(tabWidth + 1).join(' ');\n\n    // Available options: 'all', 'multi', 'm\\d+', 's\\d+', 'none'\n    if (params.respectLineBreaks) {\n        if (rlbMap[params.respectLineBreaks] || rlbSMPat.test(params.respectLineBreaks)) {\n            respectLineBreaks = params.respectLineBreaks;\n        } else {\n            throw new TypeError('respectLineBreaks must be one of \"' + Object.keys(rlbMap).join('\", \"') +\n                                '\", \"m<num>\", \"s<num>\"');\n        }\n    }\n    // After these conversions, now we have 4 options in `respectLineBreaks`:\n    // 'all', 'none', 'm' and 's'.\n    // `respectNum` is applicable iff `respectLineBreaks` is either 'm' or 's'.\n    if (respectLineBreaks === 'multi') {\n        respectLineBreaks = 'm';\n        respectNum = 2;\n    } else if (!rlbMap[respectLineBreaks]) {\n        var match = rlbSMPat.exec(respectLineBreaks);\n        respectLineBreaks = match[1];\n        respectNum = parseInt(match[2], 10);\n    }\n\n    if (params.preservedLineIndent !== undefined) {\n        if (parseInt(params.preservedLineIndent, 10) >= 0) {\n            preservedLineIndent = parseInt(params.preservedLineIndent, 10);\n        } else {\n            throw new TypeError('preservedLineIndent must be a non-negative integer');\n        }\n    }\n\n    if (preservedLineIndent > 0) {\n        preservedLinePrefix = new Array(preservedLineIndent + 1).join(' ');\n    }\n\n    if (params.wrapLineIndent !== undefined) {\n        if (!isNaN(parseInt(params.wrapLineIndent, 10))) {\n            wrapLineIndent = parseInt(params.wrapLineIndent, 10);\n        } else {\n            throw new TypeError('wrapLineIndent must be an integer');\n        }\n    }\n    if (params.wrapLineIndentBase) {\n        wrapLineIndentBase = params.wrapLineIndentBase;\n    }\n\n    if (wrapLineIndentBase) {\n        if (wrapLineIndent === undefined) {\n            throw new TypeError('wrapLineIndent must be specified when wrapLineIndentBase is specified');\n        }\n        if (wrapLineIndentBase instanceof RegExp) {\n            wrapLineIndentPat = wrapLineIndentBase;\n        } else if (typeof wrapLineIndentBase === 'string') {\n            wrapLineIndentPat = new RegExp(escapeRegExp(wrapLineIndentBase));\n        } else {\n            throw new TypeError('wrapLineIndentBase must be either a RegExp object or a string');\n        }\n    } else if (wrapLineIndent > 0) {\n        wrapLineInitPrefix = new Array(wrapLineIndent + 1).join(' ');\n    } else if (wrapLineIndent < 0) {\n        throw new TypeError('wrapLineIndent must be non-negative when a base is not specified');\n    }\n\n    // NOTE: For the two RegExps `skipPat` and `lineBreakPat` that can be specified\n    //       by the user:\n    //       1. We require them to be \"global\", so we have to convert them to global\n    //          if the user specifies a non-global regex.\n    //       2. We cannot call `split()` on them, because they may or may not contain\n    //          capturing parentheses which affect the output of `split()`.\n\n    // Precedence: Regex = Str > Scheme\n    if (params.skipScheme) {\n        if (skipSchemeMap[params.skipScheme]) {\n            skipScheme = params.skipScheme;\n        } else {\n            throw new TypeError('skipScheme must be one of \"' + Object.keys(skipSchemeMap).join('\", \"') + '\"');\n        }\n    }\n    if (params.skip) {\n        skip = params.skip;\n    }\n\n    if (skip) {\n        if (skip instanceof RegExp) {\n            skipPat = skip;\n            if (!skipPat.global) {\n                flags = 'g';\n                if (skipPat.ignoreCase) { flags += 'i'; }\n                if (skipPat.multiline) { flags += 'm'; }\n                skipPat = new RegExp(skipPat.source, flags);\n            }\n        } else if (typeof skip === 'string') {\n            skipPat = new RegExp(escapeRegExp(skip), 'g');\n        } else {\n            throw new TypeError('skip must be either a RegExp object or a string');\n        }\n    }\n    if (!skipPat && skipScheme) {\n        skipPat = skipSchemeMap[skipScheme];\n    }\n\n    // Precedence:\n    // - for lineBreakPat: Regex > Scheme > Str\n    // - for lineBreakStr: Str > Scheme > Regex\n    if (params.lineBreakScheme) {\n        if (lineBreakSchemeMap[params.lineBreakScheme]) {\n            lineBreakScheme = params.lineBreakScheme;\n        } else {\n            throw new TypeError('lineBreakScheme must be one of \"' + Object.keys(lineBreakSchemeMap).join('\", \"') + '\"');\n        }\n    }\n    if (params.lineBreak) {\n        lineBreak = params.lineBreak;\n    }\n\n    if (lineBreakScheme) {\n        // Supported schemes: 'unix', 'dos', 'mac', 'html', 'xhtml'\n        item = lineBreakSchemeMap[lineBreakScheme];\n        if (item) {\n            lineBreakPat = item[0];\n            lineBreakStr = item[1];\n        }\n    }\n    if (lineBreak) {\n        if (lineBreak instanceof Array) {\n            if (lineBreak.length === 1) {\n                lineBreak = lineBreak[0];\n            } else if (lineBreak.length >= 2) {\n                if (lineBreak[0] instanceof RegExp) {\n                    lineBreakPat = lineBreak[0];\n                    if (typeof lineBreak[1] === 'string') {\n                        lineBreakStr = lineBreak[1];\n                    }\n                } else if (lineBreak[1] instanceof RegExp) {\n                    lineBreakPat = lineBreak[1];\n                    if (typeof lineBreak[0] === 'string') {\n                        lineBreakStr = lineBreak[0];\n                    }\n                } else if (typeof lineBreak[0] === 'string' && typeof lineBreak[1] === 'string') {\n                    lineBreakPat = new RegExp(escapeRegExp(lineBreak[0]), 'g');\n                    lineBreakStr = lineBreak[1];\n                } else {\n                    lineBreak = lineBreak[0];\n                }\n            }\n        }\n        if (typeof lineBreak === 'string') {\n            lineBreakStr = lineBreak;\n            if (!lineBreakPat) {\n                lineBreakPat = new RegExp(escapeRegExp(lineBreak), 'g');\n            }\n        } else if (lineBreak instanceof RegExp) {\n            lineBreakPat = lineBreak;\n        } else if (!(lineBreak instanceof Array)) {\n            throw new TypeError('lineBreak must be a RegExp object, a string, or an array consisted of a RegExp object and a string');\n        }\n    }\n    // Only assign defaults when `lineBreakPat` is not assigned.\n    // So if `params.lineBreak` is a RegExp, we don't have a value in `lineBreakStr`\n    // yet. We will try to get the value from the input string, and if failed, we\n    // will throw an exception.\n    if (!lineBreakPat) {\n        lineBreakPat = /\\n/g;\n        lineBreakStr = '\\n';\n    }\n\n    // Create `multiLineBreakPat` based on `lineBreakPat`, that matches strings\n    // consisted of one or more line breaks and zero or more whitespaces.\n    // Also convert `lineBreakPat` to global if not already so.\n    flags = 'g';\n    if (lineBreakPat.ignoreCase) { flags += 'i'; }\n    if (lineBreakPat.multiline) { flags += 'm'; }\n    multiLineBreakPat = new RegExp('\\\\s*(?:' + lineBreakPat.source + ')(?:' +\n                                   lineBreakPat.source + '|\\\\s)*', flags);\n    if (!lineBreakPat.global) {\n        lineBreakPat = new RegExp(lineBreakPat.source, flags);\n    }\n\n    // Initialize other useful variables.\n    var re = mode === 'hard' ? /\\b/ : /(\\S+\\s+)/;\n    var prefix = new Array(start + 1).join(' ');\n    var wsStrip = (whitespace === 'default' || whitespace === 'collapse'),\n        wsCollapse = (whitespace === 'collapse'),\n        wsLine = (whitespace === 'line'),\n        wsAll = (whitespace === 'all');\n    var tabPat = /\\t/g,\n        collapsePat = /  +/g,\n        pPat = /^\\s+/,\n        tPat = /\\s+$/,\n        nonWsPat = /\\S/,\n        wsPat = /\\s/;\n    var wrapLen = stop - start;\n\n    return function (text) {\n        text = text.toString().replace(tabPat, tabRepl);\n\n        var match;\n        if (!lineBreakStr) {\n            // Try to get lineBreakStr from `text`\n            lineBreakPat.lastIndex = 0;\n            match = lineBreakPat.exec(text);\n            if (match) {\n                lineBreakStr = match[0];\n            } else {\n                throw new TypeError('Line break string for the output not specified');\n            }\n        }\n\n        // text -> blocks; each bloc -> segments; each segment -> chunks\n        var blocks, base = 0;\n        var mo, arr, b, res;\n        // Split `text` by line breaks.\n        blocks = [];\n        multiLineBreakPat.lastIndex = 0;\n        match = multiLineBreakPat.exec(text);\n        while(match) {\n            blocks.push(text.substring(base, match.index));\n\n            if (respectLineBreaks !== 'none') {\n                arr = [];\n                b = 0;\n                lineBreakPat.lastIndex = 0;\n                mo = lineBreakPat.exec(match[0]);\n                while(mo) {\n                    arr.push(match[0].substring(b, mo.index));\n                    b = mo.index + mo[0].length;\n                    mo = lineBreakPat.exec(match[0]);\n                }\n                arr.push(match[0].substring(b));\n                blocks.push({type: 'break', breaks: arr});\n            } else {\n                // Strip line breaks and insert spaces when necessary.\n                if (wsCollapse) {\n                    res = ' ';\n                } else {\n                    res = match[0].replace(lineBreakPat, '');\n                }\n                blocks.push({type: 'break', remaining: res});\n            }\n\n            base = match.index + match[0].length;\n            match = multiLineBreakPat.exec(text);\n        }\n        blocks.push(text.substring(base));\n\n        var i, j, k;\n        var segments;\n        if (skipPat) {\n            segments = [];\n            for (i = 0; i < blocks.length; i++) {\n                var bloc = blocks[i];\n                if (typeof bloc !== 'string') {\n                    // This is an object.\n                    segments.push(bloc);\n                } else {\n                    base = 0;\n                    skipPat.lastIndex = 0;\n                    match = skipPat.exec(bloc);\n                    while(match) {\n                        segments.push(bloc.substring(base, match.index));\n                        segments.push({type: 'skip', value: match[0]});\n                        base = match.index + match[0].length;\n                        match = skipPat.exec(bloc);\n                    }\n                    segments.push(bloc.substring(base));\n                }\n            }\n        } else {\n            segments = blocks;\n        }\n\n        var chunks = [];\n        for (i = 0; i < segments.length; i++) {\n            var segment = segments[i];\n            if (typeof segment !== 'string') {\n                // This is an object.\n                chunks.push(segment);\n            } else {\n                if (wsCollapse) {\n                    segment = segment.replace(collapsePat, ' ');\n                }\n\n                var parts = segment.split(re),\n                    acc = [];\n\n                for (j = 0; j < parts.length; j++) {\n                    var x = parts[j];\n                    if (mode === 'hard') {\n                        for (k = 0; k < x.length; k += wrapLen) {\n                            acc.push(x.slice(k, k + wrapLen));\n                        }\n                    }\n                    else { acc.push(x); }\n                }\n                chunks = chunks.concat(acc);\n            }\n        }\n\n        var curLine = 0,\n            curLineLength = start + preservedLinePrefix.length,\n            lines = [ prefix + preservedLinePrefix ],\n            // Holds the \"real length\" (excluding trailing whitespaces) of the\n            // current line if it exceeds `stop`, otherwise 0.\n            // ONLY USED when `wsAll` is true, in `finishOffCurLine()`.\n            bulge = 0,\n            // `cleanLine` is true iff we are at the beginning of an output line. By\n            // \"beginning\" we mean it doesn't contain any non-whitespace char yet.\n            // But its `curLineLength` can be greater than `start`, or even possibly\n            // be greater than `stop`, if `wsStrip` is false.\n            //\n            // Note that a \"clean\" line can still contain skip strings, in addition\n            // to whitespaces.\n            //\n            // This variable is used to allow us strip preceding whitespaces when\n            // `wsStrip` is true, or `wsLine` is true and `preservedLine` is false.\n            cleanLine = true,\n            // `preservedLine` is true iff we are in a preserved input line.\n            //\n            // It's used when `wsLine` is true to (combined with `cleanLine`) decide\n            // whether a whitespace is at the beginning of a preserved input line and\n            // should not be stripped.\n            preservedLine = true,\n            // The current indent prefix for wrapped lines.\n            wrapLinePrefix = wrapLineInitPrefix,\n            remnant;\n\n        // Always returns '' if `beforeHardBreak` is true.\n        //\n        // Assumption: Each call of this function is always followed by a `lines.push()` call.\n        //\n        // This function can change the status of `cleanLine`, but we don't modify the value of\n        // `cleanLine` in this function. It's fine because `cleanLine` will be set to the correct\n        // value after the `lines.push()` call following this function call. We also don't update\n        // `curLineLength` when pushing a new line and it's safe for the same reason.\n        function finishOffCurLine(beforeHardBreak) {\n            var str = lines[curLine],\n                idx, ln, rBase;\n\n            if (!wsAll) {\n                // Strip all trailing whitespaces past `start`.\n                idx = str.length - 1;\n                while (idx >= start && str[idx] === ' ') { idx--; }\n                while (idx >= start && wsPat.test(str[idx])) { idx--; }\n                idx++;\n\n                if (idx !== str.length) {\n                    lines[curLine] = str.substring(0, idx);\n                }\n\n                if (preservedLine && cleanLine && wsLine && curLineLength > stop) {\n                    // Add the remnants to the next line, just like when `wsAll` is true.\n                    rBase = str.length - (curLineLength - stop);\n                    if (rBase < idx) {\n                        // We didn't reach `stop` when stripping due to a bulge.\n                        rBase = idx;\n                    }\n                }\n            } else {\n                // Strip trailing whitespaces exceeding stop.\n                if (curLineLength > stop) {\n                    bulge = bulge || stop;\n                    rBase = str.length - (curLineLength - bulge);\n                    lines[curLine] = str.substring(0,  rBase);\n                }\n                bulge = 0;\n            }\n\n            // Bug: the current implementation of `wrapLineIndent` is buggy: we are not\n            // taking the extra space occupied by the additional indentation into account\n            // when wrapping the line. For example, in \"hard\" mode, we should hard-wrap\n            // long words at `wrapLen - wrapLinePrefix.length` instead of `wrapLen`;\n            // and remnants should also be wrapped at `wrapLen - wrapLinePrefix.length`.\n            if (preservedLine) {\n                // This is a preserved line, and the next output line isn't a\n                // preserved line.\n                preservedLine = false;\n                if (wrapLineIndentPat) {\n                    idx = lines[curLine].substring(start).search(wrapLineIndentPat);\n                    if (idx >= 0 && idx + wrapLineIndent > 0) {\n                        wrapLinePrefix = new Array(idx + wrapLineIndent + 1).join(' ');\n                    } else {\n                        wrapLinePrefix = '';\n                    }\n                }\n            }\n\n            // Some remnants are left to the next line.\n            if (rBase) {\n                while (rBase + wrapLen < str.length) {\n                    if (wsAll) {\n                        ln = str.substring(rBase, rBase + wrapLen);\n                        lines.push(prefix + wrapLinePrefix + ln);\n                    } else {\n                        lines.push(prefix + wrapLinePrefix);\n                    }\n                    rBase += wrapLen;\n                    curLine++;\n                }\n                if (beforeHardBreak) {\n                    if (wsAll) {\n                        ln = str.substring(rBase);\n                        lines.push(prefix + wrapLinePrefix + ln);\n                    } else {\n                        lines.push(prefix + wrapLinePrefix);\n                    }\n                    curLine++;\n                } else {\n                    ln = str.substring(rBase);\n                    return wrapLinePrefix + ln;\n                }\n            }\n\n            return '';\n        }\n\n        for (i = 0; i < chunks.length; i++) {\n            var chunk = chunks[i];\n\n            if (chunk === '') { continue; }\n\n            if (typeof chunk !== 'string') {\n                if (chunk.type === 'break') {\n                    // This is one or more line breaks.\n                    // Each entry in `breaks` is just zero or more whitespaces.\n                    if (respectLineBreaks !== 'none') {\n                        // Note that if `whitespace` is \"collapse\", we still need\n                        // to collapse whitespaces in entries of `breaks`.\n                        var breaks = chunk.breaks;\n                        var num = breaks.length - 1;\n\n                        if (respectLineBreaks === 's') {\n                            // This is the most complex scenario. We have to check\n                            // the line breaks one by one.\n                            for (j = 0; j < num; j++) {\n                                if (breaks[j+1].length < respectNum) {\n                                    // This line break should be stripped.\n                                    if (wsCollapse) {\n                                        breaks[j+1] = ' ';\n                                    } else {\n                                        breaks[j+1] = breaks[j] + breaks[j+1];\n                                    }\n                                } else {\n                                    // This line break should be preserved.\n                                    // First finish off the current line.\n                                    if (wsAll) {\n                                        lines[curLine] += breaks[j];\n                                        curLineLength += breaks[j].length;\n                                    }\n                                    finishOffCurLine(true);\n\n                                    lines.push(prefix + preservedLinePrefix);\n                                    curLine++;\n                                    curLineLength = start + preservedLinePrefix.length;\n\n                                    preservedLine = cleanLine = true;\n                                }\n                            }\n                            // We are adding to either the existing line (if no line break\n                            // is qualified for preservance) or a \"new\" line.\n                            if (!cleanLine || wsAll || (wsLine && preservedLine)) {\n                                if (wsCollapse || (!cleanLine && breaks[num] === '')) {\n                                    breaks[num] = ' ';\n                                }\n                                lines[curLine] += breaks[num];\n                                curLineLength += breaks[num].length;\n                            }\n                        } else if (respectLineBreaks === 'm' && num < respectNum) {\n                            // These line breaks should be stripped.\n                            if (!cleanLine || wsAll || (wsLine && preservedLine)) {\n                                if (wsCollapse) {\n                                    chunk = ' ';\n                                } else {\n                                    chunk = breaks.join('');\n                                    if (!cleanLine && chunk === '') {\n                                        chunk = ' ';\n                                    }\n                                }\n                                lines[curLine] += chunk;\n                                curLineLength += chunk.length;\n                            }\n                        } else {    // 'all' || ('m' && num >= respectNum)\n                            // These line breaks should be preserved.\n                            if (wsStrip) {\n                                // Finish off the current line.\n                                finishOffCurLine(true);\n\n                                for (j = 0; j < num; j++) {\n                                    lines.push(prefix + preservedLinePrefix);\n                                    curLine++;\n                                }\n\n                                curLineLength = start + preservedLinePrefix.length;\n                                preservedLine = cleanLine = true;\n\n                            } else {\n                                if (wsAll || (preservedLine && cleanLine)) {\n                                    lines[curLine] += breaks[0];\n                                    curLineLength += breaks[0].length;\n                                }\n\n                                for (j = 0; j < num; j++) {\n                                    // Finish off the current line.\n                                    finishOffCurLine(true);\n\n                                    lines.push(prefix + preservedLinePrefix + breaks[j+1]);\n                                    curLine++;\n                                    curLineLength = start + preservedLinePrefix.length + breaks[j+1].length;\n\n                                    preservedLine = cleanLine = true;\n                                }\n                            }\n                        }\n                    } else {\n                        // These line breaks should be stripped.\n                        if (!cleanLine || wsAll || (wsLine && preservedLine)) {\n                            chunk = chunk.remaining;\n\n                            // Bug: If `wsAll` is true, `cleanLine` is false, and `chunk`\n                            // is '', we insert a space to replace the line break. This\n                            // space will be preserved even if we are at the end of an\n                            // output line, which is wrong behavior. However, I'm not\n                            // sure it's worth it to fix this edge case.\n                            if (wsCollapse || (!cleanLine && chunk === '')) {\n                                chunk = ' ';\n                            }\n                            lines[curLine] += chunk;\n                            curLineLength += chunk.length;\n                        }\n                    }\n                } else if (chunk.type === 'skip') {\n                    // This is a skip string.\n                    // Assumption: skip strings don't end with whitespaces.\n                    if (curLineLength > stop) {\n                        remnant = finishOffCurLine(false);\n\n                        lines.push(prefix + wrapLinePrefix);\n                        curLine++;\n                        curLineLength = start + wrapLinePrefix.length;\n\n                        if (remnant) {\n                            lines[curLine] += remnant;\n                            curLineLength += remnant.length;\n                        }\n\n                        cleanLine = true;\n                    }\n                    lines[curLine] += chunk.value;\n                }\n                continue;\n            }\n\n            var chunk2;\n            while (1) {\n                chunk2 = undefined;\n                if (curLineLength + chunk.length > stop &&\n                        curLineLength + (chunk2 = chunk.replace(tPat, '')).length > stop &&\n                        chunk2 !== '' &&\n                        curLineLength > start) {\n                    // This line is full, add `chunk` to the next line\n                    remnant = finishOffCurLine(false);\n\n                    lines.push(prefix + wrapLinePrefix);\n                    curLine++;\n                    curLineLength = start + wrapLinePrefix.length;\n\n                    if (remnant) {\n                        lines[curLine] += remnant;\n                        curLineLength += remnant.length;\n                        cleanLine = true;\n                        continue;\n                    }\n\n                    if (wsStrip || (wsLine && !(preservedLine && cleanLine))) {\n                        chunk = chunk.replace(pPat, '');\n                    }\n                    cleanLine = false;\n\n                } else {\n                    // Add `chunk` to this line\n                    if (cleanLine) {\n                        if (wsStrip || (wsLine && !(preservedLine && cleanLine))) {\n                            chunk = chunk.replace(pPat, '');\n                            if (chunk !== '') {\n                                cleanLine = false;\n                            }\n                        } else {\n                            if (nonWsPat.test(chunk)) {\n                                cleanLine = false;\n                            }\n                        }\n                    }\n                }\n                break;\n            }\n            if (wsAll && chunk2 && curLineLength + chunk2.length > stop) {\n                bulge = curLineLength + chunk2.length;\n            }\n            lines[curLine] += chunk;\n            curLineLength += chunk.length;\n        }\n        // Finally, finish off the last line.\n        finishOffCurLine(true);\n        return lines.join(lineBreakStr);\n    };\n};\n\nlinewrap.soft = linewrap;\n\nlinewrap.hard = function (/*start, stop, params*/) {\n    var args = [].slice.call(arguments);\n    var last = args.length - 1;\n    if (typeof args[last] === 'object') {\n        args[last].mode = 'hard';\n    } else {\n        args.push({ mode : 'hard' });\n    }\n    return linewrap.apply(null, args);\n};\n\nlinewrap.wrap = function(text/*, start, stop, params*/) {\n    var args = [].slice.call(arguments);\n    args.shift();\n    return linewrap.apply(null, args)(text);\n};\n","\"use strict\";\n\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\nmodule.exports = {\n  \"437\": \"cp437\",\n  \"737\": \"cp737\",\n  \"775\": \"cp775\",\n  \"850\": \"cp850\",\n  \"852\": \"cp852\",\n  \"855\": \"cp855\",\n  \"856\": \"cp856\",\n  \"857\": \"cp857\",\n  \"858\": \"cp858\",\n  \"860\": \"cp860\",\n  \"861\": \"cp861\",\n  \"862\": \"cp862\",\n  \"863\": \"cp863\",\n  \"864\": \"cp864\",\n  \"865\": \"cp865\",\n  \"866\": \"cp866\",\n  \"869\": \"cp869\",\n  \"874\": \"windows874\",\n  \"922\": \"cp922\",\n  \"1046\": \"cp1046\",\n  \"1124\": \"cp1124\",\n  \"1125\": \"cp1125\",\n  \"1129\": \"cp1129\",\n  \"1133\": \"cp1133\",\n  \"1161\": \"cp1161\",\n  \"1162\": \"cp1162\",\n  \"1163\": \"cp1163\",\n  \"1250\": \"windows1250\",\n  \"1251\": \"windows1251\",\n  \"1252\": \"windows1252\",\n  \"1253\": \"windows1253\",\n  \"1254\": \"windows1254\",\n  \"1255\": \"windows1255\",\n  \"1256\": \"windows1256\",\n  \"1257\": \"windows1257\",\n  \"1258\": \"windows1258\",\n  \"28591\": \"iso88591\",\n  \"28592\": \"iso88592\",\n  \"28593\": \"iso88593\",\n  \"28594\": \"iso88594\",\n  \"28595\": \"iso88595\",\n  \"28596\": \"iso88596\",\n  \"28597\": \"iso88597\",\n  \"28598\": \"iso88598\",\n  \"28599\": \"iso88599\",\n  \"28600\": \"iso885910\",\n  \"28601\": \"iso885911\",\n  \"28603\": \"iso885913\",\n  \"28604\": \"iso885914\",\n  \"28605\": \"iso885915\",\n  \"28606\": \"iso885916\",\n  \"windows874\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win874\": \"windows874\",\n  \"cp874\": \"windows874\",\n  \"windows1250\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1250\": \"windows1250\",\n  \"cp1250\": \"windows1250\",\n  \"windows1251\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1251\": \"windows1251\",\n  \"cp1251\": \"windows1251\",\n  \"windows1252\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1252\": \"windows1252\",\n  \"cp1252\": \"windows1252\",\n  \"windows1253\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1253\": \"windows1253\",\n  \"cp1253\": \"windows1253\",\n  \"windows1254\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1254\": \"windows1254\",\n  \"cp1254\": \"windows1254\",\n  \"windows1255\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1255\": \"windows1255\",\n  \"cp1255\": \"windows1255\",\n  \"windows1256\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1256\": \"windows1256\",\n  \"cp1256\": \"windows1256\",\n  \"windows1257\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1257\": \"windows1257\",\n  \"cp1257\": \"windows1257\",\n  \"windows1258\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1258\": \"windows1258\",\n  \"cp1258\": \"windows1258\",\n  \"iso88591\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28591\": \"iso88591\",\n  \"iso88592\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28592\": \"iso88592\",\n  \"iso88593\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28593\": \"iso88593\",\n  \"iso88594\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28594\": \"iso88594\",\n  \"iso88595\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28595\": \"iso88595\",\n  \"iso88596\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28596\": \"iso88596\",\n  \"iso88597\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28597\": \"iso88597\",\n  \"iso88598\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28598\": \"iso88598\",\n  \"iso88599\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28599\": \"iso88599\",\n  \"iso885910\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28600\": \"iso885910\",\n  \"iso885911\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28601\": \"iso885911\",\n  \"iso885913\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28603\": \"iso885913\",\n  \"iso885914\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28604\": \"iso885914\",\n  \"iso885915\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28605\": \"iso885915\",\n  \"iso885916\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28606\": \"iso885916\",\n  \"cp437\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm437\": \"cp437\",\n  \"csibm437\": \"cp437\",\n  \"cp737\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm737\": \"cp737\",\n  \"csibm737\": \"cp737\",\n  \"cp775\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm775\": \"cp775\",\n  \"csibm775\": \"cp775\",\n  \"cp850\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm850\": \"cp850\",\n  \"csibm850\": \"cp850\",\n  \"cp852\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm852\": \"cp852\",\n  \"csibm852\": \"cp852\",\n  \"cp855\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm855\": \"cp855\",\n  \"csibm855\": \"cp855\",\n  \"cp856\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm856\": \"cp856\",\n  \"csibm856\": \"cp856\",\n  \"cp857\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm857\": \"cp857\",\n  \"csibm857\": \"cp857\",\n  \"cp858\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm858\": \"cp858\",\n  \"csibm858\": \"cp858\",\n  \"cp860\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm860\": \"cp860\",\n  \"csibm860\": \"cp860\",\n  \"cp861\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm861\": \"cp861\",\n  \"csibm861\": \"cp861\",\n  \"cp862\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm862\": \"cp862\",\n  \"csibm862\": \"cp862\",\n  \"cp863\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm863\": \"cp863\",\n  \"csibm863\": \"cp863\",\n  \"cp864\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"ibm864\": \"cp864\",\n  \"csibm864\": \"cp864\",\n  \"cp865\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm865\": \"cp865\",\n  \"csibm865\": \"cp865\",\n  \"cp866\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm866\": \"cp866\",\n  \"csibm866\": \"cp866\",\n  \"cp869\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm869\": \"cp869\",\n  \"csibm869\": \"cp869\",\n  \"cp922\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm922\": \"cp922\",\n  \"csibm922\": \"cp922\",\n  \"cp1046\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1046\": \"cp1046\",\n  \"csibm1046\": \"cp1046\",\n  \"cp1124\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1124\": \"cp1124\",\n  \"csibm1124\": \"cp1124\",\n  \"cp1125\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1125\": \"cp1125\",\n  \"csibm1125\": \"cp1125\",\n  \"cp1129\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1129\": \"cp1129\",\n  \"csibm1129\": \"cp1129\",\n  \"cp1133\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1133\": \"cp1133\",\n  \"csibm1133\": \"cp1133\",\n  \"cp1161\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1161\": \"cp1161\",\n  \"csibm1161\": \"cp1161\",\n  \"cp1162\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1162\": \"cp1162\",\n  \"csibm1162\": \"cp1162\",\n  \"cp1163\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1163\": \"cp1163\",\n  \"csibm1163\": \"cp1163\",\n  \"maccroatian\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maccyrillic\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macgreek\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maciceland\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macroman\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macromania\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macthai\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macturkish\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macukraine\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8r\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8u\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8ru\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8t\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"armscii8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \")(.,-\"\n  },\n  \"rk1048\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tcvn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0003\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"georgianacademy\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"georgianps\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"pt154\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"viscii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0003\\u0004\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0015\\u0016\\u0017\\u0018\\u001a\\u001b\\u001c\\u001d\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"iso646cn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"iso646jp\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"hproman8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macintosh\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ascii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tis620\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  }\n}","/* globals document, ImageData */\n\nconst parseFont = require('./lib/parse-font')\n\nexports.parseFont = parseFont\n\nexports.createCanvas = function (width, height) {\n  return Object.assign(document.createElement('canvas'), { width: width, height: height })\n}\n\nexports.createImageData = function (array, width, height) {\n  // Browser implementation of ImageData looks at the number of arguments passed\n  switch (arguments.length) {\n    case 0: return new ImageData()\n    case 1: return new ImageData(array)\n    case 2: return new ImageData(array, width)\n    default: return new ImageData(array, width, height)\n  }\n}\n\nexports.loadImage = function (src, options) {\n  return new Promise(function (resolve, reject) {\n    const image = Object.assign(document.createElement('img'), options)\n\n    function cleanup () {\n      image.onload = null\n      image.onerror = null\n    }\n\n    image.onload = function () { cleanup(); resolve(image) }\n    image.onerror = function () { cleanup(); reject(new Error('Failed to load the image \"' + src + '\"')) }\n\n    image.src = src\n  })\n}\n","\"use strict\";\n\n// Some environments don't have global Buffer (e.g. React Native).\n// Solution would be installing npm modules \"buffer\" and \"stream\" explicitly.\nvar Buffer = require(\"safer-buffer\").Buffer;\n\nvar bomHandling = require(\"./bom-handling\"),\n    iconv = module.exports;\n\n// All codecs and aliases are kept here, keyed by encoding name/alias.\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\niconv.encodings = null;\n\n// Characters emitted in case of error.\niconv.defaultCharUnicode = '';\niconv.defaultCharSingleByte = '?';\n\n// Public API.\niconv.encode = function encode(str, encoding, options) {\n    str = \"\" + (str || \"\"); // Ensure string.\n\n    var encoder = iconv.getEncoder(encoding, options);\n\n    var res = encoder.write(str);\n    var trail = encoder.end();\n    \n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\n}\n\niconv.decode = function decode(buf, encoding, options) {\n    if (typeof buf === 'string') {\n        if (!iconv.skipDecodeWarning) {\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\n            iconv.skipDecodeWarning = true;\n        }\n\n        buf = Buffer.from(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\n    }\n\n    var decoder = iconv.getDecoder(encoding, options);\n\n    var res = decoder.write(buf);\n    var trail = decoder.end();\n\n    return trail ? (res + trail) : res;\n}\n\niconv.encodingExists = function encodingExists(enc) {\n    try {\n        iconv.getCodec(enc);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Legacy aliases to convert functions\niconv.toEncoding = iconv.encode;\niconv.fromEncoding = iconv.decode;\n\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\niconv._codecDataCache = {};\niconv.getCodec = function getCodec(encoding) {\n    if (!iconv.encodings)\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\n    \n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    var enc = iconv._canonicalizeEncoding(encoding);\n\n    // Traverse iconv.encodings to find actual codec.\n    var codecOptions = {};\n    while (true) {\n        var codec = iconv._codecDataCache[enc];\n        if (codec)\n            return codec;\n\n        var codecDef = iconv.encodings[enc];\n\n        switch (typeof codecDef) {\n            case \"string\": // Direct alias to other encoding.\n                enc = codecDef;\n                break;\n\n            case \"object\": // Alias with options. Can be layered.\n                for (var key in codecDef)\n                    codecOptions[key] = codecDef[key];\n\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n                \n                enc = codecDef.type;\n                break;\n\n            case \"function\": // Codec itself.\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\n                // It'll be called only once (for each different options object).\n                codec = new codecDef(codecOptions, iconv);\n\n                iconv._codecDataCache[codecOptions.encodingName] = codec; // Save it to be reused later.\n                return codec;\n\n            default:\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\n        }\n    }\n}\n\niconv._canonicalizeEncoding = function(encoding) {\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    return (''+encoding).toLowerCase().replace(/:\\d{4}$|[^0-9a-z]/g, \"\");\n}\n\niconv.getEncoder = function getEncoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        encoder = new codec.encoder(options, codec);\n\n    if (codec.bomAware && options && options.addBOM)\n        encoder = new bomHandling.PrependBOM(encoder, options);\n\n    return encoder;\n}\n\niconv.getDecoder = function getDecoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        decoder = new codec.decoder(options, codec);\n\n    if (codec.bomAware && !(options && options.stripBOM === false))\n        decoder = new bomHandling.StripBOM(decoder, options);\n\n    return decoder;\n}\n\n\n// Load extensions in Node. All of them are omitted in Browserify build via 'browser' field in package.json.\nvar nodeVer = typeof process !== 'undefined' && process.versions && process.versions.node;\nif (nodeVer) {\n\n    // Load streaming support in Node v0.10+\n    var nodeVerArr = nodeVer.split(\".\").map(Number);\n    if (nodeVerArr[0] > 0 || nodeVerArr[1] >= 10) {\n        require(\"./streams\")(iconv);\n    }\n\n    // Load Node primitive extensions.\n    require(\"./extend-node\")(iconv);\n}\n\nif (\"\" != \"\\u0100\") {\n    console.error(\"iconv-lite warning: javascript files use encoding different from utf-8. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.\");\n}\n","/* (ignored) */","/* (ignored) */","'use strict'\n\n/**\n * Font RegExp helpers.\n */\n\nconst weights = 'bold|bolder|lighter|[1-9]00'\n  , styles = 'italic|oblique'\n  , variants = 'small-caps'\n  , stretches = 'ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded'\n  , units = 'px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q'\n  , string = '\\'([^\\']+)\\'|\"([^\"]+)\"|[\\\\w\\\\s-]+'\n\n// [ [ <font-style> || <font-variant-css21> || <font-weight> || <font-stretch> ]?\n//    <font-size> [ / <line-height> ]? <font-family> ]\n// https://drafts.csswg.org/css-fonts-3/#font-prop\nconst weightRe = new RegExp('(' + weights + ') +', 'i')\nconst styleRe = new RegExp('(' + styles + ') +', 'i')\nconst variantRe = new RegExp('(' + variants + ') +', 'i')\nconst stretchRe = new RegExp('(' + stretches + ') +', 'i')\nconst sizeFamilyRe = new RegExp(\n  '([\\\\d\\\\.]+)(' + units + ') *'\n  + '((?:' + string + ')( *, *(?:' + string + '))*)')\n\n/**\n * Cache font parsing.\n */\n\nconst cache = {}\n\nconst defaultHeight = 16 // pt, common browser default\n\n/**\n * Parse font `str`.\n *\n * @param {String} str\n * @return {Object} Parsed font. `size` is in device units. `unit` is the unit\n *   appearing in the input string.\n * @api private\n */\n\nmodule.exports = function (str) {\n  // Cached\n  if (cache[str]) return cache[str]\n\n  // Try for required properties first.\n  const sizeFamily = sizeFamilyRe.exec(str)\n  if (!sizeFamily) return // invalid\n\n  // Default values and required properties\n  const font = {\n    weight: 'normal',\n    style: 'normal',\n    stretch: 'normal',\n    variant: 'normal',\n    size: parseFloat(sizeFamily[1]),\n    unit: sizeFamily[2],\n    family: sizeFamily[3].replace(/[\"']/g, '').replace(/ *, */g, ',')\n  }\n\n  // Optional, unordered properties.\n  let weight, style, variant, stretch\n  // Stop search at `sizeFamily.index`\n  let substr = str.substring(0, sizeFamily.index)\n  if ((weight = weightRe.exec(substr))) font.weight = weight[1]\n  if ((style = styleRe.exec(substr))) font.style = style[1]\n  if ((variant = variantRe.exec(substr))) font.variant = variant[1]\n  if ((stretch = stretchRe.exec(substr))) font.stretch = stretch[1]\n\n  // Convert to device units. (`font.unit` is the original unit)\n  // TODO: ch, ex\n  switch (font.unit) {\n    case 'pt':\n      font.size /= 0.75\n      break\n    case 'pc':\n      font.size *= 16\n      break\n    case 'in':\n      font.size *= 96\n      break\n    case 'cm':\n      font.size *= 96.0 / 2.54\n      break\n    case 'mm':\n      font.size *= 96.0 / 25.4\n      break\n    case '%':\n      // TODO disabled because existing unit tests assume 100\n      // font.size *= defaultHeight / 100 / 0.75\n      break\n    case 'em':\n    case 'rem':\n      font.size *= defaultHeight / 0.75\n      break\n    case 'q':\n      font.size *= 96 / 25.4 / 4\n      break\n  }\n\n  return (cache[str] = font)\n}\n","import { Injectable } from '@angular/core';\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\nimport { ToastserviceService } from './toastservice.service';\ndeclare let  window : any;\n@Injectable({\n  providedIn: 'root'\n})\nexport class PrintService {\n  public selectedPrinter:any;\n  \n  DatecsPrinter: any;\n  \n  constructor(public btSerial : BluetoothSerial,public tostService:ToastserviceService) { }\n\n listDevices(){\n   return new Promise((resolve,reject)=>{\n    window.DatecsPrinter.listBluetoothDevices(\n      function(success){\n        resolve(success);\n      },\n      function(error){\n        alert(error);\n        reject(error);\n      }\n    )\n   });\n   \n   \n }\n\n connectPrinter(){\n  return new Promise((resolve,reject)=>{\n    window.DatecsPrinter.connect(\n      function(success){\n        resolve(success);\n      },\n      function(error){\n        alert(error);\n        reject(error);\n      }\n    )\n   });\n }\n\n print(data){\n\n  return new Promise((resolve,reject)=>{\n    window.DatecsPrinter.printText(data,'UTF-8',\n      function(success){\n        resolve(success);\n      },\n      function(error){\n        alert(error);\n        reject(error);\n      }\n    )\n   });\n\n }\n\n  printData(macAddress,data){\n  \n    window.DatecsPrinter.listBluetoothDevices(\n      function (devices) {\n        window.DatecsPrinter.connect(devices[0].address, \n          function() {\n            printSomeTestText();\n          },\n          function(error) {\n            alert(JSON.stringify(error));\n          }\n        );\n      },\n      function (error) {\n        alert(JSON.stringify(error));\n      }\n    );\n    \n    function printSomeTestText() {\n      window.DatecsPrinter.printText(\"Print Test!\", 'ISO-8859-1', \n        function() {\n          alert('success');\n        }\n      );\n    }\n    \n\n  }\n\n  searchBluetoothPrinter(){\n   return this.btSerial.list();\n   \n  }\n\n  connectToBluetoothPrinter(macAddress){\n    return this.btSerial.connect(macAddress);\n  }\n\n  disconnectBluetoothPrinter(){\n    return this.btSerial.disconnect();\n  }\n\n  sendToBluetoothPrinter(macAddress,data){\n    this.connectToBluetoothPrinter(macAddress).subscribe(_=>{\n      this.btSerial.write(data).then(_=>{\n        this.btSerial.disconnect()}).catch(reason=>{console.log(reason)})\n    },err=>console.log(this.tostService.presentToast(\"Printer Issue - bluetooth address - \"+macAddress+\"-err-\"+err)));\n  }\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\n// To save memory and loading time, we read table files only when requested.\n\nexports._dbcs = DBCSCodec;\n\nvar UNASSIGNED = -1,\n    GB18030_CODE = -2,\n    SEQ_START  = -10,\n    NODE_START = -1000,\n    UNASSIGNED_NODE = new Array(0x100),\n    DEF_CHAR = -1;\n\nfor (var i = 0; i < 0x100; i++)\n    UNASSIGNED_NODE[i] = UNASSIGNED;\n\n\n// Class DBCSCodec reads and initializes mapping tables.\nfunction DBCSCodec(codecOptions, iconv) {\n    this.encodingName = codecOptions.encodingName;\n    if (!codecOptions)\n        throw new Error(\"DBCS codec is called without the data.\")\n    if (!codecOptions.table)\n        throw new Error(\"Encoding '\" + this.encodingName + \"' has no data.\");\n\n    // Load tables.\n    var mappingTable = codecOptions.table();\n\n\n    // Decode tables: MBCS -> Unicode.\n\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\n    // Trie root is decodeTables[0].\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\n    //         == UNASSIGNED -> unknown/unassigned sequence.\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\n    this.decodeTables = [];\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\n\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \n    this.decodeTableSeq = [];\n\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\n    for (var i = 0; i < mappingTable.length; i++)\n        this._addDecodeChunk(mappingTable[i]);\n\n    this.defaultCharUnicode = iconv.defaultCharUnicode;\n\n    \n    // Encode tables: Unicode -> DBCS.\n\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\n    //         == UNASSIGNED -> no conversion found. Output a default char.\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\n    this.encodeTable = [];\n    \n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\n    // Objects are kept separately from encodeTable to increase performance.\n    this.encodeTableSeq = [];\n\n    // Some chars can be decoded, but need not be encoded.\n    var skipEncodeChars = {};\n    if (codecOptions.encodeSkipVals)\n        for (var i = 0; i < codecOptions.encodeSkipVals.length; i++) {\n            var val = codecOptions.encodeSkipVals[i];\n            if (typeof val === 'number')\n                skipEncodeChars[val] = true;\n            else\n                for (var j = val.from; j <= val.to; j++)\n                    skipEncodeChars[j] = true;\n        }\n        \n    // Use decode trie to recursively fill out encode tables.\n    this._fillEncodeTable(0, 0, skipEncodeChars);\n\n    // Add more encoding pairs when needed.\n    if (codecOptions.encodeAdd) {\n        for (var uChar in codecOptions.encodeAdd)\n            if (Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd, uChar))\n                this._setEncodeChar(uChar.charCodeAt(0), codecOptions.encodeAdd[uChar]);\n    }\n\n    this.defCharSB  = this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\n\n\n    // Load & create GB18030 tables when needed.\n    if (typeof codecOptions.gb18030 === 'function') {\n        this.gb18030 = codecOptions.gb18030(); // Load GB18030 ranges.\n\n        // Add GB18030 decode tables.\n        var thirdByteNodeIdx = this.decodeTables.length;\n        var thirdByteNode = this.decodeTables[thirdByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        var fourthByteNodeIdx = this.decodeTables.length;\n        var fourthByteNode = this.decodeTables[fourthByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        for (var i = 0x81; i <= 0xFE; i++) {\n            var secondByteNodeIdx = NODE_START - this.decodeTables[0][i];\n            var secondByteNode = this.decodeTables[secondByteNodeIdx];\n            for (var j = 0x30; j <= 0x39; j++)\n                secondByteNode[j] = NODE_START - thirdByteNodeIdx;\n        }\n        for (var i = 0x81; i <= 0xFE; i++)\n            thirdByteNode[i] = NODE_START - fourthByteNodeIdx;\n        for (var i = 0x30; i <= 0x39; i++)\n            fourthByteNode[i] = GB18030_CODE\n    }        \n}\n\nDBCSCodec.prototype.encoder = DBCSEncoder;\nDBCSCodec.prototype.decoder = DBCSDecoder;\n\n// Decoder helpers\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\n    var bytes = [];\n    for (; addr > 0; addr >>= 8)\n        bytes.push(addr & 0xFF);\n    if (bytes.length == 0)\n        bytes.push(0);\n\n    var node = this.decodeTables[0];\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\n        var val = node[bytes[i]];\n\n        if (val == UNASSIGNED) { // Create new node.\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\n        }\n        else if (val <= NODE_START) { // Existing node.\n            node = this.decodeTables[NODE_START - val];\n        }\n        else\n            throw new Error(\"Overwrite byte in \" + this.encodingName + \", addr: \" + addr.toString(16));\n    }\n    return node;\n}\n\n\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\n    // First element of chunk is the hex mbcs code where we start.\n    var curAddr = parseInt(chunk[0], 16);\n\n    // Choose the decoding node where we'll write our chars.\n    var writeTable = this._getDecodeTrieNode(curAddr);\n    curAddr = curAddr & 0xFF;\n\n    // Write all other elements of the chunk to the table.\n    for (var k = 1; k < chunk.length; k++) {\n        var part = chunk[k];\n        if (typeof part === \"string\") { // String, write as-is.\n            for (var l = 0; l < part.length;) {\n                var code = part.charCodeAt(l++);\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\n                    var codeTrail = part.charCodeAt(l++);\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\n                    else\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n                }\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\n                    var len = 0xFFF - code + 2;\n                    var seq = [];\n                    for (var m = 0; m < len; m++)\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\n\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\n                    this.decodeTableSeq.push(seq);\n                }\n                else\n                    writeTable[curAddr++] = code; // Basic char\n            }\n        } \n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\n            var charCode = writeTable[curAddr - 1] + 1;\n            for (var l = 0; l < part; l++)\n                writeTable[curAddr++] = charCode++;\n        }\n        else\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n    }\n    if (curAddr > 0xFF)\n        throw new Error(\"Incorrect chunk in \"  + this.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\n}\n\n// Encoder helpers\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\n    if (this.encodeTable[high] === undefined)\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\n    return this.encodeTable[high];\n}\n\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n    if (bucket[low] <= SEQ_START)\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\n    else if (bucket[low] == UNASSIGNED)\n        bucket[low] = dbcsCode;\n}\n\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\n    \n    // Get the root of character tree according to first character of the sequence.\n    var uCode = seq[0];\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n\n    var node;\n    if (bucket[low] <= SEQ_START) {\n        // There's already a sequence with  - use it.\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\n    }\n    else {\n        // There was no sequence object - allocate a new one.\n        node = {};\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\n        this.encodeTableSeq.push(node);\n    }\n\n    // Traverse the character tree, allocating new nodes as needed.\n    for (var j = 1; j < seq.length-1; j++) {\n        var oldVal = node[uCode];\n        if (typeof oldVal === 'object')\n            node = oldVal;\n        else {\n            node = node[uCode] = {}\n            if (oldVal !== undefined)\n                node[DEF_CHAR] = oldVal\n        }\n    }\n\n    // Set the leaf to given dbcsCode.\n    uCode = seq[seq.length-1];\n    node[uCode] = dbcsCode;\n}\n\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\n    var node = this.decodeTables[nodeIdx];\n    for (var i = 0; i < 0x100; i++) {\n        var uCode = node[i];\n        var mbCode = prefix + i;\n        if (skipEncodeChars[mbCode])\n            continue;\n\n        if (uCode >= 0)\n            this._setEncodeChar(uCode, mbCode);\n        else if (uCode <= NODE_START)\n            this._fillEncodeTable(NODE_START - uCode, mbCode << 8, skipEncodeChars);\n        else if (uCode <= SEQ_START)\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\n    }\n}\n\n\n\n// == Encoder ==================================================================\n\nfunction DBCSEncoder(options, codec) {\n    // Encoder state\n    this.leadSurrogate = -1;\n    this.seqObj = undefined;\n    \n    // Static data\n    this.encodeTable = codec.encodeTable;\n    this.encodeTableSeq = codec.encodeTableSeq;\n    this.defaultCharSingleByte = codec.defCharSB;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSEncoder.prototype.write = function(str) {\n    var newBuf = Buffer.alloc(str.length * (this.gb18030 ? 4 : 3)),\n        leadSurrogate = this.leadSurrogate,\n        seqObj = this.seqObj, nextChar = -1,\n        i = 0, j = 0;\n\n    while (true) {\n        // 0. Get next character.\n        if (nextChar === -1) {\n            if (i == str.length) break;\n            var uCode = str.charCodeAt(i++);\n        }\n        else {\n            var uCode = nextChar;\n            nextChar = -1;    \n        }\n\n        // 1. Handle surrogates.\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\n            if (uCode < 0xDC00) { // We've got lead surrogate.\n                if (leadSurrogate === -1) {\n                    leadSurrogate = uCode;\n                    continue;\n                } else {\n                    leadSurrogate = uCode;\n                    // Double lead surrogate found.\n                    uCode = UNASSIGNED;\n                }\n            } else { // We've got trail surrogate.\n                if (leadSurrogate !== -1) {\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\n                    leadSurrogate = -1;\n                } else {\n                    // Incomplete surrogate pair - only trail surrogate found.\n                    uCode = UNASSIGNED;\n                }\n                \n            }\n        }\n        else if (leadSurrogate !== -1) {\n            // Incomplete surrogate pair - only lead surrogate found.\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\n            leadSurrogate = -1;\n        }\n\n        // 2. Convert uCode character.\n        var dbcsCode = UNASSIGNED;\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\n            var resCode = seqObj[uCode];\n            if (typeof resCode === 'object') { // Sequence continues.\n                seqObj = resCode;\n                continue;\n\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\n                dbcsCode = resCode;\n\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\n\n                // Try default character for this sequence\n                resCode = seqObj[DEF_CHAR];\n                if (resCode !== undefined) {\n                    dbcsCode = resCode; // Found. Write it.\n                    nextChar = uCode; // Current character will be written too in the next iteration.\n\n                } else {\n                    // TODO: What if we have no default? (resCode == undefined)\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\n                    // Didn't do it for now because no encoding has this situation yet.\n                    // Currently, just skip the sequence and write current char.\n                }\n            }\n            seqObj = undefined;\n        }\n        else if (uCode >= 0) {  // Regular character\n            var subtable = this.encodeTable[uCode >> 8];\n            if (subtable !== undefined)\n                dbcsCode = subtable[uCode & 0xFF];\n            \n            if (dbcsCode <= SEQ_START) { // Sequence start\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\n                continue;\n            }\n\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\n                // Use GB18030 algorithm to find character(s) to write.\n                var idx = findIdx(this.gb18030.uChars, uCode);\n                if (idx != -1) {\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\n                    newBuf[j++] = 0x30 + dbcsCode;\n                    continue;\n                }\n            }\n        }\n\n        // 3. Write dbcsCode character.\n        if (dbcsCode === UNASSIGNED)\n            dbcsCode = this.defaultCharSingleByte;\n        \n        if (dbcsCode < 0x100) {\n            newBuf[j++] = dbcsCode;\n        }\n        else if (dbcsCode < 0x10000) {\n            newBuf[j++] = dbcsCode >> 8;   // high byte\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\n        }\n        else {\n            newBuf[j++] = dbcsCode >> 16;\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        }\n    }\n\n    this.seqObj = seqObj;\n    this.leadSurrogate = leadSurrogate;\n    return newBuf.slice(0, j);\n}\n\nDBCSEncoder.prototype.end = function() {\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\n        return; // All clean. Most often case.\n\n    var newBuf = Buffer.alloc(10), j = 0;\n\n    if (this.seqObj) { // We're in the sequence.\n        var dbcsCode = this.seqObj[DEF_CHAR];\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\n            if (dbcsCode < 0x100) {\n                newBuf[j++] = dbcsCode;\n            }\n            else {\n                newBuf[j++] = dbcsCode >> 8;   // high byte\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\n            }\n        } else {\n            // See todo above.\n        }\n        this.seqObj = undefined;\n    }\n\n    if (this.leadSurrogate !== -1) {\n        // Incomplete surrogate pair - only lead surrogate found.\n        newBuf[j++] = this.defaultCharSingleByte;\n        this.leadSurrogate = -1;\n    }\n    \n    return newBuf.slice(0, j);\n}\n\n// Export for testing\nDBCSEncoder.prototype.findIdx = findIdx;\n\n\n// == Decoder ==================================================================\n\nfunction DBCSDecoder(options, codec) {\n    // Decoder state\n    this.nodeIdx = 0;\n    this.prevBuf = Buffer.alloc(0);\n\n    // Static data\n    this.decodeTables = codec.decodeTables;\n    this.decodeTableSeq = codec.decodeTableSeq;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSDecoder.prototype.write = function(buf) {\n    var newBuf = Buffer.alloc(buf.length*2),\n        nodeIdx = this.nodeIdx, \n        prevBuf = this.prevBuf, prevBufOffset = this.prevBuf.length,\n        seqStart = -this.prevBuf.length, // idx of the start of current parsed sequence.\n        uCode;\n\n    if (prevBufOffset > 0) // Make prev buf overlap a little to make it easier to slice later.\n        prevBuf = Buffer.concat([prevBuf, buf.slice(0, 10)]);\n    \n    for (var i = 0, j = 0; i < buf.length; i++) {\n        var curByte = (i >= 0) ? buf[i] : prevBuf[i + prevBufOffset];\n\n        // Lookup in current trie node.\n        var uCode = this.decodeTables[nodeIdx][curByte];\n\n        if (uCode >= 0) { \n            // Normal character, just use it.\n        }\n        else if (uCode === UNASSIGNED) { // Unknown char.\n            // TODO: Callback with seq.\n            //var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            i = seqStart; // Try to parse again, after skipping first byte of the sequence ('i' will be incremented by 'for' cycle).\n            uCode = this.defaultCharUnicode.charCodeAt(0);\n        }\n        else if (uCode === GB18030_CODE) {\n            var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            var ptr = (curSeq[0]-0x81)*12600 + (curSeq[1]-0x30)*1260 + (curSeq[2]-0x81)*10 + (curSeq[3]-0x30);\n            var idx = findIdx(this.gb18030.gbChars, ptr);\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\n        }\n        else if (uCode <= NODE_START) { // Go to next trie node.\n            nodeIdx = NODE_START - uCode;\n            continue;\n        }\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\n            for (var k = 0; k < seq.length - 1; k++) {\n                uCode = seq[k];\n                newBuf[j++] = uCode & 0xFF;\n                newBuf[j++] = uCode >> 8;\n            }\n            uCode = seq[seq.length-1];\n        }\n        else\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\n\n        // Write the character to buffer, handling higher planes using surrogate pair.\n        if (uCode > 0xFFFF) { \n            uCode -= 0x10000;\n            var uCodeLead = 0xD800 + Math.floor(uCode / 0x400);\n            newBuf[j++] = uCodeLead & 0xFF;\n            newBuf[j++] = uCodeLead >> 8;\n\n            uCode = 0xDC00 + uCode % 0x400;\n        }\n        newBuf[j++] = uCode & 0xFF;\n        newBuf[j++] = uCode >> 8;\n\n        // Reset trie node.\n        nodeIdx = 0; seqStart = i+1;\n    }\n\n    this.nodeIdx = nodeIdx;\n    this.prevBuf = (seqStart >= 0) ? buf.slice(seqStart) : prevBuf.slice(seqStart + prevBufOffset);\n    return newBuf.slice(0, j).toString('ucs2');\n}\n\nDBCSDecoder.prototype.end = function() {\n    var ret = '';\n\n    // Try to parse all remaining chars.\n    while (this.prevBuf.length > 0) {\n        // Skip 1 character in the buffer.\n        ret += this.defaultCharUnicode;\n        var buf = this.prevBuf.slice(1);\n\n        // Parse remaining as usual.\n        this.prevBuf = Buffer.alloc(0);\n        this.nodeIdx = 0;\n        if (buf.length > 0)\n            ret += this.write(buf);\n    }\n\n    this.nodeIdx = 0;\n    return ret;\n}\n\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\nfunction findIdx(table, val) {\n    if (table[0] > val)\n        return -1;\n\n    var l = 0, r = table.length;\n    while (l < r-1) { // always table[l] <= val < table[r]\n        var mid = l + Math.floor((r-l+1)/2);\n        if (table[mid] <= val)\n            l = mid;\n        else\n            r = mid;\n    }\n    return l;\n}\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \n\nexports._sbcs = SBCSCodec;\nfunction SBCSCodec(codecOptions, iconv) {\n    if (!codecOptions)\n        throw new Error(\"SBCS codec is called without the data.\")\n    \n    // Prepare char buffer for decoding.\n    if (!codecOptions.chars || (codecOptions.chars.length !== 128 && codecOptions.chars.length !== 256))\n        throw new Error(\"Encoding '\"+codecOptions.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\n    \n    if (codecOptions.chars.length === 128) {\n        var asciiString = \"\";\n        for (var i = 0; i < 128; i++)\n            asciiString += String.fromCharCode(i);\n        codecOptions.chars = asciiString + codecOptions.chars;\n    }\n\n    this.decodeBuf = Buffer.from(codecOptions.chars, 'ucs2');\n    \n    // Encoding buffer.\n    var encodeBuf = Buffer.alloc(65536, iconv.defaultCharSingleByte.charCodeAt(0));\n\n    for (var i = 0; i < codecOptions.chars.length; i++)\n        encodeBuf[codecOptions.chars.charCodeAt(i)] = i;\n\n    this.encodeBuf = encodeBuf;\n}\n\nSBCSCodec.prototype.encoder = SBCSEncoder;\nSBCSCodec.prototype.decoder = SBCSDecoder;\n\n\nfunction SBCSEncoder(options, codec) {\n    this.encodeBuf = codec.encodeBuf;\n}\n\nSBCSEncoder.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length);\n    for (var i = 0; i < str.length; i++)\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\n    \n    return buf;\n}\n\nSBCSEncoder.prototype.end = function() {\n}\n\n\nfunction SBCSDecoder(options, codec) {\n    this.decodeBuf = codec.decodeBuf;\n}\n\nSBCSDecoder.prototype.write = function(buf) {\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\n    var decodeBuf = this.decodeBuf;\n    var newBuf = Buffer.alloc(buf.length*2);\n    var idx1 = 0, idx2 = 0;\n    for (var i = 0; i < buf.length; i++) {\n        idx1 = buf[i]*2; idx2 = i*2;\n        newBuf[idx2] = decodeBuf[idx1];\n        newBuf[idx2+1] = decodeBuf[idx1+1];\n    }\n    return newBuf.toString('ucs2');\n}\n\nSBCSDecoder.prototype.end = function() {\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","\"use strict\";\n\n// Update this array if you add/rename/remove files in this directory.\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\nvar modules = [\n    require(\"./internal\"),\n    require(\"./utf16\"),\n    require(\"./utf7\"),\n    require(\"./sbcs-codec\"),\n    require(\"./sbcs-data\"),\n    require(\"./sbcs-data-generated\"),\n    require(\"./dbcs-codec\"),\n    require(\"./dbcs-data\"),\n];\n\n// Put all encoding/alias/codec definitions to single object and export it. \nfor (var i = 0; i < modules.length; i++) {\n    var module = modules[i];\n    for (var enc in module)\n        if (Object.prototype.hasOwnProperty.call(module, enc))\n            exports[enc] = module[enc];\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Export Node.js internal encodings.\n\nmodule.exports = {\n    // Encodings\n    utf8:   { type: \"_internal\", bomAware: true},\n    cesu8:  { type: \"_internal\", bomAware: true},\n    unicode11utf8: \"utf8\",\n\n    ucs2:   { type: \"_internal\", bomAware: true},\n    utf16le: \"ucs2\",\n\n    binary: { type: \"_internal\" },\n    base64: { type: \"_internal\" },\n    hex:    { type: \"_internal\" },\n\n    // Codec.\n    _internal: InternalCodec,\n};\n\n//------------------------------------------------------------------------------\n\nfunction InternalCodec(codecOptions, iconv) {\n    this.enc = codecOptions.encodingName;\n    this.bomAware = codecOptions.bomAware;\n\n    if (this.enc === \"base64\")\n        this.encoder = InternalEncoderBase64;\n    else if (this.enc === \"cesu8\") {\n        this.enc = \"utf8\"; // Use utf8 for decoding.\n        this.encoder = InternalEncoderCesu8;\n\n        // Add decoder for versions of Node not supporting CESU-8\n        if (Buffer.from('eda0bdedb2a9', 'hex').toString() !== '') {\n            this.decoder = InternalDecoderCesu8;\n            this.defaultCharUnicode = iconv.defaultCharUnicode;\n        }\n    }\n}\n\nInternalCodec.prototype.encoder = InternalEncoder;\nInternalCodec.prototype.decoder = InternalDecoder;\n\n//------------------------------------------------------------------------------\n\n// We use node.js internal decoder. Its signature is the same as ours.\nvar StringDecoder = require('string_decoder').StringDecoder;\n\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\n    StringDecoder.prototype.end = function() {};\n\n\nfunction InternalDecoder(options, codec) {\n    StringDecoder.call(this, codec.enc);\n}\n\nInternalDecoder.prototype = StringDecoder.prototype;\n\n\n//------------------------------------------------------------------------------\n// Encoder is mostly trivial\n\nfunction InternalEncoder(options, codec) {\n    this.enc = codec.enc;\n}\n\nInternalEncoder.prototype.write = function(str) {\n    return Buffer.from(str, this.enc);\n}\n\nInternalEncoder.prototype.end = function() {\n}\n\n\n//------------------------------------------------------------------------------\n// Except base64 encoder, which must keep its state.\n\nfunction InternalEncoderBase64(options, codec) {\n    this.prevStr = '';\n}\n\nInternalEncoderBase64.prototype.write = function(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n\n    return Buffer.from(str, \"base64\");\n}\n\nInternalEncoderBase64.prototype.end = function() {\n    return Buffer.from(this.prevStr, \"base64\");\n}\n\n\n//------------------------------------------------------------------------------\n// CESU-8 encoder is also special.\n\nfunction InternalEncoderCesu8(options, codec) {\n}\n\nInternalEncoderCesu8.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length * 3), bufIdx = 0;\n    for (var i = 0; i < str.length; i++) {\n        var charCode = str.charCodeAt(i);\n        // Naive implementation, but it works because CESU-8 is especially easy\n        // to convert from UTF-16 (which all JS strings are encoded in).\n        if (charCode < 0x80)\n            buf[bufIdx++] = charCode;\n        else if (charCode < 0x800) {\n            buf[bufIdx++] = 0xC0 + (charCode >>> 6);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n        else { // charCode will always be < 0x10000 in javascript.\n            buf[bufIdx++] = 0xE0 + (charCode >>> 12);\n            buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n    }\n    return buf.slice(0, bufIdx);\n}\n\nInternalEncoderCesu8.prototype.end = function() {\n}\n\n//------------------------------------------------------------------------------\n// CESU-8 decoder is not implemented in Node v4.0+\n\nfunction InternalDecoderCesu8(options, codec) {\n    this.acc = 0;\n    this.contBytes = 0;\n    this.accBytes = 0;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n}\n\nInternalDecoderCesu8.prototype.write = function(buf) {\n    var acc = this.acc, contBytes = this.contBytes, accBytes = this.accBytes, \n        res = '';\n    for (var i = 0; i < buf.length; i++) {\n        var curByte = buf[i];\n        if ((curByte & 0xC0) !== 0x80) { // Leading byte\n            if (contBytes > 0) { // Previous code is invalid\n                res += this.defaultCharUnicode;\n                contBytes = 0;\n            }\n\n            if (curByte < 0x80) { // Single-byte code\n                res += String.fromCharCode(curByte);\n            } else if (curByte < 0xE0) { // Two-byte code\n                acc = curByte & 0x1F;\n                contBytes = 1; accBytes = 1;\n            } else if (curByte < 0xF0) { // Three-byte code\n                acc = curByte & 0x0F;\n                contBytes = 2; accBytes = 1;\n            } else { // Four or more are not supported for CESU-8.\n                res += this.defaultCharUnicode;\n            }\n        } else { // Continuation byte\n            if (contBytes > 0) { // We're waiting for it.\n                acc = (acc << 6) | (curByte & 0x3f);\n                contBytes--; accBytes++;\n                if (contBytes === 0) {\n                    // Check for overlong encoding, but support Modified UTF-8 (encoding NULL as C0 80)\n                    if (accBytes === 2 && acc < 0x80 && acc > 0)\n                        res += this.defaultCharUnicode;\n                    else if (accBytes === 3 && acc < 0x800)\n                        res += this.defaultCharUnicode;\n                    else\n                        // Actually add character.\n                        res += String.fromCharCode(acc);\n                }\n            } else { // Unexpected continuation byte\n                res += this.defaultCharUnicode;\n            }\n        }\n    }\n    this.acc = acc; this.contBytes = contBytes; this.accBytes = accBytes;\n    return res;\n}\n\nInternalDecoderCesu8.prototype.end = function() {\n    var res = 0;\n    if (this.contBytes > 0)\n        res += this.defaultCharUnicode;\n    return res;\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\n// See also below a UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\n\nexports.utf7 = Utf7Codec;\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\nfunction Utf7Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7Codec.prototype.encoder = Utf7Encoder;\nUtf7Codec.prototype.decoder = Utf7Decoder;\nUtf7Codec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\n\nfunction Utf7Encoder(options, codec) {\n    this.iconv = codec.iconv;\n}\n\nUtf7Encoder.prototype.write = function(str) {\n    // Naive implementation.\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\n    return Buffer.from(str.replace(nonDirectChars, function(chunk) {\n        return \"+\" + (chunk === '+' ? '' : \n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \n            + \"-\";\n    }.bind(this)));\n}\n\nUtf7Encoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf7Decoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64Regex = /[A-Za-z0-9\\/+]/;\nvar base64Chars = [];\nfor (var i = 0; i < 256; i++)\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\n\nvar plusChar = '+'.charCodeAt(0), \n    minusChar = '-'.charCodeAt(0),\n    andChar = '&'.charCodeAt(0);\n\nUtf7Decoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '+'\n            if (buf[i] == plusChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64Chars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\n                    res += \"+\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString();\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString();\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7Decoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n// UTF-7-IMAP codec.\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\n// Differences:\n//  * Base64 part is started by \"&\" instead of \"+\"\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\n//  * In Base64, \",\" is used instead of \"/\"\n//  * Base64 must not be used to represent direct characters.\n//  * No implicit shift back from Base64 (should always end with '-')\n//  * String must end in non-shifted position.\n//  * \"-&\" while in base64 is not allowed.\n\n\nexports.utf7imap = Utf7IMAPCodec;\nfunction Utf7IMAPCodec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7IMAPCodec.prototype.encoder = Utf7IMAPEncoder;\nUtf7IMAPCodec.prototype.decoder = Utf7IMAPDecoder;\nUtf7IMAPCodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf7IMAPEncoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = Buffer.alloc(6);\n    this.base64AccumIdx = 0;\n}\n\nUtf7IMAPEncoder.prototype.write = function(str) {\n    var inBase64 = this.inBase64,\n        base64Accum = this.base64Accum,\n        base64AccumIdx = this.base64AccumIdx,\n        buf = Buffer.alloc(str.length*5 + 10), bufIdx = 0;\n\n    for (var i = 0; i < str.length; i++) {\n        var uChar = str.charCodeAt(i);\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\n            if (inBase64) {\n                if (base64AccumIdx > 0) {\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n                    base64AccumIdx = 0;\n                }\n\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n                inBase64 = false;\n            }\n\n            if (!inBase64) {\n                buf[bufIdx++] = uChar; // Write direct character\n\n                if (uChar === andChar)  // Ampersand -> '&-'\n                    buf[bufIdx++] = minusChar;\n            }\n\n        } else { // Non-direct character\n            if (!inBase64) {\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\n                inBase64 = true;\n            }\n            if (inBase64) {\n                base64Accum[base64AccumIdx++] = uChar >> 8;\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\n\n                if (base64AccumIdx == base64Accum.length) {\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\n                    base64AccumIdx = 0;\n                }\n            }\n        }\n    }\n\n    this.inBase64 = inBase64;\n    this.base64AccumIdx = base64AccumIdx;\n\n    return buf.slice(0, bufIdx);\n}\n\nUtf7IMAPEncoder.prototype.end = function() {\n    var buf = Buffer.alloc(10), bufIdx = 0;\n    if (this.inBase64) {\n        if (this.base64AccumIdx > 0) {\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n            this.base64AccumIdx = 0;\n        }\n\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n        this.inBase64 = false;\n    }\n\n    return buf.slice(0, bufIdx);\n}\n\n\n// -- Decoding\n\nfunction Utf7IMAPDecoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64IMAPChars = base64Chars.slice();\nbase64IMAPChars[','.charCodeAt(0)] = true;\n\nUtf7IMAPDecoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '&'\n            if (buf[i] == andChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\n                    res += \"&\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString().replace(/,/g, '/');\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString().replace(/,/g, '/');\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7IMAPDecoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n","/**\n * Use the ImageData from a Canvas and turn the image in a 1-bit black and white image using dithering\n */\nclass CanvasDither {\n  /**\n     * Change the image to grayscale\n     *\n     * @param  {object}   image         The imageData of a Canvas 2d context\n     * @return {object}                 The resulting imageData\n     *\n     */\n  grayscale(image) {\n    for (let i = 0; i < image.data.length; i += 4) {\n      const luminance = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\n      image.data.fill(luminance, i, i + 3);\n    }\n\n    return image;\n  }\n\n  /**\n     * Change the image to blank and white using a simple threshold\n     *\n     * @param  {object}   image         The imageData of a Canvas 2d context\n     * @param  {number}   threshold     Threshold value (0-255)\n     * @return {object}                 The resulting imageData\n     *\n     */\n  threshold(image, threshold) {\n    for (let i = 0; i < image.data.length; i += 4) {\n      const luminance = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\n\n      const value = luminance < threshold ? 0 : 255;\n      image.data.fill(value, i, i + 3);\n    }\n\n    return image;\n  }\n\n  /**\n     * Change the image to blank and white using the Bayer algorithm\n     *\n     * @param  {object}   image         The imageData of a Canvas 2d context\n     * @param  {number}   threshold     Threshold value (0-255)\n     * @return {object}                 The resulting imageData\n     *\n     */\n  bayer(image, threshold) {\n    const thresholdMap = [\n      [15, 135, 45, 165],\n      [195, 75, 225, 105],\n      [60, 180, 30, 150],\n      [240, 120, 210, 90],\n    ];\n\n    for (let i = 0; i < image.data.length; i += 4) {\n      const luminance = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\n\n      const x = i / 4 % image.width;\n      const y = Math.floor(i / 4 / image.width);\n      const map = Math.floor((luminance + thresholdMap[x % 4][y % 4]) / 2);\n      const value = map < threshold ? 0 : 255;\n      image.data.fill(value, i, i + 3);\n    }\n\n    return image;\n  }\n\n  /**\n     * Change the image to blank and white using the Floyd-Steinberg algorithm\n     *\n     * @param  {object}   image         The imageData of a Canvas 2d context\n     * @return {object}                 The resulting imageData\n     *\n     */\n  floydsteinberg(image) {\n    const width = image.width;\n    const luminance = new Uint8ClampedArray(image.width * image.height);\n\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\n      luminance[l] = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\n    }\n\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\n      const value = luminance[l] < 129 ? 0 : 255;\n      const error = Math.floor((luminance[l] - value) / 16);\n      image.data.fill(value, i, i + 3);\n\n      luminance[l + 1] += error * 7;\n      luminance[l + width - 1] += error * 3;\n      luminance[l + width] += error * 5;\n      luminance[l + width + 1] += error * 1;\n    }\n\n    return image;\n  }\n\n  /**\n     * Change the image to blank and white using the Atkinson algorithm\n     *\n     * @param  {object}   image         The imageData of a Canvas 2d context\n     * @return {object}                 The resulting imageData\n     *\n     */\n  atkinson(image) {\n    const width = image.width;\n    const luminance = new Uint8ClampedArray(image.width * image.height);\n\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\n      luminance[l] = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\n    }\n\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\n      const value = luminance[l] < 129 ? 0 : 255;\n      const error = Math.floor((luminance[l] - value) / 8);\n      image.data.fill(value, i, i + 3);\n\n      luminance[l + 1] += error;\n      luminance[l + 2] += error;\n      luminance[l + width - 1] += error;\n      luminance[l + width] += error;\n      luminance[l + width + 1] += error;\n      luminance[l + 2 * width] += error;\n    }\n\n    return image;\n  }\n}\n\nmodule.exports = new CanvasDither();\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","\"use strict\";\n\n// Manually added data to be used by sbcs codec in addition to generated one.\n\nmodule.exports = {\n    // Not supported by iconv, not sure why.\n    \"10029\": \"maccenteuro\",\n    \"maccenteuro\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"808\": \"cp808\",\n    \"ibm808\": \"cp808\",\n    \"cp808\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"mik\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    // Aliases of generated encodings.\n    \"ascii8bit\": \"ascii\",\n    \"usascii\": \"ascii\",\n    \"ansix34\": \"ascii\",\n    \"ansix341968\": \"ascii\",\n    \"ansix341986\": \"ascii\",\n    \"csascii\": \"ascii\",\n    \"cp367\": \"ascii\",\n    \"ibm367\": \"ascii\",\n    \"isoir6\": \"ascii\",\n    \"iso646us\": \"ascii\",\n    \"iso646irv\": \"ascii\",\n    \"us\": \"ascii\",\n\n    \"latin1\": \"iso88591\",\n    \"latin2\": \"iso88592\",\n    \"latin3\": \"iso88593\",\n    \"latin4\": \"iso88594\",\n    \"latin5\": \"iso88599\",\n    \"latin6\": \"iso885910\",\n    \"latin7\": \"iso885913\",\n    \"latin8\": \"iso885914\",\n    \"latin9\": \"iso885915\",\n    \"latin10\": \"iso885916\",\n\n    \"csisolatin1\": \"iso88591\",\n    \"csisolatin2\": \"iso88592\",\n    \"csisolatin3\": \"iso88593\",\n    \"csisolatin4\": \"iso88594\",\n    \"csisolatincyrillic\": \"iso88595\",\n    \"csisolatinarabic\": \"iso88596\",\n    \"csisolatingreek\" : \"iso88597\",\n    \"csisolatinhebrew\": \"iso88598\",\n    \"csisolatin5\": \"iso88599\",\n    \"csisolatin6\": \"iso885910\",\n\n    \"l1\": \"iso88591\",\n    \"l2\": \"iso88592\",\n    \"l3\": \"iso88593\",\n    \"l4\": \"iso88594\",\n    \"l5\": \"iso88599\",\n    \"l6\": \"iso885910\",\n    \"l7\": \"iso885913\",\n    \"l8\": \"iso885914\",\n    \"l9\": \"iso885915\",\n    \"l10\": \"iso885916\",\n\n    \"isoir14\": \"iso646jp\",\n    \"isoir57\": \"iso646cn\",\n    \"isoir100\": \"iso88591\",\n    \"isoir101\": \"iso88592\",\n    \"isoir109\": \"iso88593\",\n    \"isoir110\": \"iso88594\",\n    \"isoir144\": \"iso88595\",\n    \"isoir127\": \"iso88596\",\n    \"isoir126\": \"iso88597\",\n    \"isoir138\": \"iso88598\",\n    \"isoir148\": \"iso88599\",\n    \"isoir157\": \"iso885910\",\n    \"isoir166\": \"tis620\",\n    \"isoir179\": \"iso885913\",\n    \"isoir199\": \"iso885914\",\n    \"isoir203\": \"iso885915\",\n    \"isoir226\": \"iso885916\",\n\n    \"cp819\": \"iso88591\",\n    \"ibm819\": \"iso88591\",\n\n    \"cyrillic\": \"iso88595\",\n\n    \"arabic\": \"iso88596\",\n    \"arabic8\": \"iso88596\",\n    \"ecma114\": \"iso88596\",\n    \"asmo708\": \"iso88596\",\n\n    \"greek\" : \"iso88597\",\n    \"greek8\" : \"iso88597\",\n    \"ecma118\" : \"iso88597\",\n    \"elot928\" : \"iso88597\",\n\n    \"hebrew\": \"iso88598\",\n    \"hebrew8\": \"iso88598\",\n\n    \"turkish\": \"iso88599\",\n    \"turkish8\": \"iso88599\",\n\n    \"thai\": \"iso885911\",\n    \"thai8\": \"iso885911\",\n\n    \"celtic\": \"iso885914\",\n    \"celtic8\": \"iso885914\",\n    \"isoceltic\": \"iso885914\",\n\n    \"tis6200\": \"tis620\",\n    \"tis62025291\": \"tis620\",\n    \"tis62025330\": \"tis620\",\n\n    \"10000\": \"macroman\",\n    \"10006\": \"macgreek\",\n    \"10007\": \"maccyrillic\",\n    \"10079\": \"maciceland\",\n    \"10081\": \"macturkish\",\n\n    \"cspc8codepage437\": \"cp437\",\n    \"cspc775baltic\": \"cp775\",\n    \"cspc850multilingual\": \"cp850\",\n    \"cspcp852\": \"cp852\",\n    \"cspc862latinhebrew\": \"cp862\",\n    \"cpgr\": \"cp869\",\n\n    \"msee\": \"cp1250\",\n    \"mscyrl\": \"cp1251\",\n    \"msansi\": \"cp1252\",\n    \"msgreek\": \"cp1253\",\n    \"msturk\": \"cp1254\",\n    \"mshebr\": \"cp1255\",\n    \"msarab\": \"cp1256\",\n    \"winbaltrim\": \"cp1257\",\n\n    \"cp20866\": \"koi8r\",\n    \"20866\": \"koi8r\",\n    \"ibm878\": \"koi8r\",\n    \"cskoi8r\": \"koi8r\",\n\n    \"cp21866\": \"koi8u\",\n    \"21866\": \"koi8u\",\n    \"ibm1168\": \"koi8u\",\n\n    \"strk10482002\": \"rk1048\",\n\n    \"tcvn5712\": \"tcvn\",\n    \"tcvn57121\": \"tcvn\",\n\n    \"gb198880\": \"iso646cn\",\n    \"cn\": \"iso646cn\",\n\n    \"csiso14jisc6220ro\": \"iso646jp\",\n    \"jisc62201969ro\": \"iso646jp\",\n    \"jp\": \"iso646jp\",\n\n    \"cshproman8\": \"hproman8\",\n    \"r8\": \"hproman8\",\n    \"roman8\": \"hproman8\",\n    \"xroman8\": \"hproman8\",\n    \"ibm1051\": \"hproman8\",\n\n    \"mac\": \"macintosh\",\n    \"csmacintosh\": \"macintosh\",\n};\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Note: UTF16-LE (or UCS2) codec is Node.js native. See encodings/internal.js\n\n// == UTF16-BE codec. ==========================================================\n\nexports.utf16be = Utf16BECodec;\nfunction Utf16BECodec() {\n}\n\nUtf16BECodec.prototype.encoder = Utf16BEEncoder;\nUtf16BECodec.prototype.decoder = Utf16BEDecoder;\nUtf16BECodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf16BEEncoder() {\n}\n\nUtf16BEEncoder.prototype.write = function(str) {\n    var buf = Buffer.from(str, 'ucs2');\n    for (var i = 0; i < buf.length; i += 2) {\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\n    }\n    return buf;\n}\n\nUtf16BEEncoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf16BEDecoder() {\n    this.overflowByte = -1;\n}\n\nUtf16BEDecoder.prototype.write = function(buf) {\n    if (buf.length == 0)\n        return '';\n\n    var buf2 = Buffer.alloc(buf.length + 1),\n        i = 0, j = 0;\n\n    if (this.overflowByte !== -1) {\n        buf2[0] = buf[0];\n        buf2[1] = this.overflowByte;\n        i = 1; j = 2;\n    }\n\n    for (; i < buf.length-1; i += 2, j+= 2) {\n        buf2[j] = buf[i+1];\n        buf2[j+1] = buf[i];\n    }\n\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\n\n    return buf2.slice(0, j).toString('ucs2');\n}\n\nUtf16BEDecoder.prototype.end = function() {\n}\n\n\n// == UTF-16 codec =============================================================\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\n// Defaults to UTF-16LE, as it's prevalent and default in Node.\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {defaultEncoding: 'utf-16be'});\n\n// Encoder uses UTF-16LE and prepends BOM (which can be overridden with addBOM: false).\n\nexports.utf16 = Utf16Codec;\nfunction Utf16Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n}\n\nUtf16Codec.prototype.encoder = Utf16Encoder;\nUtf16Codec.prototype.decoder = Utf16Decoder;\n\n\n// -- Encoding (pass-through)\n\nfunction Utf16Encoder(options, codec) {\n    options = options || {};\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n    this.encoder = codec.iconv.getEncoder('utf-16le', options);\n}\n\nUtf16Encoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n}\n\nUtf16Encoder.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n// -- Decoding\n\nfunction Utf16Decoder(options, codec) {\n    this.decoder = null;\n    this.initialBytes = [];\n    this.initialBytesLen = 0;\n\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf16Decoder.prototype.write = function(buf) {\n    if (!this.decoder) {\n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBytes.push(buf);\n        this.initialBytesLen += buf.length;\n        \n        if (this.initialBytesLen < 16) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n        this.initialBytes.length = this.initialBytesLen = 0;\n    }\n\n    return this.decoder.write(buf);\n}\n\nUtf16Decoder.prototype.end = function() {\n    if (!this.decoder) {\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var res = this.decoder.write(buf),\n            trail = this.decoder.end();\n\n        return trail ? (res + trail) : res;\n    }\n    return this.decoder.end();\n}\n\nfunction detectEncoding(buf, defaultEncoding) {\n    var enc = defaultEncoding || 'utf-16le';\n\n    if (buf.length >= 2) {\n        // Check BOM.\n        if (buf[0] == 0xFE && buf[1] == 0xFF) // UTF-16BE BOM\n            enc = 'utf-16be';\n        else if (buf[0] == 0xFF && buf[1] == 0xFE) // UTF-16LE BOM\n            enc = 'utf-16le';\n        else {\n            // No BOM found. Try to deduce encoding from initial content.\n            // Most of the time, the content has ASCII chars (U+00**), but the opposite (U+**00) is uncommon.\n            // So, we count ASCII as if it was LE or BE, and decide from that.\n            var asciiCharsLE = 0, asciiCharsBE = 0, // Counts of chars in both positions\n                _len = Math.min(buf.length - (buf.length % 2), 64); // Len is always even.\n\n            for (var i = 0; i < _len; i += 2) {\n                if (buf[i] === 0 && buf[i+1] !== 0) asciiCharsBE++;\n                if (buf[i] !== 0 && buf[i+1] === 0) asciiCharsLE++;\n            }\n\n            if (asciiCharsBE > asciiCharsLE)\n                enc = 'utf-16be';\n            else if (asciiCharsBE < asciiCharsLE)\n                enc = 'utf-16le';\n        }\n    }\n\n    return enc;\n}\n\n\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/**\n * Use the ImageData from a Canvas and flatten the image on a solid background\n */\nclass CanvasFlatten {\n  /**\n     * Change the image to grayscale\n     *\n     * @param  {object}   image         The imageData of a Canvas 2d context\n     * @param  {array}    background    Three values consisting of the r, g, b of the background\n     * @return {object}                 The resulting imageData\n     *\n     */\n  flatten(image, background) {\n    for (let i = 0; i < image.data.length; i += 4) {\n      const alpha = image.data[i + 3];\n      const invAlpha = 255 - alpha;\n\n      image.data[i] = (alpha * image.data[i] + invAlpha * background[0]) / 255;\n      image.data[i + 1] = (alpha * image.data[i + 1] + invAlpha * background[1]) / 255;\n      image.data[i + 2] = (alpha * image.data[i + 2] + invAlpha * background[2]) / 255;\n      image.data[i + 3] = 0xff;\n    }\n\n    return image;\n  }\n}\n\nmodule.exports = new CanvasFlatten();\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","\"use strict\";\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n","\"use strict\";\n\n// Description of supported double byte encodings and aliases.\n// Tables are not require()-d until they are needed to speed up library load.\n// require()-s are direct to support Browserify.\n\nmodule.exports = {\n    \n    // == Japanese/ShiftJIS ====================================================\n    // All japanese encodings are based on JIS X set of standards:\n    // JIS X 0201 - Single-byte encoding of ASCII +  + Kana chars at 0xA1-0xDF.\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \n    //              Has several variations in 1978, 1983, 1990 and 1997.\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\n    //              2 planes, first is superset of 0208, second - revised 0212.\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\n\n    // Byte encodings are:\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\n    //               0x00-0x7F       - lower part of 0201\n    //               0x8E, 0xA1-0xDF - upper part of 0201\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\n    //               Used as-is in ISO2022 family.\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \n    //                0201-1976 Roman, 0208-1978, 0208-1983.\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\n    //\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\n    //\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\n\n    'shiftjis': {\n        type: '_dbcs',\n        table: function() { return require('./tables/shiftjis.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\n    },\n    'csshiftjis': 'shiftjis',\n    'mskanji': 'shiftjis',\n    'sjis': 'shiftjis',\n    'windows31j': 'shiftjis',\n    'ms31j': 'shiftjis',\n    'xsjis': 'shiftjis',\n    'windows932': 'shiftjis',\n    'ms932': 'shiftjis',\n    '932': 'shiftjis',\n    'cp932': 'shiftjis',\n\n    'eucjp': {\n        type: '_dbcs',\n        table: function() { return require('./tables/eucjp.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n    },\n\n    // TODO: KDDI extension to Shift_JIS\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\n\n\n    // == Chinese/GBK ==========================================================\n    // http://en.wikipedia.org/wiki/GBK\n    // We mostly implement W3C recommendation: https://www.w3.org/TR/encoding/#gbk-encoder\n\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\n    'gb2312': 'cp936',\n    'gb231280': 'cp936',\n    'gb23121980': 'cp936',\n    'csgb2312': 'cp936',\n    'csiso58gb231280': 'cp936',\n    'euccn': 'cp936',\n\n    // Microsoft's CP936 is a subset and approximation of GBK.\n    'windows936': 'cp936',\n    'ms936': 'cp936',\n    '936': 'cp936',\n    'cp936': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json') },\n    },\n\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\n    'gbk': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n    },\n    'xgbk': 'gbk',\n    'isoir58': 'gbk',\n\n    // GB18030 is an algorithmic extension of GBK.\n    // Main source: https://www.w3.org/TR/encoding/#gbk-encoder\n    // http://icu-project.org/docs/papers/gb18030.html\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\n    'gb18030': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\n        encodeSkipVals: [0x80],\n        encodeAdd: {'': 0xA2E3},\n    },\n\n    'chinese': 'gb18030',\n\n\n    // == Korean ===============================================================\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\n    'windows949': 'cp949',\n    'ms949': 'cp949',\n    '949': 'cp949',\n    'cp949': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp949.json') },\n    },\n\n    'cseuckr': 'cp949',\n    'csksc56011987': 'cp949',\n    'euckr': 'cp949',\n    'isoir149': 'cp949',\n    'korean': 'cp949',\n    'ksc56011987': 'cp949',\n    'ksc56011989': 'cp949',\n    'ksc5601': 'cp949',\n\n\n    // == Big5/Taiwan/Hong Kong ================================================\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\n    // Variations, in roughly number of defined chars:\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\n    //    Plus, it has 4 combining sequences.\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\n    // \n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\n\n    'windows950': 'cp950',\n    'ms950': 'cp950',\n    '950': 'cp950',\n    'cp950': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json') },\n    },\n\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\n    'big5': 'big5hkscs',\n    'big5hkscs': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\n        encodeSkipVals: [0xa2cc],\n    },\n\n    'cnbig5': 'big5hkscs',\n    'csbig5': 'big5hkscs',\n    'xxbig5': 'big5hkscs',\n};\n","/* eslint-disable node/no-deprecated-api */\n\n'use strict'\n\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n"]}